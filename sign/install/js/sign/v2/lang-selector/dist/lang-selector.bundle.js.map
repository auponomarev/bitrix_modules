{"version":3,"file":"lang-selector.bundle.js","sources":["../src/index.js"],"sourcesContent":["import { Loc, Type } from 'main.core';\nimport { Button } from 'ui.buttons';\nimport { Api } from 'sign.v2.api';\n\nexport class LangSelector\n{\n\t#api: Api;\n\t#langs: ?Object;\n\t#langButton: Button;\n\t#region: string;\n\t#documentUid: string;\n\n\tconstructor(region, langs)\n\t{\n\t\tthis.#region = region;\n\t\tthis.#langs = langs;\n\t\tthis.#documentUid = '';\n\t\tthis.#langButton = this.#getLanguageButton();\n\t\tthis.#api = new Api();\n\t}\n\n\tgetLayout()\n\t{\n\t\treturn this.#langButton.getContainer();\n\t}\n\n\t#getLanguageItems()\n\t{\n\t\tconst onItemClick = function(event) {\n\t\t\tconst id = event.currentTarget.getAttribute('data-lang-id')\n\t\t\tthis.#langButton.menuWindow.close();\n\t\t\tthis.#changeLang(id);\n\t\t\tthis.#langButton.setText(this.#langs[id]['NAME']);\n\t\t}.bind(this);\n\t\treturn Object.entries(this.#langs).map((lang) => {\n\t\t\treturn {\n\t\t\t\ttext: lang[1].NAME,\n\t\t\t\tonclick: onItemClick,\n\t\t\t\tdataset: { langId: lang[0] },\n\t\t\t};\n\t\t});\n\t}\n\n\t#getLanguageButton()\n\t{\n\t\treturn new Button({\n\t\t\ttext: (this.#langs[this.#region]?.NAME || Loc.getMessage('SIGN_BLANK_LANGUAGE_SELECTOR_BUTTON_TITLE')),\n\t\t\tdropdown: true,\n\t\t\tcloseByEsc: true,\n\t\t\tautoHide: true,\n\t\t\tautoClose: true,\n\t\t\tcolor: BX.UI.Button.Color.LIGHT,\n\t\t\tsize: BX.UI.Button.Size.SMALL,\n\t\t\tmenu: {\n\t\t\t\titems: this.#getLanguageItems(),\n\t\t\t},\n\t\t\tclassName: 'sign-blank-selector__lang-container_language-button',\n\n\t\t});\n\t}\n\n\tasync #changeLang(langId)\n\t{\n\t\tawait this.#api.modifyLanguageId(this.#documentUid, langId);\n\t}\n\n\tsetDocumentUid(uid)\n\t{\n\t\tthis.#documentUid = uid;\n\t}\n}\n"],"names":["LangSelector","constructor","region","langs","Api","getLayout","getContainer","setDocumentUid","uid","onItemClick","event","id","currentTarget","getAttribute","menuWindow","close","setText","bind","Object","entries","map","lang","text","NAME","onclick","dataset","langId","Button","Loc","getMessage","dropdown","closeByEsc","autoHide","autoClose","color","BX","UI","Color","LIGHT","size","Size","SMALL","menu","items","className","modifyLanguageId"],"mappings":";;;;;CAEkC;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;AAElC,CAAO,MAAMA,YAAY,CACzB;GAOCC,WAAW,CAACC,MAAM,EAAEC,KAAK,EACzB;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KACC,4CAAI,sBAAWD,MAAM;KACrB,4CAAI,oBAAUC,KAAK;KACnB,4CAAI,gCAAgB,EAAE;KACtB,4CAAI,sEAAe,IAAI,2CAAqB;KAC5C,4CAAI,gBAAQ,IAAIC,eAAG,EAAE;;GAGtBC,SAAS,GACT;KACC,OAAO,4CAAI,4BAAaC,YAAY,EAAE;;GA2CvCC,cAAc,CAACC,GAAG,EAClB;KACC,4CAAI,gCAAgBA,GAAG;;CAEzB;CAAC,8BA3CA;GACC,MAAMC,WAAW,GAAG,UAASC,KAAK,EAAE;KACnC,MAAMC,EAAE,GAAGD,KAAK,CAACE,aAAa,CAACC,YAAY,CAAC,cAAc,CAAC;KAC3D,4CAAI,4BAAaC,UAAU,CAACC,KAAK,EAAE;KACnC,4CAAI,4BAAaJ,EAAE;KACnB,4CAAI,4BAAaK,OAAO,CAAC,4CAAI,kBAAQL,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC;IACjD,CAACM,IAAI,CAAC,IAAI,CAAC;GACZ,OAAOC,MAAM,CAACC,OAAO,yCAAC,IAAI,kBAAQ,CAACC,GAAG,CAAEC,IAAI,IAAK;KAChD,OAAO;OACNC,IAAI,EAAED,IAAI,CAAC,CAAC,CAAC,CAACE,IAAI;OAClBC,OAAO,EAAEf,WAAW;OACpBgB,OAAO,EAAE;SAAEC,MAAM,EAAEL,IAAI,CAAC,CAAC;;MACzB;IACD,CAAC;CACH;CAAC,+BAGD;GAAA;GACC,OAAO,IAAIM,iBAAM,CAAC;KACjBL,IAAI,EAAG,sEAAI,0DAAQ,IAAI,oBAAS,qBAAzB,sBAA2BC,IAAI,KAAIK,aAAG,CAACC,UAAU,CAAC,2CAA2C,CAAE;KACtGC,QAAQ,EAAE,IAAI;KACdC,UAAU,EAAE,IAAI;KAChBC,QAAQ,EAAE,IAAI;KACdC,SAAS,EAAE,IAAI;KACfC,KAAK,EAAEC,EAAE,CAACC,EAAE,CAACT,MAAM,CAACU,KAAK,CAACC,KAAK;KAC/BC,IAAI,EAAEJ,EAAE,CAACC,EAAE,CAACT,MAAM,CAACa,IAAI,CAACC,KAAK;KAC7BC,IAAI,EAAE;OACLC,KAAK,0CAAE,IAAI;MACX;KACDC,SAAS,EAAE;IAEX,CAAC;CACH;CAAC,4BAEiBlB,MAAM,EACxB;GACC,MAAM,4CAAI,cAAMmB,gBAAgB,yCAAC,IAAI,+BAAenB,MAAM,CAAC;CAC5D;;;;;;;;"}