{"version":3,"file":"blank-selector.bundle.js","sources":["../src/list-item.js","../src/blank.js","../src/index.js"],"sourcesContent":["import { Tag, Dom, Text } from 'main.core';\n\ntype NodeSettings = {\n\tevents?: { [key: string]: (event: Event) => void };\n\tchildren?: Array<HTMLElement>;\n};\n\ntype ListItemProps = {\n\ttitle: string;\n\tdescription?: string;\n\tmodifier: string;\n};\n\nclass ListItem\n{\n\tprops: ListItemProps;\n\tlayout: HTMLElement;\n\n\tconstructor(props: ListItemProps)\n\t{\n\t\tthis.props = props;\n\t}\n\n\tcreateListItem(settings: ?NodeSettings = {}): HTMLElement\n\t{\n\t\tconst {\n\t\t\tevents = {},\n\t\t\tchildren = [],\n\t\t} = settings;\n\t\tconst { title, description = '', modifier } = this.props;\n\t\tconst titleNode = Tag.render`\n\t\t\t<span\n\t\t\t\tclass=\"sign-blank-selector__list_item-title\"\n\t\t\t\ttitle=\"${Text.encode(title)}\"\n\t\t\t>\n\t\t\t\t${Text.encode(title)}\n\t\t\t</span>\n\t\t`;\n\t\tconst descriptionNode = Tag.render`\n\t\t\t<span class=\"sign-blank-selector__list_item-info\">\n\t\t\t\t${Text.encode(description).replaceAll('[br]', '<br />')}\n\t\t\t</span>\n\t\t`;\n\n\t\treturn Dom.create('div', {\n\t\t\tattrs: {\n\t\t\t\tclassName: `sign-blank-selector__list_item --${modifier}`,\n\t\t\t},\n\t\t\tevents,\n\t\t\tchildren: [...children, titleNode, descriptionNode],\n\t\t});\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\tif (!this.layout)\n\t\t{\n\t\t\tthis.layout = this.createListItem();\n\t\t}\n\n\t\treturn this.layout;\n\t}\n}\n\nexport { ListItem, ListItemProps };\n","import { Tag, Dom } from 'main.core';\nimport { Loader } from 'main.loader';\nimport { ListItem, type ListItemProps } from './list-item';\n\nexport class Blank extends ListItem\n{\n\t#statusNode: HTMLElement;\n\t#loader: Loader;\n\n\tconstructor(props: ListItemProps)\n\t{\n\t\tsuper({ ...props, modifier: 'blank' });\n\t\tthis.#statusNode = Tag.render`\n\t\t\t<div class=\"sign-blank-selector__list_item-status\"></div>\n\t\t`;\n\t\tthis.#loader = new Loader({ size: 30, target: this.#statusNode });\n\t}\n\n\tcreateListItem(): HTMLElement\n\t{\n\t\treturn super.createListItem({\n\t\t\tchildren: [this.#statusNode],\n\t\t});\n\t}\n\n\tfocus()\n\t{\n\t\tthis.getLayout().focus();\n\t}\n\n\tselect()\n\t{\n\t\tDom.addClass(this.layout, '--active');\n\t}\n\n\tdeselect(relatedTarget: ?HTMLElement)\n\t{\n\t\tDom.removeClass(this.layout, '--active');\n\t}\n\n\tremove()\n\t{\n\t\tDom.remove(this.getLayout());\n\t}\n\n\tset id(id: number)\n\t{\n\t\tthis.getLayout().dataset.id = id;\n\t}\n\n\tset ready(isReady: boolean)\n\t{\n\t\tif (!isReady)\n\t\t{\n\t\t\tthis.#loader.show();\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst layout = this.getLayout();\n\t\tlayout.tabIndex = '0';\n\t\tthis.#loader.hide();\n\t\tDom.addClass(layout, '--loaded');\n\t}\n}\n","import { Tag, Loc, Dom, Event, Type } from 'main.core';\nimport { Loader } from 'main.loader';\nimport { Popup } from 'main.popup';\nimport { EventEmitter, type BaseEvent } from 'main.core.events';\nimport { Button } from 'ui.buttons';\nimport { TileWidget } from 'ui.uploader.tile-widget';\nimport { UploaderEvent, type UploaderFile } from 'ui.uploader.core';\nimport { Api } from 'sign.v2.api';\nimport { ListItem } from './list-item';\nimport { Alert } from 'ui.alerts';\nimport { Blank } from './blank';\nimport type { BlankSelectorConfig } from './types/config';\nimport './style.css';\n\ntype RemoveOptions = {\n\tremoveFromServer: boolean;\n};\n\nconst uploaderOptions = {\n\tcontroller: 'sign.upload.blankUploadController',\n\tacceptedFileTypes: [\n\t\t'.jpg', '.jpeg',\n\t\t'.png', '.pdf',\n\t\t'.doc', '.docx',\n\t\t'.rtf', '.odt',\n\t],\n\tmultiple: true,\n\tautoUpload: false,\n\tmaxFileSize: 50 * 1024 * 1024,\n\tmaxFileCount: 100,\n\timageMaxFileSize: 10 * 1024 * 1024,\n\tmaxTotalFileSize: 50 * 1024 * 1024,\n};\n\nconst errorPopupOptions = {\n\tid: 'qwerty',\n\tpadding: 20,\n\toffsetLeft: 40,\n\toffsetTop: -12,\n\tangle: true,\n\tdarkMode: true,\n\twidth: 300,\n\tautoHide: true,\n\tcacheable: false,\n\tbindOptions: {\n\t\tposition: 'bottom'\n\t}\n};\n\nexport class BlankSelector extends EventEmitter\n{\n\tselectedBlankId: number;\n\tblanks: Map<string, ListItem>;\n\t#tileWidget: TileWidget;\n\t#tileWidgetContainer: HTMLElement;\n\t#uploadButtonsContainer: HTMLElement;\n\t#relatedTarget: ?HTMLElement;\n\t#edoSectionContainer: ?HTMLElement;\n\t#blanksContainer: HTMLElement;\n\t#notificationContainer: HTMLElement;\n\t#page: number;\n\t#loadMoreButton: HTMLElement;\n\t#api: API;\n\t#config: BlankSelectorConfig;\n\t#changeDomainWarningContainer: ?HTMLElement;\n\n\tconstructor(config: BlankSelectorConfig)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Sign.V2.BlankSelector');\n\t\tthis.subscribeFromOptions(config?.events);\n\t\tthis.#config = config;\n\t\tthis.selectedBlankId = 0;\n\t\tthis.blanks = new Map();\n\t\tthis.#page = 0;\n\t\tconst uploadButtons = this.#createUploadButtons();\n\t\tconst dragArea = Tag.render`\n\t\t\t<label class=\"sign-blank-selector__list_drag-area-label\">\n\t\t\t\t${Loc.getMessage('SIGN_BLANK_SELECTOR_DRAG_AREA')}\n\t\t\t</label>\n\t\t`;\n\t\tconst widgetOptions = {\n\t\t\tslots: {\n\t\t\t\tafterDropArea: {\n\t\t\t\t\tcomputed: {\n\t\t\t\t\t\ttitle: () => Loc.getMessage('SIGN_BLANK_SELECTOR_CLEAR_ALL'),\n\t\t\t\t\t},\n\t\t\t\t\tmethods: {\n\t\t\t\t\t\tclear: () => {\n\t\t\t\t\t\t\tthis.clearFiles({ removeFromServer: false });\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\ttemplate: `\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tclass=\"sign-blank-selector__tile-widget_clear-btn\"\n\t\t\t\t\t\t\t:title=\"title\"\n\t\t\t\t\t\t\t@click=\"clear()\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t`,\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t\tthis.#uploadButtonsContainer = Tag.render`\n\t\t\t<div class=\"sign-blank-selector__list --with-buttons\">\n\t\t\t\t${uploadButtons}\n\t\t\t\t${dragArea}\n\t\t\t</div>\n\t\t`;\n\t\tthis.#tileWidget = new TileWidget({\n\t\t\t...uploaderOptions,\n\t\t\t...config.uploaderOptions,\n\t\t\tdropElement: this.#uploadButtonsContainer,\n\t\t\tbrowseElement: [...uploadButtons, dragArea],\n\t\t\tevents: {\n\t\t\t\t[UploaderEvent.BEFORE_FILES_ADD]: (event) => this.#onFileBeforeAdd(event),\n\t\t\t\t[UploaderEvent.FILE_ADD]: (event) => this.#onFileAdd(event),\n\t\t\t\t[UploaderEvent.FILE_REMOVE]: (event) => this.#onFileRemove(event),\n\t\t\t\t[UploaderEvent.UPLOAD_START]: (event) => this.#onUploadStart(event),\n\t\t\t},\n\t\t}, widgetOptions);\n\t\tthis.#relatedTarget = null;\n\t\tEvent.bind(document, 'mousedown', (event) => {\n\t\t\tthis.#relatedTarget = event.target;\n\t\t});\n\t\tthis.#blanksContainer = Tag.render`\n\t\t\t<div\n\t\t\t\tclass=\"sign-blank-selector__list\"\n\t\t\t\tonfocusin=\"${({ target }) => {\n\t\t\t\t\tthis.selectBlank(Number(target.dataset.id));\n\t\t\t\t}}\"\n\t\t\t\tonfocusout=\"${({ target }) => {\n\t\t\t\t\tthis.resetSelectedBlank(Number(target.dataset.id), this.#relatedTarget);\n\t\t\t\t}}\"\n\t\t\t></div>\n\t\t`;\n\t\tthis.#tileWidgetContainer = Tag.render`\n\t\t\t<div class=\"sign-blank-selector__tile-widget\"></div>\n\t\t`;\n\t\tthis.#loadMoreButton = Tag.render`\n\t\t\t<button\n\t\t\t\tclass=\"ui-btn ui-btn-light-border sign-blank-selector__load-more-btn --hidden\"\n\t\t\t\tonclick=\"${() => this.#loadBlanks(this.#page + 1)}\"\n\t\t\t>\n\t\t\t\t${Loc.getMessage('SIGN_BLANK_SELECTOR_LOAD_MORE')}\n\t\t\t</button>\n\t\t`;\n\n\t\tthis.#notificationContainer = Tag.render`<div></div>`;\n\t\tif (this.#config.portalConfig.isDomainChanged)\n\t\t{\n\t\t\tthis.#appendChangeDomainWarningContainer();\n\t\t}\n\t\tif (this.#config.portalConfig.isUnsecuredScheme)\n\t\t{\n\t\t\tthis.#appendUnsecuredSchemeWarningContainer();\n\t\t}\n\t\tif (this.#config.portalConfig.isEdoRegion)\n\t\t{\n\t\t\tthis.#appendEdoWarningContainer();\n\t\t}\n\n\t\tthis.#api = new Api();\n\t}\n\n\t#checkForFilesValid(addedFiles: UploaderFile[]): boolean\n\t{\n\t\tconst isImage = (file) => file.getType().includes('image/');\n\t\tconst allAddedImages = addedFiles.every((file) => isImage(file));\n\t\tconst validExtension = addedFiles.every((file) => {\n\t\t\t// TODO merge with this.#config.uploaderOptions.acceptedFileTypes\n\t\t\treturn uploaderOptions.acceptedFileTypes.includes(\n\t\t\t\t`.${file.getExtension()}`,\n\t\t\t);\n\t\t});\n\t\tif (!validExtension || (addedFiles.length > 1 && !allAddedImages))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst uploader = this.#tileWidget.getUploader();\n\t\tconst files = uploader.getFiles();\n\t\tconst filesLength = files.length;\n\t\tconst imagesLimit = this.#getImagesLimit();\n\t\tif (filesLength === 0 && addedFiles.length === 1)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tconst allExistImages = files.every((file) => isImage(file));\n\n\t\treturn allAddedImages\n\t\t\t&& allExistImages\n\t\t\t&& imagesLimit - filesLength >= addedFiles.length;\n\t}\n\n\t#onFileBeforeAdd(event: BaseEvent)\n\t{\n\t\tconst { files: addedFiles } = event.getData();\n\t\tconst valid = this.#checkForFilesValid(addedFiles);\n\t\tif (valid)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet bindElement = this.#uploadButtonsContainer.firstElementChild;\n\t\tif (Dom.hasClass(this.#uploadButtonsContainer, '--hidden'))\n\t\t{\n\t\t\tconst {\n\t\t\t\t$refs: { container },\n\t\t\t} = this.#tileWidget.getRootComponent();\n\t\t\tbindElement = container.firstElementChild;\n\t\t}\n\n\t\tconst errorPopup = new Popup({\n\t\t\t...errorPopupOptions,\n\t\t\tbindElement,\n\t\t\tcontent: Loc.getMessage(\n\t\t\t\t'SIGN_BLANK_SELECTOR_UPLOAD_HINT',\n\t\t\t\t{ '%imageCountLimit%': this.#getImagesLimit() },\n\t\t\t),\n\t\t});\n\t\terrorPopup.show();\n\t\tevent.preventDefault();\n\t}\n\n\t#getImagesLimit(): number\n\t{\n\t\treturn Type.isInteger(parseInt(this.#config?.uploaderOptions?.maxFileCount, 10))\n\t\t\t? this.#config?.uploaderOptions?.maxFileCount\n\t\t\t: uploaderOptions.maxFileCount\n\t\t;\n\t}\n\n\t#onFileAdd()\n\t{\n\t\tthis.#toggleTileVisibility(true);\n\t\tthis.emit('addFile');\n\t}\n\n\t#onFileRemove(event: BaseEvent)\n\t{\n\t\tthis.emit('removeFile');\n\t\tconst uploader = this.#tileWidget.getUploader();\n\t\tconst files = uploader.getFiles();\n\t\tif (files.length === 0)\n\t\t{\n\t\t\tthis.#toggleTileVisibility(false);\n\t\t\tthis.emit('clearFiles');\n\t\t}\n\t}\n\n\t#onUploadStart()\n\t{\n\t\tconst uploader = this.#tileWidget.getUploader();\n\t\tconst [firstFile] = uploader.getFiles();\n\t\tconst title = firstFile.getName();\n\t\tconst fileId = firstFile.getId();\n\t\tconst uploadingBlank = new Blank({ title });\n\t\tuploadingBlank.ready = false;\n\t\tDom.prepend(uploadingBlank.getLayout(), this.#blanksContainer);\n\t\tfirstFile.setCustomData(fileId, uploadingBlank);\n\t}\n\n\t#toggleTileVisibility(shouldShow: boolean)\n\t{\n\t\tconst hiddenClass = '--hidden';\n\t\tif (shouldShow)\n\t\t{\n\t\t\tDom.removeClass(this.#tileWidgetContainer, hiddenClass);\n\t\t\tDom.addClass(this.#uploadButtonsContainer, hiddenClass);\n\n\t\t\treturn;\n\t\t}\n\n\t\tDom.addClass(this.#tileWidgetContainer, hiddenClass);\n\t\tDom.removeClass(this.#uploadButtonsContainer, hiddenClass);\n\t}\n\n\t#createUploadButtons(): Array<HTMLElement>\n\t{\n\t\tconst buttons = {\n\t\t\timg: {\n\t\t\t\ttitle: Loc.getMessage('SIGN_BLANK_SELECTOR_CREATE_NEW_PIC'),\n\t\t\t\tdescription: 'jpeg, png',\n\t\t\t},\n\t\t\tpdf: {\n\t\t\t\ttitle: Loc.getMessage('SIGN_BLANK_SELECTOR_NEW_PDF'),\n\t\t\t\tdescription: 'Adobe Acrobat',\n\t\t\t},\n\t\t\tdoc: {\n\t\t\t\ttitle: Loc.getMessage('SIGN_BLANK_SELECTOR_NEW_DOC'),\n\t\t\t\tdescription: 'doc, docx',\n\t\t\t},\n\t\t};\n\t\tconst entries = Object.entries(buttons);\n\n\t\treturn entries.map(([key, { title, description }]) => {\n\t\t\treturn new ListItem({\n\t\t\t\ttitle,\n\t\t\t\tdescription,\n\t\t\t\tmodifier: key,\n\t\t\t}).getLayout();\n\t\t});\n\t}\n\n\tasync #resumeUploading()\n\t{\n\t\tconst uploader = this.#tileWidget.getUploader();\n\t\tconst pendingFiles = uploader.getFiles();\n\t\tuploader.setMaxParallelUploads(pendingFiles.length);\n\t\tconst uploadPromise = new Promise((resolve) => {\n\t\t\tuploader.subscribeOnce('onUploadComplete', resolve);\n\t\t});\n\t\tuploader.start();\n\t\tawait uploadPromise;\n\t}\n\n\tasync createBlank(): ?Promise<number>\n\t{\n\t\tconst uploader = this.#tileWidget.getUploader();\n\t\tconst files = uploader.getFiles();\n\t\tconst [firstFile] = files;\n\t\tawait this.#resumeUploading();\n\t\tconst blank = firstFile.getCustomData(firstFile.getId());\n\t\ttry\n\t\t{\n\t\t\tconst filesIds = files.map((file) => file.getServerFileId());\n\t\t\tconst data = await this.#api.createBlank(filesIds, this.#config.type ?? null);\n\t\t\tconst blankId = data.id;\n\t\t\tthis.#setupBlank(blankId, blank);\n\n\t\t\treturn blankId;\n\t\t}\n\t\tcatch (ex)\n\t\t{\n\t\t\tblank.remove();\n\t\t\tthrow ex;\n\t\t}\n\t}\n\n\tasync #loadBlanks(page: number)\n\t{\n\t\tconst loader = new Loader({\n\t\t\ttarget: this.#blanksContainer,\n\t\t\tsize: 80,\n\t\t\tmode: 'custom',\n\t\t});\n\t\tloader.show();\n\t\ttry\n\t\t{\n\t\t\tconst data = await this.#api.loadBlanks(page, this.#config.type ?? null);\n\t\t\tconst blanksOnPage = 10;\n\t\t\tif (data.length < blanksOnPage)\n\t\t\t{\n\t\t\t\tDom.addClass(this.#loadMoreButton, '--hidden');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.removeClass(this.#loadMoreButton, '--hidden');\n\t\t\t}\n\n\t\t\tif (data.length > 0)\n\t\t\t{\n\t\t\t\tdata.forEach(({ title, id }) => {\n\t\t\t\t\tconst blank = new Blank({ title });\n\t\t\t\t\tthis.#setupBlank(id, blank);\n\t\t\t\t\tDom.append(blank.getLayout(), this.#blanksContainer);\n\t\t\t\t});\n\t\t\t\tthis.#page = page;\n\t\t\t}\n\t\t}\n\t\tcatch (ex)\n\t\t{\n\t\t\tDom.removeClass(this.#loadMoreButton, '--hidden');\n\t\t}\n\n\t\tloader.destroy();\n\t}\n\n\t#setupBlank(blankId: number, blank: Blank)\n\t{\n\t\tblank.id = blankId;\n\t\tblank.ready = true;\n\t\tthis.blanks.set(blankId, blank);\n\t}\n\n\tresetSelectedBlank(blankId: ?number, relatedTarget: ?HTMLElement)\n\t{\n\t\tconst blank = this.blanks.get(this.selectedBlankId);\n\t\tthis.selectedBlankId = 0;\n\n\t\tblank?.deselect();\n\t\tthis.emit('toggleSelection', {\n\t\t\tblankId,\n\t\t\trelatedTarget,\n\t\t\tselected: false,\n\t\t});\n\t}\n\n\tselectBlank(blankId: number)\n\t{\n\t\tif (blankId !== this.selectedBlankId)\n\t\t{\n\t\t\tthis.resetSelectedBlank();\n\t\t}\n\n\t\tthis.selectedBlankId = blankId;\n\t\tthis.#toggleTileVisibility(false);\n\t\tconst blank = this.blanks.get(blankId);\n\t\tblank.select();\n\t\tthis.emit('toggleSelection', { selected: true });\n\t}\n\n\tdeleteBlank(blankId: number)\n\t{\n\t\tconst lastBlank = this.blanks.get(blankId);\n\t\tif (lastBlank)\n\t\t{\n\t\t\tthis.blanks.delete(blankId);\n\t\t\tlastBlank.remove();\n\t\t}\n\n\t\tthis.selectedBlankId = 0;\n\t}\n\n\tclearFiles(options: RemoveOptions)\n\t{\n\t\tconst uploader = this.#tileWidget.getUploader();\n\t\tuploader.removeFiles(options);\n\t}\n\n\tisFilesReadyForUpload(): boolean\n\t{\n\t\tif (this.#tileWidget.getUploader().getFiles().length === 0)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn this.#tileWidget.getUploader().getFiles()\n\t\t\t.every((file: UploaderFile) => file.getErrors().length <= 0);\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\tthis.#tileWidget.renderTo(this.#tileWidgetContainer);\n\t\tthis.#toggleTileVisibility(false);\n\t\tconst selectorContainer = Tag.render`\n\t\t\t<div class=\"sign-blank-selector\">\n\t\t\t\t<p class=\"sign-blank-selector__add-title\">\n\t\t\t\t\t${Loc.getMessage('SIGN_BLANK_SELECTOR_ADD_TITLE')}\n\t\t\t\t</p>\n\t\t\t\t${this.#edoSectionContainer}\n\t\t\t\t${this.#tileWidgetContainer}\n\t\t\t\t${this.#notificationContainer}\n\t\t\t\t${this.#uploadButtonsContainer}\n\t\t\t\t<p class=\"sign-blank-selector__templates_title\">\n\t\t\t\t\t${Loc.getMessage('SIGN_BLANK_SELECTOR_RECENT_TEMPLATES_TITLE')}\n\t\t\t\t</p>\n\t\t\t\t${this.#blanksContainer}\n\t\t\t\t${this.#loadMoreButton}\n\t\t\t</div>\n\t\t`;\n\t\tif (this.#page === 0)\n\t\t{\n\t\t\tthis.#loadBlanks(1);\n\t\t}\n\n\t\treturn selectorContainer;\n\t}\n\n\t#appendUnsecuredSchemeWarningContainer()\n\t{\n\t\tconst text = `<div>${Loc.getMessage('SIGN_BLANK_SELECTOR_USE_UNSECURED_SCHEME_WARNING')}</div>`;\n\t\tconst warning = this.#getWarning();\n\t\twarning.setText(text);\n\n\t\tDom.append(warning.getContainer(), this.#notificationContainer);\n\t}\n\n\t#appendChangeDomainWarningContainer()\n\t{\n\t\tconst domainChangeButton = new Button({\n\t\t\ttext: Loc.getMessage('SIGN_BLANK_SELECTOR_REFRESH_DOMAIN_BUTTON_TEXT'),\n\t\t\tcolor: Button.Color.LINK,\n\t\t\tonclick: () => this.#api.changeDomain().then(() => this.#removeChangeDomainWarningContainer()),\n\t\t\tclassName: 'sign-blank-selector__change_domain_button',\n\t\t\tsize: Button.Size.EXTRA_SMALL\n\t\t});\n\t\tconst text = `<p>${Loc.getMessage('SIGN_BLANK_SELECTOR_CHANGE_DOMAIN_WARNING')}</p>`;\n\t\tconst warning = this.#getWarning();\n\t\twarning.setText(text);\n\t\tthis.#changeDomainWarningContainer = warning.getContainer();\n\t\tDom.append(domainChangeButton.getContainer(), this.#changeDomainWarningContainer);\n\n\t\tDom.append(this.#changeDomainWarningContainer, this.#notificationContainer);\n\t}\n\n\t#getWarning(): Alert\n\t{\n\t\treturn new Alert({\n\t\t\tsize: Alert.Size.MD,\n\t\t\tcolor: Alert.Color.WARNING,\n\t\t\ticon: Alert.Icon.DANGER,\n\t\t\tcustomClass: 'sign-blank-selector__change_domain_wrapper'\n\t\t});\n\t}\n\n\t#removeChangeDomainWarningContainer()\n\t{\n\t\tDom.remove(this.#changeDomainWarningContainer);\n\t}\n\n\t#appendEdoWarningContainer()\n\t{\n\t\t\tconst text = Loc.getMessage('SIGN_BLANK_SELECTOR_EDO_TEXT', {\n\t\t\t\t'[helpdesklink]': '<a class=\"sign-blank-selector__edo-block_helpdesk-article\" href=\"javascript:top.BX.Helper.show(\\'redirect=detail&code=18453372\\');\">',\n\t\t\t\t'[/helpdesklink]': '</a>'\n\t\t\t});\n\n\t\t\tconst alert = this.#getWarning();\n\t\t\talert.setColor(Alert.Color.PRIMARY);\n\t\t\talert.setIcon(Alert.Icon.INFO);\n\t\t\talert.setText(text);\n\n\t\t\tDom.append(alert.getContainer(), this.#notificationContainer);\n\t}\n}\n"],"names":["ListItem","constructor","props","createListItem","settings","events","children","title","description","modifier","titleNode","Tag","render","Text","encode","descriptionNode","replaceAll","Dom","create","attrs","className","getLayout","layout","Blank","Loader","size","target","focus","select","addClass","deselect","relatedTarget","removeClass","remove","id","dataset","ready","isReady","show","tabIndex","hide","uploaderOptions","controller","acceptedFileTypes","multiple","autoUpload","maxFileSize","maxFileCount","imageMaxFileSize","maxTotalFileSize","errorPopupOptions","padding","offsetLeft","offsetTop","angle","darkMode","width","autoHide","cacheable","bindOptions","position","BlankSelector","EventEmitter","config","setEventNamespace","subscribeFromOptions","selectedBlankId","blanks","Map","uploadButtons","dragArea","Loc","getMessage","widgetOptions","slots","afterDropArea","computed","methods","clear","clearFiles","removeFromServer","template","TileWidget","dropElement","browseElement","UploaderEvent","BEFORE_FILES_ADD","event","FILE_ADD","FILE_REMOVE","UPLOAD_START","Event","bind","document","selectBlank","Number","resetSelectedBlank","portalConfig","isDomainChanged","isUnsecuredScheme","isEdoRegion","Api","createBlank","uploader","getUploader","files","getFiles","firstFile","blank","getCustomData","getId","filesIds","map","file","getServerFileId","data","type","blankId","ex","get","emit","selected","deleteBlank","lastBlank","delete","options","removeFiles","isFilesReadyForUpload","length","every","getErrors","renderTo","selectorContainer","addedFiles","isImage","getType","includes","allAddedImages","validExtension","getExtension","filesLength","imagesLimit","allExistImages","getData","valid","bindElement","firstElementChild","hasClass","$refs","container","getRootComponent","errorPopup","Popup","content","preventDefault","Type","isInteger","parseInt","getName","fileId","uploadingBlank","prepend","setCustomData","shouldShow","hiddenClass","buttons","img","pdf","doc","entries","Object","key","pendingFiles","setMaxParallelUploads","uploadPromise","Promise","resolve","subscribeOnce","start","page","loader","mode","loadBlanks","blanksOnPage","forEach","append","destroy","set","text","warning","setText","getContainer","domainChangeButton","Button","color","Color","LINK","onclick","changeDomain","then","Size","EXTRA_SMALL","Alert","MD","WARNING","icon","Icon","DANGER","customClass","alert","setColor","PRIMARY","setIcon","INFO"],"mappings":";;;;;;;;AAAA,CAaA,MAAMA,QAAQ,CACd;GAICC,WAAW,CAACC,KAAoB,EAChC;KACC,IAAI,CAACA,KAAK,GAAGA,KAAK;;GAGnBC,cAAc,CAACC,QAAuB,GAAG,EAAE,EAC3C;KACC,MAAM;OACLC,MAAM,GAAG,EAAE;OACXC,QAAQ,GAAG;MACX,GAAGF,QAAQ;KACZ,MAAM;OAAEG,KAAK;OAAEC,WAAW,GAAG,EAAE;OAAEC;MAAU,GAAG,IAAI,CAACP,KAAK;KACxD,MAAMQ,SAAS,GAAGC,aAAG,CAACC,MAAM,cAAC;;;aAGpB,CAAqB;;MAE5B,CAAqB;;GAEvB,GAJWC,cAAI,CAACC,MAAM,CAACP,KAAK,CAAC,EAEzBM,cAAI,CAACC,MAAM,CAACP,KAAK,CAAC,CAErB;KACD,MAAMQ,eAAe,GAAGJ,aAAG,CAACC,MAAM,gBAAC;;MAEjC,CAAwD;;GAE1D,GAFIC,cAAI,CAACC,MAAM,CAACN,WAAW,CAAC,CAACQ,UAAU,CAAC,MAAM,EAAE,QAAQ,CAAC,CAExD;KAED,OAAOC,aAAG,CAACC,MAAM,CAAC,KAAK,EAAE;OACxBC,KAAK,EAAE;SACNC,SAAS,EAAG,oCAAmCX,QAAS;QACxD;OACDJ,MAAM;OACNC,QAAQ,EAAE,CAAC,GAAGA,QAAQ,EAAEI,SAAS,EAAEK,eAAe;MAClD,CAAC;;GAGHM,SAAS,GACT;KACC,IAAI,CAAC,IAAI,CAACC,MAAM,EAChB;OACC,IAAI,CAACA,MAAM,GAAG,IAAI,CAACnB,cAAc,EAAE;;KAGpC,OAAO,IAAI,CAACmB,MAAM;;CAEpB;;;;AC9DA,CAE2D;CAAA;AAE3D,CAAO,MAAMC,KAAK,SAASvB,QAAQ,CACnC;GAICC,WAAW,CAACC,KAAoB,EAChC;KACC,KAAK,CAAC;OAAE,GAAGA,KAAK;OAAEO,QAAQ,EAAE;MAAS,CAAC;KAAC;OAAA;OAAA;;KAAA;OAAA;OAAA;;KACvC,4CAAI,8BAAeE,aAAG,CAACC,MAAM,oBAAC;;GAE9B,EAAC;KACD,4CAAI,sBAAW,IAAIY,kBAAM,CAAC;OAAEC,IAAI,EAAE,EAAE;OAAEC,MAAM,0CAAE,IAAI;MAAc,CAAC;;GAGlEvB,cAAc,GACd;KACC,OAAO,KAAK,CAACA,cAAc,CAAC;OAC3BG,QAAQ,EAAE,yCAAC,IAAI;MACf,CAAC;;GAGHqB,KAAK,GACL;KACC,IAAI,CAACN,SAAS,EAAE,CAACM,KAAK,EAAE;;GAGzBC,MAAM,GACN;KACCX,aAAG,CAACY,QAAQ,CAAC,IAAI,CAACP,MAAM,EAAE,UAAU,CAAC;;GAGtCQ,QAAQ,CAACC,aAA2B,EACpC;KACCd,aAAG,CAACe,WAAW,CAAC,IAAI,CAACV,MAAM,EAAE,UAAU,CAAC;;GAGzCW,MAAM,GACN;KACChB,aAAG,CAACgB,MAAM,CAAC,IAAI,CAACZ,SAAS,EAAE,CAAC;;GAG7B,IAAIa,EAAE,CAACA,EAAU,EACjB;KACC,IAAI,CAACb,SAAS,EAAE,CAACc,OAAO,CAACD,EAAE,GAAGA,EAAE;;GAGjC,IAAIE,KAAK,CAACC,OAAgB,EAC1B;KACC,IAAI,CAACA,OAAO,EACZ;OACC,4CAAI,oBAASC,IAAI,EAAE;OAEnB;;KAGD,MAAMhB,MAAM,GAAG,IAAI,CAACD,SAAS,EAAE;KAC/BC,MAAM,CAACiB,QAAQ,GAAG,GAAG;KACrB,4CAAI,oBAASC,IAAI,EAAE;KACnBvB,aAAG,CAACY,QAAQ,CAACP,MAAM,EAAE,UAAU,CAAC;;CAElC;;;;;;;;;;AChEA,CAkBA,MAAMmB,eAAe,GAAG;GACvBC,UAAU,EAAE,mCAAmC;GAC/CC,iBAAiB,EAAE,CAClB,MAAM,EAAE,OAAO,EACf,MAAM,EAAE,MAAM,EACd,MAAM,EAAE,OAAO,EACf,MAAM,EAAE,MAAM,CACd;GACDC,QAAQ,EAAE,IAAI;GACdC,UAAU,EAAE,KAAK;GACjBC,WAAW,EAAE,EAAE,GAAG,IAAI,GAAG,IAAI;GAC7BC,YAAY,EAAE,GAAG;GACjBC,gBAAgB,EAAE,EAAE,GAAG,IAAI,GAAG,IAAI;GAClCC,gBAAgB,EAAE,EAAE,GAAG,IAAI,GAAG;CAC/B,CAAC;CAED,MAAMC,iBAAiB,GAAG;GACzBhB,EAAE,EAAE,QAAQ;GACZiB,OAAO,EAAE,EAAE;GACXC,UAAU,EAAE,EAAE;GACdC,SAAS,EAAE,CAAC,EAAE;GACdC,KAAK,EAAE,IAAI;GACXC,QAAQ,EAAE,IAAI;GACdC,KAAK,EAAE,GAAG;GACVC,QAAQ,EAAE,IAAI;GACdC,SAAS,EAAE,KAAK;GAChBC,WAAW,EAAE;KACZC,QAAQ,EAAE;;CAEZ,CAAC;CAAC;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;AAEF,CAAO,MAAMC,aAAa,SAASC,6BAAY,CAC/C;GAgBC7D,WAAW,CAAC8D,MAA2B,EACvC;KACC,KAAK,EAAE;KAAC;OAAA;;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KACR,IAAI,CAACC,iBAAiB,CAAC,0BAA0B,CAAC;KAClD,IAAI,CAACC,oBAAoB,CAACF,MAAM,oBAANA,MAAM,CAAE1D,MAAM,CAAC;KACzC,4CAAI,sBAAW0D,MAAM;KACrB,IAAI,CAACG,eAAe,GAAG,CAAC;KACxB,IAAI,CAACC,MAAM,GAAG,IAAIC,GAAG,EAAE;KACvB,4CAAI,kBAAS,CAAC;KACd,MAAMC,aAAa,2CAAG,IAAI,+CAAuB;KACjD,MAAMC,QAAQ,GAAG3D,aAAG,CAACC,MAAM,oBAAC;;MAE1B,CAAkD;;GAEpD,GAFI2D,aAAG,CAACC,UAAU,CAAC,+BAA+B,CAAC,CAElD;KACD,MAAMC,aAAa,GAAG;OACrBC,KAAK,EAAE;SACNC,aAAa,EAAE;WACdC,QAAQ,EAAE;aACTrE,KAAK,EAAE,MAAMgE,aAAG,CAACC,UAAU,CAAC,+BAA+B;YAC3D;WACDK,OAAO,EAAE;aACRC,KAAK,EAAE,MAAM;eACZ,IAAI,CAACC,UAAU,CAAC;iBAAEC,gBAAgB,EAAE;gBAAO,CAAC;;YAE7C;WACDC,QAAQ,EAAG;;;;;;;;;;MAUb;KACD,4CAAI,sDAA2BtE,aAAG,CAACC,MAAM,sBAAC;;MAExC,CAAgB;MAChB,CAAW;;GAEb,GAHIyD,aAAa,EACbC,QAAQ,CAEX;KACD,4CAAI,8BAAe,IAAIY,iCAAU,CAAC;OACjC,GAAGzC,eAAe;OAClB,GAAGsB,MAAM,CAACtB,eAAe;OACzB0C,WAAW,0CAAE,IAAI,mDAAwB;OACzCC,aAAa,EAAE,CAAC,GAAGf,aAAa,EAAEC,QAAQ,CAAC;OAC3CjE,MAAM,EAAE;SACP,CAACgF,8BAAa,CAACC,gBAAgB,GAAIC,KAAK,4CAAK,IAAI,sCAAkBA,KAAK,CAAC;SACzE,CAACF,8BAAa,CAACG,QAAQ,GAAID,KAAK,4CAAK,IAAI,0BAAYA,KAAK,CAAC;SAC3D,CAACF,8BAAa,CAACI,WAAW,GAAIF,KAAK,4CAAK,IAAI,gCAAeA,KAAK,CAAC;SACjE,CAACF,8BAAa,CAACK,YAAY,GAAIH,KAAK,4CAAK,IAAI,kCAAgBA,KAAK;;MAEnE,EAAEd,aAAa,CAAC;KACjB,4CAAI,oCAAkB,IAAI;KAC1BkB,eAAK,CAACC,IAAI,CAACC,QAAQ,EAAE,WAAW,EAAGN,KAAK,IAAK;OAC5C,4CAAI,oCAAkBA,KAAK,CAAC7D,MAAM;MAClC,CAAC;KACF,4CAAI,wCAAoBf,aAAG,CAACC,MAAM,kBAAC;;;iBAGtB,CAET;kBACU,CAEV;;GAEJ,GAPe,CAAC;OAAEc;MAAQ,KAAK;OAC5B,IAAI,CAACoE,WAAW,CAACC,MAAM,CAACrE,MAAM,CAACS,OAAO,CAACD,EAAE,CAAC,CAAC;MAC3C,EACa,CAAC;OAAER;MAAQ,KAAK;OAC7B,IAAI,CAACsE,kBAAkB,CAACD,MAAM,CAACrE,MAAM,CAACS,OAAO,CAACD,EAAE,CAAC,0CAAE,IAAI,kCAAgB;MACvE,CAEF;KACD,4CAAI,gDAAwBvB,aAAG,CAACC,MAAM,kBAAC;;GAEvC,EAAC;KACD,4CAAI,sCAAmBD,aAAG,CAACC,MAAM,kBAAC;;;eAGvB,CAAyC;;MAElD,CAAkD;;GAEpD,GAJa,8CAAM,IAAI,4BAAa,4CAAI,kBAAS,CAAC,CAAC,EAE/C2D,aAAG,CAACC,UAAU,CAAC,+BAA+B,CAAC,CAElD;KAED,4CAAI,oDAA0B7D,aAAG,CAACC,MAAM,kBAAC,aAAW,EAAC;KACrD,IAAI,4CAAI,oBAASqF,YAAY,CAACC,eAAe,EAC7C;OACC,4CAAI;;KAEL,IAAI,4CAAI,oBAASD,YAAY,CAACE,iBAAiB,EAC/C;OACC,4CAAI;;KAEL,IAAI,4CAAI,oBAASF,YAAY,CAACG,WAAW,EACzC;OACC,4CAAI;;KAGL,4CAAI,gBAAQ,IAAIC,eAAG,EAAE;;GA4JtB,MAAMC,WAAW,GACjB;KACC,MAAMC,QAAQ,GAAG,4CAAI,4BAAaC,WAAW,EAAE;KAC/C,MAAMC,KAAK,GAAGF,QAAQ,CAACG,QAAQ,EAAE;KACjC,MAAM,CAACC,SAAS,CAAC,GAAGF,KAAK;KACzB,8CAAM,IAAI,uCAAmB;KAC7B,MAAMG,KAAK,GAAGD,SAAS,CAACE,aAAa,CAACF,SAAS,CAACG,KAAK,EAAE,CAAC;KACxD,IACA;OAAA;OACC,MAAMC,QAAQ,GAAGN,KAAK,CAACO,GAAG,CAAEC,IAAI,IAAKA,IAAI,CAACC,eAAe,EAAE,CAAC;OAC5D,MAAMC,IAAI,GAAG,MAAM,4CAAI,cAAMb,WAAW,CAACS,QAAQ,2BAAE,4CAAI,oBAASK,IAAI,oCAAI,IAAI,CAAC;OAC7E,MAAMC,OAAO,GAAGF,IAAI,CAACjF,EAAE;OACvB,4CAAI,4BAAamF,OAAO,EAAET,KAAK;OAE/B,OAAOS,OAAO;MACd,CACD,OAAOC,EAAE,EACT;OACCV,KAAK,CAAC3E,MAAM,EAAE;OACd,MAAMqF,EAAE;;;GAkDVtB,kBAAkB,CAACqB,OAAgB,EAAEtF,aAA2B,EAChE;KACC,MAAM6E,KAAK,GAAG,IAAI,CAACzC,MAAM,CAACoD,GAAG,CAAC,IAAI,CAACrD,eAAe,CAAC;KACnD,IAAI,CAACA,eAAe,GAAG,CAAC;KAExB0C,KAAK,oBAALA,KAAK,CAAE9E,QAAQ,EAAE;KACjB,IAAI,CAAC0F,IAAI,CAAC,iBAAiB,EAAE;OAC5BH,OAAO;OACPtF,aAAa;OACb0F,QAAQ,EAAE;MACV,CAAC;;GAGH3B,WAAW,CAACuB,OAAe,EAC3B;KACC,IAAIA,OAAO,KAAK,IAAI,CAACnD,eAAe,EACpC;OACC,IAAI,CAAC8B,kBAAkB,EAAE;;KAG1B,IAAI,CAAC9B,eAAe,GAAGmD,OAAO;KAC9B,4CAAI,gDAAuB,KAAK;KAChC,MAAMT,KAAK,GAAG,IAAI,CAACzC,MAAM,CAACoD,GAAG,CAACF,OAAO,CAAC;KACtCT,KAAK,CAAChF,MAAM,EAAE;KACd,IAAI,CAAC4F,IAAI,CAAC,iBAAiB,EAAE;OAAEC,QAAQ,EAAE;MAAM,CAAC;;GAGjDC,WAAW,CAACL,OAAe,EAC3B;KACC,MAAMM,SAAS,GAAG,IAAI,CAACxD,MAAM,CAACoD,GAAG,CAACF,OAAO,CAAC;KAC1C,IAAIM,SAAS,EACb;OACC,IAAI,CAACxD,MAAM,CAACyD,MAAM,CAACP,OAAO,CAAC;OAC3BM,SAAS,CAAC1F,MAAM,EAAE;;KAGnB,IAAI,CAACiC,eAAe,GAAG,CAAC;;GAGzBa,UAAU,CAAC8C,OAAsB,EACjC;KACC,MAAMtB,QAAQ,GAAG,4CAAI,4BAAaC,WAAW,EAAE;KAC/CD,QAAQ,CAACuB,WAAW,CAACD,OAAO,CAAC;;GAG9BE,qBAAqB,GACrB;KACC,IAAI,4CAAI,4BAAavB,WAAW,EAAE,CAACE,QAAQ,EAAE,CAACsB,MAAM,KAAK,CAAC,EAC1D;OACC,OAAO,KAAK;;KAGb,OAAO,4CAAI,4BAAaxB,WAAW,EAAE,CAACE,QAAQ,EAAE,CAC9CuB,KAAK,CAAEhB,IAAkB,IAAKA,IAAI,CAACiB,SAAS,EAAE,CAACF,MAAM,IAAI,CAAC,CAAC;;GAG9D3G,SAAS,GACT;KACC,4CAAI,4BAAa8G,QAAQ,yCAAC,IAAI,8CAAsB;KACpD,4CAAI,gDAAuB,KAAK;KAChC,MAAMC,iBAAiB,GAAGzH,aAAG,CAACC,MAAM,kBAAC;;;OAGlC,CAAkD;;MAEnD,CAA4B;MAC5B,CAA4B;MAC5B,CAA8B;MAC9B,CAA+B;;OAE9B,CAA+D;;MAEhE,CAAwB;MACxB,CAAuB;;GAEzB,GAZK2D,aAAG,CAACC,UAAU,CAAC,+BAA+B,CAAC,0CAEhD,IAAI,uFACJ,IAAI,uFACJ,IAAI,2FACJ,IAAI,qDAEHD,aAAG,CAACC,UAAU,CAAC,4CAA4C,CAAC,0CAE7D,IAAI,+EACJ,IAAI,oCAEP;KACD,IAAI,4CAAI,oBAAW,CAAC,EACpB;OACC,4CAAI,4BAAa,CAAC;;KAGnB,OAAO4D,iBAAiB;;CA2D1B;CAAC,8BA1WoBC,UAA0B,EAC9C;GACC,MAAMC,OAAO,GAAIrB,IAAI,IAAKA,IAAI,CAACsB,OAAO,EAAE,CAACC,QAAQ,CAAC,QAAQ,CAAC;GAC3D,MAAMC,cAAc,GAAGJ,UAAU,CAACJ,KAAK,CAAEhB,IAAI,IAAKqB,OAAO,CAACrB,IAAI,CAAC,CAAC;GAChE,MAAMyB,cAAc,GAAGL,UAAU,CAACJ,KAAK,CAAEhB,IAAI,IAAK;;KAEjD,OAAOxE,eAAe,CAACE,iBAAiB,CAAC6F,QAAQ,CAC/C,IAAGvB,IAAI,CAAC0B,YAAY,EAAG,EAAC,CACzB;IACD,CAAC;GACF,IAAI,CAACD,cAAc,IAAKL,UAAU,CAACL,MAAM,GAAG,CAAC,IAAI,CAACS,cAAe,EACjE;KACC,OAAO,KAAK;;GAGb,MAAMlC,QAAQ,GAAG,4CAAI,4BAAaC,WAAW,EAAE;GAC/C,MAAMC,KAAK,GAAGF,QAAQ,CAACG,QAAQ,EAAE;GACjC,MAAMkC,WAAW,GAAGnC,KAAK,CAACuB,MAAM;GAChC,MAAMa,WAAW,2CAAG,IAAI,qCAAkB;GAC1C,IAAID,WAAW,KAAK,CAAC,IAAIP,UAAU,CAACL,MAAM,KAAK,CAAC,EAChD;KACC,OAAO,IAAI;;GAGZ,MAAMc,cAAc,GAAGrC,KAAK,CAACwB,KAAK,CAAEhB,IAAI,IAAKqB,OAAO,CAACrB,IAAI,CAAC,CAAC;GAE3D,OAAOwB,cAAc,IACjBK,cAAc,IACdD,WAAW,GAAGD,WAAW,IAAIP,UAAU,CAACL,MAAM;CACnD;CAAC,2BAEgBzC,KAAgB,EACjC;GACC,MAAM;KAAEkB,KAAK,EAAE4B;IAAY,GAAG9C,KAAK,CAACwD,OAAO,EAAE;GAC7C,MAAMC,KAAK,2CAAG,IAAI,4CAAqBX,UAAU,CAAC;GAClD,IAAIW,KAAK,EACT;KACC;;GAGD,IAAIC,WAAW,GAAG,4CAAI,oDAAyBC,iBAAiB;GAChE,IAAIjI,aAAG,CAACkI,QAAQ,yCAAC,IAAI,qDAA0B,UAAU,CAAC,EAC1D;KACC,MAAM;OACLC,KAAK,EAAE;SAAEC;;MACT,GAAG,4CAAI,4BAAaC,gBAAgB,EAAE;KACvCL,WAAW,GAAGI,SAAS,CAACH,iBAAiB;;GAG1C,MAAMK,UAAU,GAAG,IAAIC,gBAAK,CAAC;KAC5B,GAAGtG,iBAAiB;KACpB+F,WAAW;KACXQ,OAAO,EAAElF,aAAG,CAACC,UAAU,CACtB,iCAAiC,EACjC;OAAE,mBAAmB,0CAAE,IAAI;MAAoB;IAEhD,CAAC;GACF+E,UAAU,CAACjH,IAAI,EAAE;GACjBiD,KAAK,CAACmE,cAAc,EAAE;CACvB;CAAC,4BAGD;GAAA;GACC,OAAOC,cAAI,CAACC,SAAS,CAACC,QAAQ,mEAAC,IAAI,kEAAJ,uBAAcpH,eAAe,qBAA7B,uBAA+BM,YAAY,EAAE,EAAE,CAAC,CAAC,qEAC7E,IAAI,kEAAJ,uBAAcN,eAAe,qBAA7B,uBAA+BM,YAAY,GAC3CN,eAAe,CAACM,YAAY;CAEhC;CAAC,uBAGD;GACC,4CAAI,gDAAuB,IAAI;GAC/B,IAAI,CAACyE,IAAI,CAAC,SAAS,CAAC;CACrB;CAAC,wBAEajC,KAAgB,EAC9B;GACC,IAAI,CAACiC,IAAI,CAAC,YAAY,CAAC;GACvB,MAAMjB,QAAQ,GAAG,4CAAI,4BAAaC,WAAW,EAAE;GAC/C,MAAMC,KAAK,GAAGF,QAAQ,CAACG,QAAQ,EAAE;GACjC,IAAID,KAAK,CAACuB,MAAM,KAAK,CAAC,EACtB;KACC,4CAAI,gDAAuB,KAAK;KAChC,IAAI,CAACR,IAAI,CAAC,YAAY,CAAC;;CAEzB;CAAC,2BAGD;GACC,MAAMjB,QAAQ,GAAG,4CAAI,4BAAaC,WAAW,EAAE;GAC/C,MAAM,CAACG,SAAS,CAAC,GAAGJ,QAAQ,CAACG,QAAQ,EAAE;GACvC,MAAMnG,KAAK,GAAGoG,SAAS,CAACmD,OAAO,EAAE;GACjC,MAAMC,MAAM,GAAGpD,SAAS,CAACG,KAAK,EAAE;GAChC,MAAMkD,cAAc,GAAG,IAAIzI,KAAK,CAAC;KAAEhB;IAAO,CAAC;GAC3CyJ,cAAc,CAAC5H,KAAK,GAAG,KAAK;GAC5BnB,aAAG,CAACgJ,OAAO,CAACD,cAAc,CAAC3I,SAAS,EAAE,0CAAE,IAAI,sCAAkB;GAC9DsF,SAAS,CAACuD,aAAa,CAACH,MAAM,EAAEC,cAAc,CAAC;CAChD;CAAC,gCAEqBG,UAAmB,EACzC;GACC,MAAMC,WAAW,GAAG,UAAU;GAC9B,IAAID,UAAU,EACd;KACClJ,aAAG,CAACe,WAAW,yCAAC,IAAI,+CAAuBoI,WAAW,CAAC;KACvDnJ,aAAG,CAACY,QAAQ,yCAAC,IAAI,qDAA0BuI,WAAW,CAAC;KAEvD;;GAGDnJ,aAAG,CAACY,QAAQ,yCAAC,IAAI,+CAAuBuI,WAAW,CAAC;GACpDnJ,aAAG,CAACe,WAAW,yCAAC,IAAI,qDAA0BoI,WAAW,CAAC;CAC3D;CAAC,iCAGD;GACC,MAAMC,OAAO,GAAG;KACfC,GAAG,EAAE;OACJ/J,KAAK,EAAEgE,aAAG,CAACC,UAAU,CAAC,oCAAoC,CAAC;OAC3DhE,WAAW,EAAE;MACb;KACD+J,GAAG,EAAE;OACJhK,KAAK,EAAEgE,aAAG,CAACC,UAAU,CAAC,6BAA6B,CAAC;OACpDhE,WAAW,EAAE;MACb;KACDgK,GAAG,EAAE;OACJjK,KAAK,EAAEgE,aAAG,CAACC,UAAU,CAAC,6BAA6B,CAAC;OACpDhE,WAAW,EAAE;;IAEd;GACD,MAAMiK,OAAO,GAAGC,MAAM,CAACD,OAAO,CAACJ,OAAO,CAAC;GAEvC,OAAOI,OAAO,CAACzD,GAAG,CAAC,CAAC,CAAC2D,GAAG,EAAE;KAAEpK,KAAK;KAAEC;IAAa,CAAC,KAAK;KACrD,OAAO,IAAIR,QAAQ,CAAC;OACnBO,KAAK;OACLC,WAAW;OACXC,QAAQ,EAAEkK;MACV,CAAC,CAACtJ,SAAS,EAAE;IACd,CAAC;CACH;CAAC,mCAGD;GACC,MAAMkF,QAAQ,GAAG,4CAAI,4BAAaC,WAAW,EAAE;GAC/C,MAAMoE,YAAY,GAAGrE,QAAQ,CAACG,QAAQ,EAAE;GACxCH,QAAQ,CAACsE,qBAAqB,CAACD,YAAY,CAAC5C,MAAM,CAAC;GACnD,MAAM8C,aAAa,GAAG,IAAIC,OAAO,CAAEC,OAAO,IAAK;KAC9CzE,QAAQ,CAAC0E,aAAa,CAAC,kBAAkB,EAAED,OAAO,CAAC;IACnD,CAAC;GACFzE,QAAQ,CAAC2E,KAAK,EAAE;GAChB,MAAMJ,aAAa;CACpB;CAAC,4BAyBiBK,IAAY,EAC9B;GACC,MAAMC,MAAM,GAAG,IAAI5J,kBAAM,CAAC;KACzBE,MAAM,0CAAE,IAAI,qCAAiB;KAC7BD,IAAI,EAAE,EAAE;KACR4J,IAAI,EAAE;IACN,CAAC;GACFD,MAAM,CAAC9I,IAAI,EAAE;GACb,IACA;KAAA;KACC,MAAM6E,IAAI,GAAG,MAAM,4CAAI,cAAMmE,UAAU,CAACH,IAAI,4BAAE,4CAAI,oBAAS/D,IAAI,qCAAI,IAAI,CAAC;KACxE,MAAMmE,YAAY,GAAG,EAAE;KACvB,IAAIpE,IAAI,CAACa,MAAM,GAAGuD,YAAY,EAC9B;OACCtK,aAAG,CAACY,QAAQ,yCAAC,IAAI,qCAAkB,UAAU,CAAC;MAC9C,MAED;OACCZ,aAAG,CAACe,WAAW,yCAAC,IAAI,qCAAkB,UAAU,CAAC;;KAGlD,IAAImF,IAAI,CAACa,MAAM,GAAG,CAAC,EACnB;OACCb,IAAI,CAACqE,OAAO,CAAC,CAAC;SAAEjL,KAAK;SAAE2B;QAAI,KAAK;SAC/B,MAAM0E,KAAK,GAAG,IAAIrF,KAAK,CAAC;WAAEhB;UAAO,CAAC;SAClC,4CAAI,4BAAa2B,EAAE,EAAE0E,KAAK;SAC1B3F,aAAG,CAACwK,MAAM,CAAC7E,KAAK,CAACvF,SAAS,EAAE,0CAAE,IAAI,sCAAkB;QACpD,CAAC;OACF,4CAAI,kBAAS8J,IAAI;;IAElB,CACD,OAAO7D,EAAE,EACT;KACCrG,aAAG,CAACe,WAAW,yCAAC,IAAI,qCAAkB,UAAU,CAAC;;GAGlDoJ,MAAM,CAACM,OAAO,EAAE;CACjB;CAAC,sBAEWrE,OAAe,EAAET,KAAY,EACzC;GACCA,KAAK,CAAC1E,EAAE,GAAGmF,OAAO;GAClBT,KAAK,CAACxE,KAAK,GAAG,IAAI;GAClB,IAAI,CAAC+B,MAAM,CAACwH,GAAG,CAACtE,OAAO,EAAET,KAAK,CAAC;CAChC;CAAC,mDAuFD;GACC,MAAMgF,IAAI,GAAI,QAAOrH,aAAG,CAACC,UAAU,CAAC,kDAAkD,CAAE,QAAO;GAC/F,MAAMqH,OAAO,2CAAG,IAAI,6BAAc;GAClCA,OAAO,CAACC,OAAO,CAACF,IAAI,CAAC;GAErB3K,aAAG,CAACwK,MAAM,CAACI,OAAO,CAACE,YAAY,EAAE,0CAAE,IAAI,kDAAwB;CAChE;CAAC,gDAGD;GACC,MAAMC,kBAAkB,GAAG,IAAIC,iBAAM,CAAC;KACrCL,IAAI,EAAErH,aAAG,CAACC,UAAU,CAAC,gDAAgD,CAAC;KACtE0H,KAAK,EAAED,iBAAM,CAACE,KAAK,CAACC,IAAI;KACxBC,OAAO,EAAE,MAAM,4CAAI,cAAMC,YAAY,EAAE,CAACC,IAAI,CAAC,8CAAM,IAAI,6EAAsC,CAAC;KAC9FnL,SAAS,EAAE,2CAA2C;KACtDK,IAAI,EAAEwK,iBAAM,CAACO,IAAI,CAACC;IAClB,CAAC;GACF,MAAMb,IAAI,GAAI,MAAKrH,aAAG,CAACC,UAAU,CAAC,2CAA2C,CAAE,MAAK;GACpF,MAAMqH,OAAO,2CAAG,IAAI,6BAAc;GAClCA,OAAO,CAACC,OAAO,CAACF,IAAI,CAAC;GACrB,4CAAI,kEAAiCC,OAAO,CAACE,YAAY,EAAE;GAC3D9K,aAAG,CAACwK,MAAM,CAACO,kBAAkB,CAACD,YAAY,EAAE,0CAAE,IAAI,gEAA+B;GAEjF9K,aAAG,CAACwK,MAAM,yCAAC,IAAI,yGAAgC,IAAI,kDAAwB;CAC5E;CAAC,wBAGD;GACC,OAAO,IAAIiB,eAAK,CAAC;KAChBjL,IAAI,EAAEiL,eAAK,CAACF,IAAI,CAACG,EAAE;KACnBT,KAAK,EAAEQ,eAAK,CAACP,KAAK,CAACS,OAAO;KAC1BC,IAAI,EAAEH,eAAK,CAACI,IAAI,CAACC,MAAM;KACvBC,WAAW,EAAE;IACb,CAAC;CACH;CAAC,gDAGD;GACC/L,aAAG,CAACgB,MAAM,yCAAC,IAAI,gEAA+B;CAC/C;CAAC,uCAGD;GACE,MAAM2J,IAAI,GAAGrH,aAAG,CAACC,UAAU,CAAC,8BAA8B,EAAE;KAC3D,gBAAgB,EAAE,sIAAsI;KACxJ,iBAAiB,EAAE;IACnB,CAAC;GAEF,MAAMyI,KAAK,2CAAG,IAAI,6BAAc;GAChCA,KAAK,CAACC,QAAQ,CAACR,eAAK,CAACP,KAAK,CAACgB,OAAO,CAAC;GACnCF,KAAK,CAACG,OAAO,CAACV,eAAK,CAACI,IAAI,CAACO,IAAI,CAAC;GAC9BJ,KAAK,CAACnB,OAAO,CAACF,IAAI,CAAC;GAEnB3K,aAAG,CAACwK,MAAM,CAACwB,KAAK,CAAClB,YAAY,EAAE,0CAAE,IAAI,kDAAwB;CAC/D;;;;;;;;"}