{"version":3,"file":"wizard.bundle.js","sources":["../src/index.js"],"sourcesContent":["import { Tag, Loc, Dom, Reflection, Type } from 'main.core';\nimport { DocumentSetup } from 'sign.v2.document-setup';\nimport { Requisites } from 'sign.v2.requisites';\nimport { DocumentSummary } from 'sign.v2.document-summary';\nimport { Preview } from 'sign.v2.preview';\nimport { Api } from 'sign.v2.api';\nimport './style.css';\n\ntype StepsMetadata = {\n\tsetup: {\n\t\tstep: DocumentSetup;\n\t\ttitle: string;\n\t\tbeforeCompletion: () => Promise<boolean>;\n\t},\n\trequisites: {\n\t\tstep: Requisites;\n\t\ttitle: string;\n\t\tbeforeCompletion: () => Promise<boolean>;\n\t},\n\tsend: {\n\t\tstep: DocumentSummary;\n\t\ttitle: string;\n\t}\n};\ntype WizardOptions = {\n\tuid: ?string;\n\tcontainerId: string;\n};\n\nexport class Wizard\n{\n\t#documentSetup: DocumentSetup;\n\t#uid: ?string;\n\t#containerId: string;\n\t#requisites: Requisites;\n\t#documentSummary: DocumentSummary;\n\t#preview: Preview;\n\t#editor: Editor;\n\t#api: Api;\n\t#stepNode: HTMLElement;\n\t#stepsMetadata: StepsMetadata;\n\t#stepIndex: number;\n\t#order: Array<string>;\n\t#stages: Map<string, HTMLElement>;\n\t#navigationButtons: Array<HTMLElement>;\n\n\tconstructor(options: WizardOptions)\n\t{\n\t\tconst { uid = null, containerId, config = {} } = options;\n\n\t\tthis.#uid = uid;\n\t\tthis.#containerId = containerId;\n\t\tthis.#documentSetup = new DocumentSetup(config.blankSelectorConfig);\n\t\tthis.#requisites = new Requisites();\n\t\tthis.#documentSummary = new DocumentSummary(config.documentSummaryConfig);\n\t\tthis.#preview = new Preview();\n\t\tthis.#api = new Api();\n\t\tthis.#stepsMetadata = {\n\t\t\tsetup: {\n\t\t\t\tstep: this.#documentSetup,\n\t\t\t\ttitle: Loc.getMessage('SIGN_WIZARD_LOAD_DOCUMENT'),\n\t\t\t\tbeforeCompletion: async () => {\n\t\t\t\t\tconst [, nextButton] = this.#navigationButtons;\n\t\t\t\t\tconst renderPages = (urls = [], blocks = []) => {\n\t\t\t\t\t\tthis.#editor.urls = urls;\n\t\t\t\t\t\tthis.#preview.urls = urls;\n\t\t\t\t\t\tthis.#preview.setBlocks(blocks);\n\t\t\t\t\t};\n\t\t\t\t\trenderPages();\n\t\t\t\t\tDom.addClass(nextButton, 'ui-btn-wait');\n\t\t\t\t\tawait this.#documentSetup.setup();\n\t\t\t\t\tDom.removeClass(nextButton, 'ui-btn-wait');\n\t\t\t\t\tconst setupData = this.#documentSetup.setupData;\n\t\t\t\t\tif (!setupData)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst { uid, entityId, blocks, initiator } = setupData;\n\t\t\t\t\tthis.#requisites.documentData = { uid, entityId, initiator };\n\t\t\t\t\tthis.#preview.ready = false;\n\t\t\t\t\tthis.#documentSetup.waitForPagesList((urls) => {\n\t\t\t\t\t\trenderPages(urls, blocks);\n\t\t\t\t\t\tthis.#preview.ready = true;\n\t\t\t\t\t});\n\n\t\t\t\t\treturn true;\n\t\t\t\t},\n\t\t\t},\n\t\t\trequisites: {\n\t\t\t\tstep: this.#requisites,\n\t\t\t\ttitle: Loc.getMessage('SIGN_WIZARD_PREPARING_DOCUMENT'),\n\t\t\t\tbeforeCompletion: async () => {\n\t\t\t\t\tconst [, nextButton] = this.#navigationButtons;\n\t\t\t\t\tDom.addClass(nextButton, 'ui-btn-wait');\n\t\t\t\t\tconst { uid, isTemplate, title, initiator } = this.#documentSetup.setupData;\n\t\t\t\t\tconst valid = this.#requisites.checkInitiator(initiator);\n\t\t\t\t\tif (!valid)\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.removeClass(nextButton, 'ui-btn-wait');\n\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst entityData = await this.#requisites.processMembers();\n\t\t\t\t\tif (!entityData)\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.removeClass(nextButton, 'ui-btn-wait');\n\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst blocks = await this.#documentSetup.loadBlocks(uid);\n\t\t\t\t\tthis.#editor.documentData = { isTemplate, uid, blocks };\n\t\t\t\t\tthis.#editor.entityData = entityData;\n\t\t\t\t\tthis.#documentSummary.documentData = { uid, title, blocks };\n\t\t\t\t\tthis.#documentSummary.entityData = entityData;\n\t\t\t\t\tawait this.#editor.renderDocument();\n\t\t\t\t\tDom.removeClass(nextButton, 'ui-btn-wait');\n\t\t\t\t\tawait this.#editor.show();\n\n\t\t\t\t\treturn true;\n\t\t\t\t},\n\t\t\t},\n\t\t\tsend: {\n\t\t\t\tstep: this.#documentSummary,\n\t\t\t\ttitle: Loc.getMessage('SIGN_WIZARD_SEND_DOCUMENT'),\n\t\t\t},\n\t\t};\n\t\tthis.#stepIndex = 0;\n\t\tthis.#order = ['setup', 'requisites', 'send'];\n\t\tthis.#stages = this.#createStages();\n\t\tthis.#navigationButtons = this.#createNavigationButtons();\n\t\tthis.#stepNode = Tag.render`<div class=\"sign-wizard__step\"></div>`;\n\t\t// eslint-disable-next-line no-shadow\n\t\tconst Editor = Reflection.getClass('top.BX.Sign.V2.Editor');\n\t\tthis.#editor = new Editor();\n\t\tthis.#subscribeOnEvents();\n\t}\n\n\tasync #loadData()\n\t{\n\t\tconst loadedData = this.#uid ? await this.#api.loadDocument(this.#uid) : null;\n\t\tif (!loadedData)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#documentSetup.finishSetup(loadedData, loadedData.blankId);\n\t\tthis.#requisites.documentData = loadedData;\n\t\tthis.#editor.documentData = loadedData;\n\t\tthis.#documentSummary.documentData = loadedData;\n\t\tif (\n\t\t\tloadedData.status === 'uploading'\n\t\t\t|| loadedData.status === 'uploaded'\n\t\t\t|| loadedData.status === 'ready'\n\t\t)\n\t\t{\n\t\t\tthis.#documentSetup.waitForPagesList((urls) => {\n\t\t\t\tthis.#editor.urls = urls;\n\t\t\t\tthis.#preview.urls = urls;\n\t\t\t\tthis.#preview.setBlocks(loadedData.blocks);\n\t\t\t});\n\t\t\tthis.#stepIndex = 1;\n\t\t}\n\t}\n\n\tasync show()\n\t{\n\t\ttry\n\t\t{\n\t\t\tawait this.#loadData();\n\t\t\tthis.#moveOnStep(this.#stepIndex);\n\t\t\tconst container = document.getElementById(this.#containerId);\n\t\t\tDom.append(this.#getLayout(), container);\n\t\t}\n\t\tcatch (ex)\n\t\t{\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.log(ex);\n\t\t}\n\t}\n\n\t#subscribeOnStagesEvents()\n\t{\n\t\tconst [, nextButton] = this.#navigationButtons;\n\t\tconst events = [\n\t\t\t{\n\t\t\t\ttype: 'toggleSelection',\n\t\t\t\tstage: 'setup',\n\t\t\t\tmethod: ({ data }) => {\n\t\t\t\t\tconst { relatedTarget, selected, blankId } = data;\n\t\t\t\t\tif (selected)\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.removeClass(nextButton, 'ui-btn-disabled');\n\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (relatedTarget !== nextButton)\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.addClass(nextButton, 'ui-btn-disabled');\n\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.#documentSetup.blankSelector.selectBlank(blankId);\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'addFile',\n\t\t\t\tstage: 'setup',\n\t\t\t\tmethod: () => {\n\t\t\t\t\tif (this.#documentSetup.blankSelector.isFilesReadyForUpload())\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.removeClass(nextButton, 'ui-btn-disabled');\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.addClass(nextButton, 'ui-btn-disabled');\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'removeFile',\n\t\t\t\tstage: 'setup',\n\t\t\t\tmethod: () => {\n\t\t\t\t\tif (this.#documentSetup.blankSelector.isFilesReadyForUpload())\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.removeClass(nextButton, 'ui-btn-disabled');\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.addClass(nextButton, 'ui-btn-disabled');\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'clearFiles',\n\t\t\t\tstage: 'setup',\n\t\t\t\tmethod: () => Dom.addClass(nextButton, 'ui-btn-disabled'),\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'changeInitiator',\n\t\t\t\tstage: 'requisites',\n\t\t\t\tmethod: ({ data }) => {\n\t\t\t\t\tthis.#documentSetup.setupData = {\n\t\t\t\t\t\t...this.#documentSetup.setupData,\n\t\t\t\t\t\tinitiator: data.initiator,\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'showEditor',\n\t\t\t\tstage: 'send',\n\t\t\t\tmethod: () => this.#editor.show(),\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'changeTitle',\n\t\t\t\tstage: 'send',\n\t\t\t\tmethod: ({ data }) => {\n\t\t\t\t\tthis.#documentSetup.setupData = {\n\t\t\t\t\t\t...this.#documentSetup.setupData,\n\t\t\t\t\t\ttitle: data.newValue,\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\t\tevents.forEach(({ type, method, stage }) => {\n\t\t\tconst { step } = this.#stepsMetadata[stage];\n\t\t\tstep.subscribe(type, method);\n\t\t});\n\t}\n\n\t#subscribeOnEvents()\n\t{\n\t\tthis.#subscribeOnStagesEvents();\n\t\tthis.#editor.subscribe('save', ({ data }) => {\n\t\t\tconst blocks = data.blocks;\n\t\t\tthis.#preview.setBlocks(blocks);\n\t\t\tthis.#documentSetup.setupData = {\n\t\t\t\t...this.#documentSetup.setupData,\n\t\t\t\tblocks,\n\t\t\t};\n\t\t\tthis.#documentSummary.documentData = {\n\t\t\t\t...this.#documentSummary.documentData,\n\t\t\t\tblocks,\n\t\t\t};\n\t\t\tthis.#documentSummary.renderDocumentDetails();\n\t\t});\n\t}\n\n\t#createNavigationButtons(): Array<HTMLElement>\n\t{\n\t\tconst classList = [\n\t\t\t'ui-btn-primary',\n\t\t\t'ui-btn',\n\t\t\t'ui-btn-lg',\n\t\t\t'ui-btn-round',\n\t\t\t'sign-wizard__footer_button',\n\t\t];\n\t\tconst buttons = [\n\t\t\t{\n\t\t\t\ttitle: Loc.getMessage('SIGN_WIZARD_FOOTER_BUTTON_BACK'),\n\t\t\t\tmethod: () => this.#onPrevStep(),\n\t\t\t\tbuttonClassList: [\n\t\t\t\t\t...classList.slice(1),\n\t\t\t\t\t'ui-btn-light-border',\n\t\t\t\t],\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: Loc.getMessage('SIGN_WIZARD_FOOTER_BUTTON_NEXT'),\n\t\t\t\tmethod: () => this.#onNextStep(),\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: Loc.getMessage('SIGN_WIZARD_FOOTER_SEND_FOR_SIGN'),\n\t\t\t\tmethod: () => this.#sendForSign(),\n\t\t\t},\n\t\t];\n\n\t\treturn buttons.map((button) => {\n\t\t\tconst {\n\t\t\t\ttitle,\n\t\t\t\tmethod,\n\t\t\t\tbuttonClassList = classList,\n\t\t\t} = button;\n\n\t\t\treturn Tag.render`\n\t\t\t\t<button\n\t\t\t\t\tclass=\"${buttonClassList.join(' ')}\"\n\t\t\t\t\ttitle=\"${title}\"\n\t\t\t\t\tonclick=\"${method}\"\n\t\t\t\t>\n\t\t\t\t\t${title}\n\t\t\t\t</button>\n\t\t\t`;\n\t\t});\n\t}\n\n\t#createStages(): HTMLElement\n\t{\n\t\tconst entries = Object.entries(this.#stepsMetadata);\n\t\tconst stages = new Map();\n\t\tentries.forEach(([stepName, step]) => {\n\t\t\tconst stage = Tag.render`\n\t\t\t\t<span class=\"sign-wizard__stages_item\">\n\t\t\t\t\t${step.title}\n\t\t\t\t</span>\n\t\t\t`;\n\t\t\tstages.set(stepName, stage);\n\t\t});\n\n\t\treturn stages;\n\t}\n\n\t#renderNavigationButtons()\n\t{\n\t\tconst [\n\t\t\tbackButton,\n\t\t\tnextButton,\n\t\t\tsendForSignButton,\n\t\t] = this.#navigationButtons;\n\t\tconst firstStep = this.#stepIndex === 0;\n\t\tconst lastStep = this.#stepIndex + 1 === this.#order.length;\n\t\tconst nextDisabled = this.#order[this.#stepIndex] === 'setup';\n\t\tDom.removeClass(backButton, '--hide');\n\t\tDom.removeClass(nextButton, '--hide');\n\t\tDom.addClass(sendForSignButton, '--hide');\n\t\tif (nextDisabled)\n\t\t{\n\t\t\tDom.addClass(nextButton, 'ui-btn-disabled');\n\t\t}\n\n\t\tif (firstStep)\n\t\t{\n\t\t\tDom.addClass(backButton, '--hide');\n\t\t}\n\n\t\tif (lastStep)\n\t\t{\n\t\t\tDom.addClass(nextButton, '--hide');\n\t\t\tDom.removeClass(sendForSignButton, '--hide');\n\t\t}\n\t}\n\n\t#renderActiveStage()\n\t{\n\t\tthis.#stages.forEach((stageNode) => {\n\t\t\tDom.removeClass(stageNode, '--active');\n\t\t});\n\t\tconst stepName = this.#order[this.#stepIndex];\n\t\tconst stageNode = this.#stages.get(stepName);\n\t\tDom.addClass(stageNode, '--active');\n\t}\n\n\t#renderStep()\n\t{\n\t\tconst stepName = this.#order[this.#stepIndex];\n\t\tconst { step } = this.#stepsMetadata[stepName];\n\t\tDom.clean(this.#stepNode);\n\t\tDom.append(step.getLayout(), this.#stepNode);\n\t}\n\n\t#onPrevStep()\n\t{\n\t\tthis.#stepIndex -= 1;\n\t\tthis.#moveOnStep(this.#stepIndex);\n\t}\n\n\tasync #onNextStep()\n\t{\n\t\tconst stepName = this.#order[this.#stepIndex];\n\t\tconst { beforeCompletion } = this.#stepsMetadata[stepName];\n\t\tconst shouldComplete = await beforeCompletion?.() ?? true;\n\t\tif (!shouldComplete)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#stepIndex += 1;\n\t\tthis.#moveOnStep(this.#stepIndex);\n\t}\n\n\t#moveOnStep(step: number)\n\t{\n\t\tthis.#stepIndex = step;\n\t\tthis.#renderActiveStage();\n\t\tthis.#renderNavigationButtons();\n\t\tthis.#renderStep();\n\t}\n\n\tasync #sendForSign()\n\t{\n\t\tconst sendForSignButton = this.#navigationButtons[2];\n\t\ttry\n\t\t{\n\t\t\tconst { communications, entityData } = this.#documentSummary;\n\t\t\tDom.addClass(sendForSignButton, 'ui-btn-wait');\n\t\t\tconst entries = Object.entries(communications);\n\t\t\tlet allowToComplete = true;\n\t\t\tconst restrictions = await this.#api.loadRestrictions();\n\n\t\t\tfor (const [entityType, item] of entries)\n\t\t\t{\n\t\t\t\tconst { type, value } = item;\n\t\t\t\tconst { uid: memberUid } = entityData[entityType];\n\n\t\t\t\tif (!restrictions.smsAllowed && type === 'PHONE')\n\t\t\t\t{\n\t\t\t\t\ttop.BX.UI.InfoHelper.show('limit_crm_sign_messenger_identification');\n\t\t\t\t\tallowToComplete = false;\n\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tthis.#api.modifyCommunicationChannel(memberUid, type, value);\n\t\t\t}\n\n\t\t\tconst {\n\t\t\t\tuid: documentUid,\n\t\t\t\tinitiator,\n\t\t\t} = this.#documentSetup.setupData;\n\t\t\tawait this.#api.modifyInitiator(documentUid, initiator);\n\n\t\t\tif (!allowToComplete)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tawait this.#api.configureDocument(documentUid);\n\t\t\tawait this.#api.startSigning(documentUid);\n\t\t\tthis.#complete();\n\t\t}\n\t\tcatch (e)\n\t\t{\n\t\t\tif (Type.isArrayFilled(e?.errors))\n\t\t\t{\n\t\t\t\tconst firstError = e.errors[0];\n\t\t\t\te.errors.forEach((error) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\terror?.code === firstError.code\n\t\t\t\t\t\t&& (error?.code === 'MEMBER_INVALID_PHONE' || error?.code === 'MEMBER_PHONE_UNSUPPORTED_COUNTRY_CODE')\n\t\t\t\t\t\t&& Type.isStringFilled(error?.customData?.phone)\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.#documentSummary.highlightCommunicationWithError(error.customData.phone);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\tfinally\n\t\t{\n\t\t\tDom.removeClass(sendForSignButton, 'ui-btn-wait');\n\t\t}\n\t}\n\n\t#getLayout(): HTMLElement\n\t{\n\t\tconst headerTitle = Loc.getMessage('SIGN_WIZARD_HEADER_TITLE');\n\t\tconst headerTitleSub = Loc.getMessage('SIGN_WIZARD_HEADER_TITLE_SUB');\n\t\tconst header = Tag.render`\n\t\t\t<div class=\"sign-wizard__head\">\n\t\t\t\t<div>\n\t\t\t\t\t<p class=\"sign-wizard__head_title\">${headerTitle}</p>\n\t\t\t\t\t<p class=\"sign-wizard__head_title --sub\">\n\t\t\t\t\t\t${headerTitleSub}\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t\tconst content = Tag.render`\n\t\t\t<div class=\"sign-wizard__content\">\n\t\t\t\t<div class=\"sign-wizard__stages\">\n\t\t\t\t\t${[...this.#stages.values()]}\n\t\t\t\t</div>\n\t\t\t\t${this.#stepNode}\n\t\t\t</div>\n\t\t`;\n\t\tconst footer = Tag.render`\n\t\t\t<div class=\"sign-wizard__footer\">\n\t\t\t\t${this.#navigationButtons}\n\t\t\t</div>\n\t\t`;\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"sign-wizard sign-wizard__scope\">\n\t\t\t\t<div class=\"sign-wizard__sidebar\">\n\t\t\t\t\t${header}\n\t\t\t\t\t${content}\n\t\t\t\t\t${footer}\n\t\t\t\t</div>\n\t\t\t\t${this.#preview.getLayout()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#complete()\n\t{\n\t\tconst queryString = window.location.search;\n\t\tconst urlParams = new URLSearchParams(queryString);\n\t\tBX.SidePanel.Instance.close();\n\n\t\tif (!urlParams.has('noRedirect'))\n\t\t{\n\t\t\tconst { entityTypeId, entityId } = this.#documentSetup.setupData;\n\t\t\tconst detailsUrl = `/crm/type/${entityTypeId}/details/${entityId}/`;\n\t\t\tBX.SidePanel.Instance.open(detailsUrl);\n\t\t}\n\t}\n}\n"],"names":["Wizard","constructor","options","uid","containerId","config","DocumentSetup","blankSelectorConfig","Requisites","DocumentSummary","documentSummaryConfig","Preview","Api","setup","step","title","Loc","getMessage","beforeCompletion","nextButton","renderPages","urls","blocks","setBlocks","Dom","addClass","removeClass","setupData","entityId","initiator","documentData","ready","waitForPagesList","requisites","isTemplate","valid","checkInitiator","entityData","processMembers","loadBlocks","renderDocument","show","send","Tag","render","Editor","Reflection","getClass","container","document","getElementById","append","ex","console","log","loadedData","loadDocument","finishSetup","blankId","status","events","type","stage","method","data","relatedTarget","selected","blankSelector","selectBlank","isFilesReadyForUpload","newValue","forEach","subscribe","renderDocumentDetails","classList","buttons","buttonClassList","slice","map","button","join","entries","Object","stages","Map","stepName","set","backButton","sendForSignButton","firstStep","lastStep","length","nextDisabled","stageNode","get","clean","getLayout","shouldComplete","communications","allowToComplete","restrictions","loadRestrictions","entityType","item","value","memberUid","smsAllowed","top","BX","UI","InfoHelper","modifyCommunicationChannel","documentUid","modifyInitiator","configureDocument","startSigning","e","Type","isArrayFilled","errors","firstError","error","code","isStringFilled","customData","phone","highlightCommunicationWithError","headerTitle","headerTitleSub","header","content","values","footer","queryString","window","location","search","urlParams","URLSearchParams","SidePanel","Instance","close","has","entityTypeId","detailsUrl","open"],"mappings":"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"}