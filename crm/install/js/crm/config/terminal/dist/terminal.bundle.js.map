{"version":3,"file":"terminal.bundle.js","sources":["../src/components/settings-container.js","../src/components/settings-section.js","../src/components/sms/sms.js","../src/components/sms/sms-provider-select.js","../src/components/sms/sms-settings-section.js","../src/components/sms/sms-settings.js","../src/const/required-paysystem-codes.js","../src/components/payment-systems/payment-methods-settings.js","../src/components/buttons-panel.js","../src/app.js"],"sourcesContent":["export const SettingsContainer = {\n\tprops: {\n\t\ttitle: String,\n\t\ticonStyle: String,\n\t\tcollapsed: Boolean,\n\t},\n\tmethods: {\n\t\tonTitleClicked()\n\t\t{\n\t\t\tthis.$emit('titleClick');\n\t\t},\n\t},\n\n\ttemplate: `\n\t<div class=\"settings-container\">\n\t\t<div\n\t\t\tclass=\"ui-slider-heading-4 settings-container-title\"\n\t\t\tv-bind:class=\"{ 'settings-container-title-collapsed': collapsed }\"\n\t\t\tv-on:click=\"onTitleClicked\"\n\t\t>\n\t\t\t<div :class=\"iconStyle\"></div>\n\t\t\t{{ title }}\n\t\t</div>\n\n\t\t<div class=\"settings-section-list\" v-bind:class=\"{ 'settings-section-list-collapsed': collapsed }\">\n\t\t\t<slot></slot>\n\t\t</div>\n\t</div>\n\t`,\n};\n","// @flow\n\nimport 'ui.switcher';\n\nexport const SettingsSection = {\n\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tisEnabled: this.active,\n\t\t\tswitcher: null,\n\t\t};\n\t},\n\n\tmounted()\n\t{\n\t\t(new BX.UI.Switcher({\n\t\t\tnode: this.$refs.switcher,\n\t\t\tsize: 'small',\n\t\t\tchecked: this.isEnabled,\n\t\t\thandlers: {\n\t\t\t\ttoggled: this.onSwitcherToggle.bind(this),\n\t\t\t},\n\t\t}));\n\n\t\tBX.UI.Hint.init(this.$refs.title);\n\t},\n\n\tmethods: {\n\t\tonSwitcherToggle()\n\t\t{\n\t\t\tthis.isEnabled = !this.isEnabled;\n\t\t\tthis.$emit('toggle', this.isEnabled);\n\t\t},\n\t\tonTitleClick()\n\t\t{\n\t\t\tthis.$emit('titleClick');\n\t\t},\n\t},\n\n\tprops: {\n\t\ttitle: String,\n\t\tswitchable: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tactive: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\thint: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tleftIconClass: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\n\t// language=Vue\n\ttemplate: `\n\t\t<div>\n\t\t\t<div class=\"ui-slider-heading-4 settings-section-header\">\n\t\t\t\t<div v-if=\"switchable\" class=\"settings-setction-switcher-container\">\n\t\t\t\t\t<span ref=\"switcher\" class=\"ui-switcher\"></span>\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"leftIconClass\" :class=\"leftIconClass\"></div>\n\t\t\t\t<div\n\t\t\t\t\tstyle=\"font-size: 16px; margin-right: 0px;\"\n\t\t\t\t>\n\t\t\t\t\t{{ title }}\n\t\t\t\t</div>\n\t\t\t\t<span\n\t\t\t\t\tv-if=\"hint !== ''\"\n\t\t\t\t\tclass=\"ui-hint\"\n\t\t\t\t\tdata-hint-html\n\t\t\t\t\tdata-hint-interactivity\n\t\t\t\t\t:data-hint=\"hint\"\n\t\t\t\t>\n\t\t\t\t\t<span class=\"ui-hint-icon\"></span>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","//@flow\n\nexport const Sms = {\n\t// language=Vue\n\ttemplate: `\n\t\t<div>\n\t\t\t<div class=\"sms-container\">\n\t\t\t\t<slot></slot>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};","// @flow\n\nimport { mapGetters, mapMutations } from 'ui.vue3.vuex';\nimport { Event } from 'main.core';\n\nexport const SmsProviderSelect = {\n\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tisListShowed: false,\n\t\t};\n\t},\n\n\tmounted() {\n\t\tEvent.bind(document, 'click', () => {\n\t\t\tthis.isListShowed = false;\n\t\t});\n\t},\n\n\tmethods: {\n\t\t...mapGetters([\n\t\t\t'getServiceLink',\n\t\t\t'getActiveSmsServices',\n\t\t]),\n\n\t\t...mapMutations([\n\t\t\t'selectSMSService',\n\t\t]),\n\n\t\tswitchService(serviceId)\n\t\t{\n\t\t\tthis.isListShowed = false;\n\t\t\tthis.selectSMSService(serviceId);\n\t\t},\n\n\t\tswitchVisibility() {\n\t\t\tthis.isListShowed = !this.isListShowed;\n\t\t},\n\n\t\topenSmsServicesSlider() {\n\t\t\tconst options = {\n\t\t\t\tcacheable: false,\n\t\t\t\tallowChangeHistory: false,\n\t\t\t\trequestMethod: 'get',\n\t\t\t\twidth: 700,\n\t\t\t\tevents: {\n\t\t\t\t\tonClose: () => {\n\t\t\t\t\t\tthis.$emit('onConnectSliderClosed');\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t};\n\n\t\t\tBX.SidePanel.Instance.open(this.getServiceLink(), options);\n\t\t},\n\t},\n\n\tcomputed: {\n\t\t...mapGetters([\n\t\t\t'getSelectedService',\n\t\t]),\n\n\t\tgetListClassname(): string\n\t\t{\n\t\t\tif (!this.isListShowed)\n\t\t\t{\n\t\t\t\treturn 'sms-provider-selector-hided-list';\n\t\t\t}\n\n\t\t\treturn 'sms-provider-selector-list';\n\t\t},\n\t},\n\n\t// language=Vue\n\ttemplate: `\n\t\t<div style=\"display: inline-block; vertical-align: top; position: relative;\">\n\t\t\t<span class=\"sms-provider-selector\" @click.stop=\"switchVisibility\">{{ $Bitrix.Loc.getMessage('CRM_CFG_TERMINAL_SETTINGS_SECTION_SMS_CHANGE') }}</span>\n\t\t\t<ul :class=\"getListClassname\" @click.stop>\n\t\t\t\t<li v-for=\"provider in getActiveSmsServices()\" @click=\"switchService(provider['ID'])\" v-show=\"provider['ID'] !== getSelectedService['ID']\">{{ provider['NAME'] }}</li>\n\t\t\t\t<li @click=\"openSmsServicesSlider\">{{ $Bitrix.Loc.getMessage('CRM_CFG_TERMINAL_SETTINGS_SECTION_SMS_SERVICE_PROVIDER_CONNECT_MORE') }}</li>\n\t\t\t</ul>\n\t\t</div>\n\t`,\n};\n","// @flow\n\nimport { SettingsSection } from '../settings-section';\nimport { NotificationLink } from '../../types';\nimport { Sms } from './sms';\nimport { ajax, Text } from 'main.core';\nimport { Popup } from 'main.popup';\nimport { SmsProviderSelect } from './sms-provider-select';\nimport { mapGetters, mapMutations } from 'ui.vue3.vuex';\n\nexport const SmsSettingsSection = {\n\n\tdata() {\n\t\treturn {\n\t\t\tpopup: null,\n\t\t};\n\t},\n\n\tcomponents: {\n\t\tSettingsSection,\n\t\tSms,\n\t\tSmsProviderSelect,\n\t\tNotification,\n\t},\n\n\tcomputed: {\n\t\t...mapGetters([\n\t\t\t'isSmsSendingActive',\n\t\t\t'isAnyServiceEnabled',\n\t\t\t'isNotificationsEnabled',\n\t\t\t'getSelectedService',\n\t\t]),\n\n\t\tgetSectionTitle(): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage('CRM_CFG_TERMINAL_SETTINGS_SECTION_SMS_TITLE');\n\t\t},\n\n\t\tgetSectionHint(): string\n\t\t{\n\t\t\tconst replacements = {\n\t\t\t\t'#LINK_START#': '<a onclick=\"top.BX.Helper.show(\\'redirect=detail&code=17399056\\')\" style=\"cursor: pointer\">',\n\t\t\t\t'#LINK_END#': '</a>',\n\t\t\t};\n\n\t\t\treturn this.$Bitrix.Loc.getMessage('CRM_CFG_TERMINAL_SETTINGS_SECTION_SMS_HINT_TEXT', replacements);\n\t\t},\n\t\tgetNotificationConnectHint(): string\n\t\t{\n\t\t\tconst replacements = {\n\t\t\t\t'#LINK_START#': '<span onclick=\"top.BX.Helper.show(\\'redirect=detail&code=17399068\\')\" class=\"sms-provider-selector\">',\n\t\t\t\t'#LINK_END#': '</span>',\n\t\t\t};\n\n\t\t\treturn this.$Bitrix.Loc.getMessage('CRM_CFG_TERMINAL_SETTINGS_SECTION_SMS_SERVICE_PROVIDER_UNC_CONNECTED', replacements);\n\t\t},\n\t},\n\n\tmethods: {\n\t\t...mapMutations([\n\t\t\t'setSmsSendingActive',\n\t\t\t'updateServicesList',\n\t\t\t'updateNotificationsEnabled',\n\t\t]),\n\t\t...mapGetters([\n\t\t\t'getPaymentSlipLinkScheme',\n\t\t\t'getNotificationsLink',\n\t\t\t'getServiceLink',\n\t\t]),\n\n\t\tonServiceConnectSliderClosed(): void\n\t\t{\n\t\t\tajax\n\t\t\t\t.runComponentAction('bitrix:crm.config.terminal.settings', 'updateServicesList')\n\t\t\t\t.then((response) => {\n\t\t\t\t\tif (response.status === 'success')\n\t\t\t\t\t{\n\t\t\t\t\t\tconst data = response.data;\n\t\t\t\t\t\tif (data?.isUCNEnabled)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.updateNotificationsEnabled(data.isUCNEnabled);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.updateServicesList(data.activeSmsServices);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tconsole.error(error);\n\t\t\t\t});\n\t\t},\n\n\t\tonSectionToggled(): void\n\t\t{\n\t\t\tthis.setSmsSendingActive(!this.isSmsSendingActive);\n\t\t},\n\n\t\tgetSmsMessage(): string\n\t\t{\n\t\t\tconst link = `<br /><span class=\"sms-link-path\">${this.getPaymentSlipLinkScheme()}</span><span class=\"sms-link-plug\">xxxxx</span> `;\n\t\t\tconst text = this.$Bitrix.Loc.getMessage('CRM_CFG_TERMINAL_SETTINGS_SECTION_SMS_MESSAGE_TEMPLATE');\n\n\t\t\treturn Text.encode(text).replaceAll('#PAYMENT_SLIP_LINK#', link);\n\t\t},\n\n\t\tgetSmsProviderMessage(): string\n\t\t{\n\t\t\tconst providerSelect = '<span>Dummy SMS</span>';\n\t\t\tconst text = this.$Bitrix.Loc.getMessage('CRM_CFG_TERMINAL_SETTINGS_SECTION_SMS_SERVICE_SELECT');\n\n\t\t\treturn Text.encode(text).replaceAll('#SMS_SERVICE#', providerSelect);\n\t\t},\n\n\t\tonSmsMouseenter(event): void\n\t\t{\n\t\t\tconst target = event.target;\n\t\t\tconst message = this.$Bitrix.Loc.getMessage('CRM_CFG_TERMINAL_SETTINGS_SECTION_SMS_MESSAGE_HINT');\n\n\t\t\tif (this.popup)\n\t\t\t{\n\t\t\t\tthis.popup.destroy();\n\t\t\t\tthis.popup = null;\n\t\t\t}\n\n\t\t\tthis.popup = new Popup(null, target, {\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupClose: () => {\n\t\t\t\t\t\tthis.popup.destroy();\n\t\t\t\t\t\tthis.popup = null;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdarkMode: true,\n\t\t\t\tcontent: message,\n\t\t\t\toffsetLeft: target.offsetWidth,\n\t\t\t});\n\n\t\t\tthis.popup.show();\n\t\t},\n\n\t\tonSmsMouseleave(): void\n\t\t{\n\t\t\tthis.popup.destroy();\n\t\t},\n\n\t\tonNotificationsConnectLinkClick(): void\n\t\t{\n\t\t\tconst notificationLink: NotificationLink = this.getNotificationsLink();\n\t\t\tif (notificationLink === null)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (notificationLink.type === 'connect_link')\n\t\t\t{\n\t\t\t\tconst options = {\n\t\t\t\t\tcacheable: false,\n\t\t\t\t\tallowChangeHistory: false,\n\t\t\t\t\trequestMethod: 'get',\n\t\t\t\t\twidth: 700,\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonClose: () => {\n\t\t\t\t\t\t\tthis.onServiceConnectSliderClosed();\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t};\n\n\t\t\t\tBX.SidePanel.Instance.open(notificationLink.value, options);\n\t\t\t}\n\t\t\telse if (notificationLink.type === 'ui_helper')\n\t\t\t{\n\t\t\t\ttop.BX.UI.InfoHelper.show(notificationLink.value);\n\t\t\t}\n\t\t},\n\n\t\tonProviderSmsNotificationClick(): void\n\t\t{\n\t\t\tconst options = {\n\t\t\t\tcacheable: false,\n\t\t\t\tallowChangeHistory: false,\n\t\t\t\trequestMethod: 'get',\n\t\t\t\twidth: 700,\n\t\t\t\tevents: {\n\t\t\t\t\tonClose: () => {\n\t\t\t\t\t\tthis.onServiceConnectSliderClosed();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t};\n\n\t\t\tBX.SidePanel.Instance.open(this.getServiceLink(), options);\n\t\t},\n\t},\n\n\t// language=Vue\n\ttemplate: `\n\t\t<div v-if=\"isAnyServiceEnabled\" style=\"display: flex; justify-content: space-between; margin-bottom: 24px;\">\n\t\t\t<div>\n\t\t\t\t<SettingsSection\n\t\t\t\t\t:title=\"getSectionTitle\"\n\t\t\t\t\t:switchable=\"true\"\n\t\t\t\t\tv-on:toggle=\"onSectionToggled\"\n\t\t\t\t\t:active=\"isSmsSendingActive\"\n\t\t\t\t\t:hint=\"getSectionHint\"\n\t\t\t\t/>\n\t\t\t\t<div style=\"margin-left: 53px;\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-html=\"getNotificationConnectHint\"\n\t\t\t\t\t\tv-if=\"isNotificationsEnabled\"\n\t\t\t\t\t\tclass=\"sms-provider-name\"\n\t\t\t\t\t></div>\n\t\t\t\t\t<div v-else>\n\t\t\t\t\t\t<div class=\"sms-provider-name\" style=\"padding: 3px 0;\">\n\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('CRM_CFG_TERMINAL_SETTINGS_SECTION_SMS_SERVICE_SELECT_MSGVER_1') + ' ' + getSelectedService['NAME'] }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<SmsProviderSelect v-on:onConnectSliderClosed=\"onServiceConnectSliderClosed\"/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<div class=\"sms-provider-message-title\">\n\t\t\t\t\t{{ $Bitrix.Loc.getMessage('CRM_CFG_TERMINAL_SETTINGS_SECTION_SMS_MESSAGE_TITLE') }}\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<Sms>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tv-html=\"getSmsMessage()\"\n\t\t\t\t\t\t\tv-on:mouseenter=\"onSmsMouseenter($event)\"\n\t\t\t\t\t\t\tv-on:mouseleave=\"onSmsMouseleave\"\n\t\t\t\t\t\t></span>\n\t\t\t\t\t</Sms>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div style=\"margin-bottom: 24px;\" v-else>\n\t\t\t<span class=\"sms-provider-empty-provider-list-text\" v-if=\"(getNotificationsLink() !== null) && (getServiceLink() !== '')\">\n\t\t\t\t{{ $Bitrix.Loc.getMessage('CRM_CFG_TERMINAL_SETTINGS_SECTION_SMS_ONBOARDING_TEXT') }}\n\t\t\t</span>\n\t\t\t<span class=\"sms-provider-empty-provider-list-text\" v-else-if=\"(getNotificationsLink() === null) && (getServiceLink() !== '')\">\n\t\t\t\t{{ $Bitrix.Loc.getMessage('CRM_CFG_TERMINAL_SETTINGS_SECTION_SMS_ONBOARDING_ONLY_SMS_SERVICES_TEXT') }}\n\t\t\t</span>\n\t\t\t<button class=\"ui-btn ui-btn-md ui-btn-primary\" @click=\"onNotificationsConnectLinkClick\" v-if=\"getNotificationsLink() !== null\">\n\t\t\t\t{{ $Bitrix.Loc.getMessage('CRM_CFG_TERMINAL_SETTINGS_SECTION_SMS_SERVICE_UNC_CONNECT_BTN') }}\n\t\t\t</button>\n\n\t\t\t<button class=\"ui-btn ui-btn-md ui-btn-light-border\" @click=\"onProviderSmsNotificationClick\" v-if=\"(getNotificationsLink() !== null) && (getServiceLink() !== '')\">\n\t\t\t\t{{ $Bitrix.Loc.getMessage('CRM_CFG_TERMINAL_SETTINGS_SECTION_SMS_SERVICE_PROVIDER_CONNECT_BTN') }}\n\t\t\t</button>\n\t\t\t<button class=\"ui-btn ui-btn-md ui-btn-primary\" @click=\"onProviderSmsNotificationClick\" v-else-if=\"(getNotificationsLink() === null) && (getServiceLink() !== '')\">\n\t\t\t\t{{ $Bitrix.Loc.getMessage('CRM_CFG_TERMINAL_SETTINGS_SECTION_SMS_SERVICE_PROVIDER_CONNECT_BTN') }}\n\t\t\t</button>\n\t\t</div>\n\t`,\n};\n","// @flow\n\nimport { ajax } from 'main.core';\nimport { SettingsContainer } from '../settings-container';\nimport { SmsSettingsSection } from './sms-settings-section';\nimport { mapGetters, mapMutations } from 'ui.vue3.vuex';\n\nexport const SmsSettings = {\n\tcomponents: {\n\t\tSettingsContainer,\n\t\tSmsSettingsSection,\n\t},\n\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tisSettingsChanged: 'isChanged',\n\t\t\tisSaving: 'isSaving',\n\t\t\tgetIsSmsCollapsed: 'getIsSmsCollapsed',\n\t\t}),\n\t},\n\tmethods: {\n\t\t...mapMutations([\n\t\t\t'updateIsSmsCollapsed',\n\t\t]),\n\n\t\tonTitleClick()\n\t\t{\n\t\t\tthis.updateIsSmsCollapsed(!this.getIsSmsCollapsed);\n\t\t\tajax.runComponentAction(\n\t\t\t\t'bitrix:crm.config.terminal.settings',\n\t\t\t\t'updateSmsCollapsed',\n\t\t\t\t{\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tcollapsed: this.getIsSmsCollapsed,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t);\n\t\t},\n\t},\n\n\t// language=Vue\n\ttemplate: `\n\t\t<SettingsContainer\n\t\t\t:title=\"$Bitrix.Loc.getMessage('CRM_CFG_TERMINAL_SETTINGS_SUBTITLE_NOTIFICATION')\"\n\t\t\ticonStyle=\"settings-section-icon-sms\"\n\t\t\t:collapsed=\"getIsSmsCollapsed\"\n\t\t\tv-on:titleClick=\"onTitleClick\"\n\t\t>\n\t\t\t<SmsSettingsSection />\n\t\t</SettingsContainer>\n\t`,\n};\n","export const RequiredPaysystemCodes = Object.freeze({\n\tsbp: 'sbp',\n\tsberQr: 'sberQr',\n\trest: 'rest',\n\tpaysystemPanel: 'paysystemPanel',\n});\n","import { mapGetters, mapMutations } from 'ui.vue3.vuex';\nimport { SettingsSection } from '../settings-section';\nimport { SettingsContainer } from '../settings-container';\nimport { RequiredPaysystemCodes } from '../../const/required-paysystem-codes';\nimport { Label, LabelColor, LabelSize } from 'ui.label';\nimport { ajax } from 'main.core';\n\nexport const PaymentMethodsSettings = {\n\n\tcomponents: {\n\t\tSettingsSection,\n\t\tSettingsContainer,\n\t},\n\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tgetAvailablePaysystems: 'getAvailablePaysystems',\n\t\t\tgetTerminalDisabledPaysystems: 'getTerminalDisabledPaysystems',\n\t\t\tgetIsLinkPaymentEnabled: 'getIsLinkPaymentEnabled',\n\t\t\tgetIsSbpEnabled: 'getIsSbpEnabled',\n\t\t\tgetIsSberQrEnabled: 'getIsSberQrEnabled',\n\t\t\tgetIsSbpConnected: 'getIsSbpConnected',\n\t\t\tgetIsSberQrConnected: 'getIsSberQrConnected',\n\t\t\tgetIsRuZone: 'getIsRuZone',\n\t\t\tgetSbpConnectPath: 'getSbpConnectPath',\n\t\t\tgetSberQrConnectPath: 'getSberQrConnectPath',\n\t\t\tgetIsAnyPaysystemActive: 'getIsAnyPaysystemActive',\n\t\t\tgetPaysystemPanelPath: 'getPaysystemPanelPath',\n\t\t\tgetIsPaysystemsCollapsed: 'getIsPaysystemsCollapsed',\n\t\t\tgetPaysystemsArticleUrl: 'getPaysystemsArticleUrl',\n\t\t}),\n\n\t\tgetRequiredPaysystemCodes(): void\n\t\t{\n\t\t\treturn RequiredPaysystemCodes;\n\t\t},\n\n\t\tgetLinkPaymentHint(): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage('CRM_CFG_TERMINAL_SETTINGS_SECTION_PS_LINK_PAYMENT_HINT');\n\t\t},\n\t},\n\n\tmethods: {\n\t\t...mapMutations([\n\t\t\t'setTerminalPaysystemDisabled',\n\t\t\t'setLinkPaymentEnabled',\n\t\t\t'setRequiredPaysystemDisabled',\n\t\t\t'updateSbpConnectPath',\n\t\t\t'updateSberQrConnectPath',\n\t\t\t'updateIsSbpConnected',\n\t\t\t'updateIsSberQrConnected',\n\t\t\t'updateIsPaysystemsCollapsed',\n\t\t\t'updateIsAnyPaysystemActive',\n\t\t\t'updateAvailablePaysystems',\n\t\t]),\n\n\t\tonPaysystemToggled(paysystemId: number)\n\t\t{\n\t\t\tthis.setTerminalPaysystemDisabled(paysystemId);\n\t\t},\n\n\t\tonRequiredPaysystemToggled(paysystemCode: string)\n\t\t{\n\t\t\tthis.setRequiredPaysystemDisabled(paysystemCode);\n\t\t},\n\n\t\tonLinkPaymentToggled()\n\t\t{\n\t\t\tthis.setLinkPaymentEnabled(!this.getIsLinkPaymentEnabled);\n\t\t},\n\t\topenPaysystemSlider(psMode: string, link: string = '')\n\t\t{\n\t\t\tconst options = {\n\t\t\t\tcacheable: false,\n\t\t\t\tallowChangeHistory: false,\n\t\t\t\trequestMethod: 'get',\n\t\t\t\twidth: psMode === RequiredPaysystemCodes.paysystemPanel ? null : 1000,\n\t\t\t\tevents: {\n\t\t\t\t\tonClose: () => {\n\t\t\t\t\t\tthis.onPaysystemSliderClosed();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t};\n\t\t\tconst url = psMode === RequiredPaysystemCodes.rest ? link : this.getPaysystemUrl(psMode);\n\t\t\tBX.SidePanel.Instance.open(url, options);\n\t\t},\n\t\tgetPaysystemUrl(psMode: string): string\n\t\t{\n\t\t\tswitch (psMode)\n\t\t\t{\n\t\t\t\tcase RequiredPaysystemCodes.sbp:\n\t\t\t\t\treturn this.getSbpConnectPath;\n\t\t\t\tcase RequiredPaysystemCodes.sberQr:\n\t\t\t\t\treturn this.getSberQrConnectPath;\n\t\t\t\tcase RequiredPaysystemCodes.paysystemPanel:\n\t\t\t\t\treturn this.getPaysystemPanelPath;\n\t\t\t\tdefault:\n\t\t\t\t\treturn '';\n\t\t\t}\n\t\t},\n\t\tonPaysystemSliderClosed()\n\t\t{\n\t\t\tajax.runComponentAction('bitrix:crm.config.terminal.settings', 'updatePaysystemPaths')\n\t\t\t\t.then((response) => {\n\t\t\t\t\tthis.updateSbpConnectPath(response.data.sbp);\n\t\t\t\t\tthis.updateSberQrConnectPath(response.data.sberbankQr);\n\t\t\t\t\tthis.updateIsSbpConnected(response.data.isSbpConnected);\n\t\t\t\t\tthis.updateIsSberQrConnected(response.data.isSberQrConnected);\n\t\t\t\t\tthis.updateIsAnyPaysystemActive(response.data.isAnyPaysystemActive);\n\t\t\t\t\tthis.updateAvailablePaysystems(response.data.availablePaysystems);\n\t\t\t\t})\n\t\t\t\t.catch(() => {});\n\t\t},\n\n\t\tgetStatusLabel(connected = false)\n\t\t{\n\t\t\tconst text = this.$Bitrix.Loc.getMessage(\n\t\t\t\tconnected\n\t\t\t\t\t? 'CRM_CFG_TERMINAL_SETTINGS_SECTION_PS_CONNECTED'\n\t\t\t\t\t: 'CRM_CFG_TERMINAL_SETTINGS_SECTION_PS_NOT_CONNECTED'\n\t\t\t).toUpperCase();\n\t\t\tconst label = new Label({\n\t\t\t\ttext,\n\t\t\t\tcolor: connected ? LabelColor.LIGHT_GREEN : LabelColor.LIGHT,\n\t\t\t\tsize: LabelSize.LG,\n\t\t\t\tfill: true,\n\t\t\t});\n\n\t\t\treturn label.render().outerHTML;\n\t\t},\n\n\t\tonTitleClick()\n\t\t{\n\t\t\tthis.updateIsPaysystemsCollapsed(!this.getIsPaysystemsCollapsed);\n\t\t\tajax.runComponentAction(\n\t\t\t\t'bitrix:crm.config.terminal.settings',\n\t\t\t\t'updatePaysystemsCollapsed',\n\t\t\t\t{\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tcollapsed: this.getIsPaysystemsCollapsed,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t);\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<SettingsContainer\n\t\t\t:title=\"$Bitrix.Loc.getMessage('CRM_CFG_TERMINAL_SETTINGS_SECTION_PS_TITLE_MSGVER_1')\"\n\t\t\ticonStyle=\"settings-section-icon-payment-methods\"\n\t\t\t:collapsed=\"getIsPaysystemsCollapsed\"\n\t\t\tv-on:titleClick=\"onTitleClick\"\n\t\t\tv-bind:style=\"{ 'padding-bottom: 0px;' : !getIsPaysystemsCollapsed }\"\n\t\t>\n\n\t\t\t<div\n\t\t\t\tclass=\"payment-systems-subtitle\"\n\t\t\t\tv-html=\"$Bitrix.Loc.getMessage(\n\t\t\t\t\t'CRM_CFG_TERMINAL_SETTINGS_SECTION_PS_SUBTITLE',\n\t\t\t\t\t{'#MORE_INFO_LINK#': getPaysystemsArticleUrl})\"\n\t\t\t></div>\n\n\t\t\t<div class=\"payment-systems-section-container\">\n\t\t\t\t<div class=\"payment-systems-container\">\n\t\t\t\t\t<div v-if=\"getIsRuZone\" class=\"payment-system-wrapper\">\n\t\t\t\t\t\t<SettingsSection\n\t\t\t\t\t\t\t:title=\"$Bitrix.Loc.getMessage('CRM_CFG_TERMINAL_SETTINGS_SECTION_PS_SBP')\"\n\t\t\t\t\t\t\t:switchable=\"true\"\n\t\t\t\t\t\t\t:active=\"getIsSbpEnabled\"\n\t\t\t\t\t\t\tleftIconClass=\"payment-method-icon-sbp\"\n\t\t\t\t\t\t\tv-on:toggle=\"onRequiredPaysystemToggled(getRequiredPaysystemCodes.sbp)\"\n\t\t\t\t\t\t\tv-on:titleClick=\"openPaysystemSlider(getRequiredPaysystemCodes.sbp)\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div class=\"payment-system-status-container\">\n\t\t\t\t\t\t\t<span v-html=\"getStatusLabel(this.getIsSbpConnected)\"></span>\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tclass=\"payment-system-set\"\n\t\t\t\t\t\t\t\t:class=\"getIsSbpConnected ? 'payment-system-set-connected' : 'payment-system-set-not-connected'\"\n\t\t\t\t\t\t\t\tv-on:click=\"openPaysystemSlider(getRequiredPaysystemCodes.sbp)\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage(this.getIsSbpConnected\n\t\t\t\t\t\t\t\t? 'CRM_CFG_TERMINAL_SETTINGS_SECTION_PS_SET'\n\t\t\t\t\t\t\t\t: 'CRM_CFG_TERMINAL_SETTINGS_SECTION_PS_CONNECT') }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div v-if=\"getIsRuZone\" class=\"payment-system-wrapper\">\n\t\t\t\t\t\t<SettingsSection\n\t\t\t\t\t\t\t:title=\"$Bitrix.Loc.getMessage('CRM_CFG_TERMINAL_SETTINGS_SECTION_PS_SBER_QR')\"\n\t\t\t\t\t\t\t:switchable=\"true\"\n\t\t\t\t\t\t\t:active=\"getIsSberQrEnabled\"\n\t\t\t\t\t\t\tleftIconClass=\"payment-method-icon-sber\"\n\t\t\t\t\t\t\tv-on:toggle=\"onRequiredPaysystemToggled(getRequiredPaysystemCodes.sberQr)\"\n\t\t\t\t\t\t\tv-on:titleClick=\"openPaysystemSlider(getRequiredPaysystemCodes.sberQr)\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div class=\"payment-system-status-container\">\n\t\t\t\t\t\t\t<span v-html=\"getStatusLabel(this.getIsSberQrConnected)\"></span>\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tclass=\"payment-system-set\"\n\t\t\t\t\t\t\t\t:class=\"getIsSberQrConnected ? 'payment-system-set-connected' : 'payment-system-set-not-connected'\"\n\t\t\t\t\t\t\t\tv-on:click=\"openPaysystemSlider(getRequiredPaysystemCodes.sberQr)\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage(this.getIsSberQrConnected\n\t\t\t\t\t\t\t\t? 'CRM_CFG_TERMINAL_SETTINGS_SECTION_PS_SET'\n\t\t\t\t\t\t\t\t: 'CRM_CFG_TERMINAL_SETTINGS_SECTION_PS_CONNECT') }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"getAvailablePaysystems.length > 0\"\n\t\t\t\t\t\tv-for=\"paysystem in getAvailablePaysystems\"\n\t\t\t\t\t\tclass=\"payment-system-wrapper\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<SettingsSection\n\t\t\t\t\t\t\t:key=\"paysystem.type\"\n\t\t\t\t\t\t\t:title=\"paysystem.title\"\n\t\t\t\t\t\t\t:switchable=\"paysystem.id > 0\"\n\t\t\t\t\t\t\t:active=\"paysystem.id > 0 && !getTerminalDisabledPaysystems.includes(paysystem.id)\"\n\t\t\t\t\t\t\tv-on:toggle=\"onPaysystemToggled(paysystem.id)\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div class=\"payment-system-status-container\">\n\t\t\t\t\t\t\t<span v-html=\"getStatusLabel(paysystem.isConnected)\"></span>\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tclass=\"payment-system-set\"\n\t\t\t\t\t\t\t\t:class=\"paysystem.isConnected ? 'payment-system-set-connected' : 'payment-system-set-not-connected'\"\n\t\t\t\t\t\t\t\tv-on:click=\"openPaysystemSlider(getRequiredPaysystemCodes.rest, paysystem.path)\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage(paysystem.isConnected\n\t\t\t\t\t\t\t\t? 'CRM_CFG_TERMINAL_SETTINGS_SECTION_PS_SET'\n\t\t\t\t\t\t\t\t: 'CRM_CFG_TERMINAL_SETTINGS_SECTION_PS_CONNECT') }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"payment-system-wrapper\">\n\t\t\t\t\t\t<SettingsSection\n\t\t\t\t\t\t\t:title=\"$Bitrix.Loc.getMessage('CRM_CFG_TERMINAL_SETTINGS_SECTION_PS_LINK_PAYMENT')\"\n\t\t\t\t\t\t\t:switchable=\"true\"\n\t\t\t\t\t\t\t:active=\"getIsLinkPaymentEnabled\"\n\t\t\t\t\t\t\tv-on:toggle=\"onLinkPaymentToggled()\"\n\t\t\t\t\t\t\t:hint=\"getLinkPaymentHint\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div class=\"payment-system-status-container\">\n\t\t\t\t\t\t\t<span v-html=\"getStatusLabel(this.getIsAnyPaysystemActive)\"></span>\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tclass=\"payment-system-set payment-system-set-connected\"\n\t\t\t\t\t\t\t\tv-on:click=\"openPaysystemSlider(getRequiredPaysystemCodes.paysystemPanel)\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('CRM_CFG_TERMINAL_SETTINGS_SECTION_PS_PAYMENT_METHOD') }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"terminal-image-wrapper\"></div>\n\t\t\t</div>\n\n\t\t</SettingsContainer>\n\t`,\n};\n","import { mapGetters } from 'ui.vue3.vuex';\n\nexport const ButtonsPanel = {\n\tmethods: {\n\t\tsave()\n\t\t{\n\t\t\tthis.$Bitrix.eventEmitter.emit('crm:terminal:onSettingsSave');\n\t\t},\n\t\tcancel()\n\t\t{\n\t\t\tthis.$Bitrix.eventEmitter.emit('crm:terminal:onSettingsCancel');\n\t\t},\n\t},\n\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tisSettingsChanged: 'isChanged',\n\t\t\tisSaving: 'isSaving',\n\t\t}),\n\n\t\tbuttonsPanelClass()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'ui-button-panel-wrapper': true,\n\t\t\t\t'ui-pinner': true,\n\t\t\t\t'ui-pinner-bottom': true,\n\t\t\t\t'ui-pinner-full-width': true,\n\t\t\t\t'ui-button-panel-wrapper-hide': !this.isSettingsChanged,\n\t\t\t};\n\t\t},\n\t\tsaveButtonClasses()\n\t\t{\n\t\t\treturn {\n\t\t\t\t'ui-btn': true,\n\t\t\t\t'ui-btn-success': true,\n\t\t\t\t'ui-btn-wait': this.isSaving,\n\t\t\t};\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<div :class=\"buttonsPanelClass\">\n\t\t\t<div class=\"ui-button-panel ui-button-panel-align-center\">\n\t\t\t\t<button\n\t\t\t\t\t@click=\"save\"\n\t\t\t\t\t:class=\"saveButtonClasses\"\n\t\t\t\t>\n\t\t\t\t\t{{ $Bitrix.Loc.getMessage('CRM_CFG_TERMINAL_SETTINGS_SAVE_BTN') }}\n\t\t\t\t</button>\n\t\t\t\t<a\n\t\t\t\t\t@click=\"cancel\"\n\t\t\t\t\tclass=\"ui-btn ui-btn-link\"\n\t\t\t\t>\n\t\t\t\t\t{{ $Bitrix.Loc.getMessage('CRM_CFG_TERMINAL_SETTINGS_CANCEL_BTN') }}\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","// @flow\n\nimport { MessageBox } from 'ui.dialogs.messagebox';\nimport type { TerminalSettingsProps, NotificationLink, SmsService, TerminalPaysystem } from './types';\nimport { Type, ajax } from 'main.core';\nimport { BitrixVue, VueCreateAppResult } from 'ui.vue3';\nimport { SmsSettings } from './components/sms/sms-settings';\nimport { PaymentMethodsSettings } from './components/payment-systems/payment-methods-settings';\nimport { ButtonsPanel } from './components/buttons-panel';\nimport { RequiredPaysystemCodes } from './const/required-paysystem-codes';\nimport { createStore, mapGetters, mapMutations, Store } from 'ui.vue3.vuex';\nimport '../css/app.css';\nimport 'ui.notification';\n\ntype AppProps = {\n\trootNodeId: string,\n\tterminalSettings: TerminalSettingsProps,\n};\n\nexport class App\n{\n\t#application: VueCreateAppResult;\n\trootNode: HTMLElement;\n\tterminalSettings: TerminalSettingsProps;\n\n\tconstructor(props: AppProps) {\n\t\tthis.rootNode = document.getElementById(props.rootNodeId);\n\t\tthis.terminalSettings = props.terminalSettings;\n\n\t\tthis.store = this.#initStore(props.terminalSettings);\n\t}\n\n\t#initStore(terminalSettings: TerminalSettingsProps): Store\n\t{\n\t\tconst terminalSettingsStore = {\n\t\t\tstate(): Object\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\t...terminalSettings,\n\t\t\t\t\tisSaving: false,\n\t\t\t\t\tchangedValues: {},\n\t\t\t\t};\n\t\t\t},\n\n\t\t\tgetters: {\n\t\t\t\tisChanged(state): boolean\n\t\t\t\t{\n\t\t\t\t\treturn Object.keys(state.changedValues).length > 0;\n\t\t\t\t},\n\n\t\t\t\tisSmsSendingActive(state): boolean\n\t\t\t\t{\n\t\t\t\t\tif (state.changedValues.isSmsSendingEnabled !== undefined)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn state.changedValues.isSmsSendingEnabled;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn state.isSmsSendingEnabled;\n\t\t\t\t},\n\n\t\t\t\tisAnyServiceEnabled(state): boolean\n\t\t\t\t{\n\t\t\t\t\treturn (state.activeSmsServices.length > 0 || state.isNotificationsEnabled);\n\t\t\t\t},\n\n\t\t\t\tisNotificationsEnabled(state): boolean\n\t\t\t\t{\n\t\t\t\t\treturn state.isNotificationsEnabled;\n\t\t\t\t},\n\n\t\t\t\tgetPaymentSlipLinkScheme(state): string\n\t\t\t\t{\n\t\t\t\t\treturn state.paymentSlipLinkScheme;\n\t\t\t\t},\n\n\t\t\t\tgetNotificationsLink(state): ?NotificationLink\n\t\t\t\t{\n\t\t\t\t\tif (Type.isObject(state.connectNotificationsLink))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn state.connectNotificationsLink;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn null;\n\t\t\t\t},\n\n\t\t\t\tisNotificationAvailableToConnect(state): string\n\t\t\t\t{\n\t\t\t\t\treturn this.getNotificationsLink(state) !== null;\n\t\t\t\t},\n\n\t\t\t\tgetServiceLink(state): string\n\t\t\t\t{\n\t\t\t\t\tif (Type.isString(state.connectServiceLink))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn state.connectServiceLink;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn '';\n\t\t\t\t},\n\n\t\t\t\tgetSelectedService(state): SmsService\n\t\t\t\t{\n\t\t\t\t\tif (Type.isString(state.changedValues.selectedServiceId))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn state.activeSmsServices.find((element) => element.ID === state.changedValues.selectedServiceId);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn state.activeSmsServices.find((element) => element.SELECTED);\n\t\t\t\t},\n\n\t\t\t\tgetIsAnyPaysystemEnabled(state, getters): boolean\n\t\t\t\t{\n\t\t\t\t\tlet hasEnabledPaysystem = false;\n\t\t\t\t\tfor (const paysystem: Object of getters.getAvailablePaysystems)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (!getters.getTerminalDisabledPaysystems.includes(paysystem.id))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thasEnabledPaysystem = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn getters.getIsSbpEnabled\n\t\t\t\t\t\t|| getters.getIsSberQrEnabled\n\t\t\t\t\t\t|| getters.getIsLinkPaymentEnabled\n\t\t\t\t\t\t|| hasEnabledPaysystem\n\t\t\t\t\t;\n\t\t\t\t},\n\n\t\t\t\tgetActiveSmsServices(state): Array<SmsService>\n\t\t\t\t{\n\t\t\t\t\treturn state.activeSmsServices;\n\t\t\t\t},\n\n\t\t\t\tgetChangedValues(state): Object\n\t\t\t\t{\n\t\t\t\t\treturn state.changedValues;\n\t\t\t\t},\n\n\t\t\t\tisSaving(state): boolean\n\t\t\t\t{\n\t\t\t\t\treturn state.isSaving;\n\t\t\t\t},\n\n\t\t\t\tgetAvailablePaysystems(state): Array<TerminalPaysystem>\n\t\t\t\t{\n\t\t\t\t\treturn state.availablePaysystems;\n\t\t\t\t},\n\n\t\t\t\tgetTerminalDisabledPaysystems(state): Array<number>\n\t\t\t\t{\n\t\t\t\t\treturn state.terminalDisabledPaysystems;\n\t\t\t\t},\n\n\t\t\t\tgetIsLinkPaymentEnabled(state): boolean\n\t\t\t\t{\n\t\t\t\t\treturn state.isLinkPaymentEnabled;\n\t\t\t\t},\n\n\t\t\t\tgetPaysystemPanelPath(state): string\n\t\t\t\t{\n\t\t\t\t\treturn state.paysystemPanelPath;\n\t\t\t\t},\n\n\t\t\t\tgetIsAnyPaysystemActive(state): boolean\n\t\t\t\t{\n\t\t\t\t\treturn state.isAnyPaysystemActive;\n\t\t\t\t},\n\n\t\t\t\tgetIsSbpEnabled(state): boolean\n\t\t\t\t{\n\t\t\t\t\treturn state.isSbpEnabled;\n\t\t\t\t},\n\n\t\t\t\tgetSbpConnectPath(state): boolean\n\t\t\t\t{\n\t\t\t\t\treturn state.sbpConnectPath;\n\t\t\t\t},\n\n\t\t\t\tgetIsSbpConnected(state): boolean\n\t\t\t\t{\n\t\t\t\t\treturn state.isSbpConnected;\n\t\t\t\t},\n\n\t\t\t\tgetIsSberQrEnabled(state): boolean\n\t\t\t\t{\n\t\t\t\t\treturn state.isSberQrEnabled;\n\t\t\t\t},\n\n\t\t\t\tgetSberQrConnectPath(state): boolean\n\t\t\t\t{\n\t\t\t\t\treturn state.sberQrConnectPath;\n\t\t\t\t},\n\n\t\t\t\tgetIsSberQrConnected(state): boolean\n\t\t\t\t{\n\t\t\t\t\treturn state.isSberQrConnected;\n\t\t\t\t},\n\n\t\t\t\tgetIsPaysystemsCollapsed(state): boolean\n\t\t\t\t{\n\t\t\t\t\treturn state.isPaysystemsCollapsed;\n\t\t\t\t},\n\n\t\t\t\tgetPaysystemsArticleUrl(state): boolean\n\t\t\t\t{\n\t\t\t\t\treturn state.paysystemsArticleUrl;\n\t\t\t\t},\n\n\t\t\t\tgetIsSmsCollapsed(state): boolean\n\t\t\t\t{\n\t\t\t\t\treturn state.isSmsCollapsed;\n\t\t\t\t},\n\n\t\t\t\tgetIsRuZone(state): boolean\n\t\t\t\t{\n\t\t\t\t\treturn state.isRuZone;\n\t\t\t\t},\n\t\t\t},\n\n\t\t\tmutations: {\n\t\t\t\tsetSmsSendingActive(state, value): void\n\t\t\t\t{\n\t\t\t\t\tif (state.changedValues.isSmsSendingEnabled !== undefined && value === state.isSmsSendingEnabled)\n\t\t\t\t\t{\n\t\t\t\t\t\tdelete state.changedValues.isSmsSendingEnabled;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.isChanged = true;\n\t\t\t\t\t\tstate.changedValues.isSmsSendingEnabled = value;\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tselectSMSService(state, value): void\n\t\t\t\t{\n\t\t\t\t\tif (state.activeSmsServices.find((element) => element.SELECTED).ID === value)\n\t\t\t\t\t{\n\t\t\t\t\t\tdelete state.changedValues.selectedServiceId;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.changedValues.selectedServiceId = value;\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tsetTerminalPaysystemDisabled(state, paysystemId): void\n\t\t\t\t{\n\t\t\t\t\tif (!Array.isArray(state.changedValues.terminalDisabledPaysystems))\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.changedValues.terminalDisabledPaysystems = state.terminalDisabledPaysystems;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (state.changedValues.terminalDisabledPaysystems.includes(paysystemId))\n\t\t\t\t\t{\n\t\t\t\t\t\tconst currentDisabledPs = state.changedValues.terminalDisabledPaysystems ?? [];\n\t\t\t\t\t\tstate.changedValues.terminalDisabledPaysystems = currentDisabledPs.filter((ps) => ps !== paysystemId);\n\t\t\t\t\t\tstate.terminalDisabledPaysystems = state.changedValues.terminalDisabledPaysystems;\n\t\t\t\t\t\tif (state.changedValues.terminalDisabledPaysystems.length === 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstate.changedValues.terminalPaysystemsAllEnabled = true;\n\t\t\t\t\t\t\tstate.terminalPaysystemsAllEnabled = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tstate.isChanged = true;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.isChanged = true;\n\t\t\t\t\t\tif (state.changedValues.terminalDisabledPaysystems)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstate.changedValues.terminalDisabledPaysystems.push(paysystemId);\n\t\t\t\t\t\t\tstate.terminalDisabledPaysystems.push(paysystemId);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstate.changedValues.terminalDisabledPaysystems = [paysystemId];\n\t\t\t\t\t\t\tstate.terminalDisabledPaysystems = [paysystemId];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdelete state.changedValues.terminalPaysystemsAllEnabled;\n\t\t\t\t\t\tdelete state.terminalPaysystemsAllEnabled;\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tsetRequiredPaysystemDisabled(state, paysystemCode): void\n\t\t\t\t{\n\t\t\t\t\tlet paysystemKey;\n\t\t\t\t\tswitch (paysystemCode)\n\t\t\t\t\t{\n\t\t\t\t\t\tcase RequiredPaysystemCodes.sbp:\n\t\t\t\t\t\t\tpaysystemKey = 'isSbpEnabled';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase RequiredPaysystemCodes.sberQr:\n\t\t\t\t\t\t\tpaysystemKey = 'isSberQrEnabled';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tpaysystemKey = null;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!paysystemKey)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tstate[paysystemKey] = !state[paysystemKey];\n\t\t\t\t\tstate.changedValues[paysystemKey] = state[paysystemKey];\n\t\t\t\t},\n\n\t\t\t\tsetLinkPaymentEnabled(state, value): void\n\t\t\t\t{\n\t\t\t\t\tif (state.changedValues.isLinkPaymentEnabled !== undefined && value === state.isLinkPaymentEnabled)\n\t\t\t\t\t{\n\t\t\t\t\t\tdelete state.changedValues.isLinkPaymentEnabled;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.isChanged = true;\n\t\t\t\t\t\tstate.changedValues.isLinkPaymentEnabled = value;\n\t\t\t\t\t\tstate.isLinkPaymentEnabled = value;\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tsetSaving(state, value): void\n\t\t\t\t{\n\t\t\t\t\tif (Type.isBoolean(value))\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.isSaving = value;\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tupdateServicesList(state, value): void\n\t\t\t\t{\n\t\t\t\t\tstate.activeSmsServices = value;\n\t\t\t\t},\n\n\t\t\t\tupdateNotificationsEnabled(state, value): void\n\t\t\t\t{\n\t\t\t\t\tstate.isNotificationsEnabled = value;\n\t\t\t\t},\n\n\t\t\t\tupdateSbpConnectPath(state, value): void\n\t\t\t\t{\n\t\t\t\t\tstate.sbpConnectPath = value;\n\t\t\t\t},\n\n\t\t\t\tupdateSberQrConnectPath(state, value): void\n\t\t\t\t{\n\t\t\t\t\tstate.sberQrConnectPath = value;\n\t\t\t\t},\n\n\t\t\t\tupdateIsSbpConnected(state, value): void\n\t\t\t\t{\n\t\t\t\t\tstate.isSbpConnected = value;\n\t\t\t\t},\n\n\t\t\t\tupdateIsSberQrConnected(state, value): void\n\t\t\t\t{\n\t\t\t\t\tstate.isSberQrConnected = value;\n\t\t\t\t},\n\n\t\t\t\tupdateIsPaysystemsCollapsed(state, value): void\n\t\t\t\t{\n\t\t\t\t\tstate.isPaysystemsCollapsed = value;\n\t\t\t\t},\n\n\t\t\t\tupdateIsSmsCollapsed(state, value): void\n\t\t\t\t{\n\t\t\t\t\tstate.isSmsCollapsed = value;\n\t\t\t\t},\n\n\t\t\t\tupdateIsAnyPaysystemActive(state, value): void\n\t\t\t\t{\n\t\t\t\t\tstate.isAnyPaysystemActive = value;\n\t\t\t\t},\n\n\t\t\t\tupdateAvailablePaysystems(state, value): void\n\t\t\t\t{\n\t\t\t\t\tstate.availablePaysystems = value;\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\n\t\treturn createStore(terminalSettingsStore);\n\t}\n\n\tattachTemplate(): void\n\t{\n\t\tthis.#application = BitrixVue.createApp({\n\t\t\tcomponents: {\n\t\t\t\tSmsSettings,\n\t\t\t\tPaymentMethodsSettings,\n\t\t\t\tButtonsPanel,\n\t\t\t},\n\n\t\t\tcomputed: {\n\t\t\t\t...mapGetters([\n\t\t\t\t\t'isChanged',\n\t\t\t\t\t'isSaving',\n\t\t\t\t\t'getChangedValues',\n\t\t\t\t\t'getIsPaysystemsCollapsed',\n\t\t\t\t\t'getIsSbpEnabled',\n\t\t\t\t\t'getIsSberQrEnabled',\n\t\t\t\t\t'getIsLinkPaymentEnabled',\n\t\t\t\t\t'getAvailablePaysystems',\n\t\t\t\t\t'getTerminalDisabledPaysystems',\n\t\t\t\t\t'getIsAnyPaysystemEnabled',\n\t\t\t\t]),\n\t\t\t},\n\n\t\t\tmounted()\n\t\t\t{\n\t\t\t\tthis.$Bitrix.eventEmitter.subscribe('crm:terminal:onSettingsSave', this.onSettingsSave);\n\t\t\t\tthis.$Bitrix.eventEmitter.subscribe('crm:terminal:onSettingsCancel', this.onSettingsCancel);\n\t\t\t},\n\n\t\t\tbeforeUnmount()\n\t\t\t{\n\t\t\t\tthis.$Bitrix.eventEmitter.unsubscribe('crm:terminal:onSettingsSave');\n\t\t\t\tthis.$Bitrix.eventEmitter.unsubscribe('crm:terminal:onSettingsCancel');\n\t\t\t},\n\n\t\t\tmethods: {\n\t\t\t\t...mapMutations([\n\t\t\t\t\t'setSaving',\n\t\t\t\t]),\n\n\t\t\t\tvalidateChangedValues(): Object\n\t\t\t\t{\n\t\t\t\t\tconst values = this.getChangedValues;\n\t\t\t\t\tif (values && Object.keys(values).length > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn values;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn {};\n\t\t\t\t},\n\n\t\t\t\tonSettingsSave()\n\t\t\t\t{\n\t\t\t\t\tif (this.getIsAnyPaysystemEnabled)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.save();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tMessageBox.confirm(\n\t\t\t\t\t\t\tthis.$Bitrix.Loc.getMessage('CRM_CFG_TERMINAL_SETTINGS_SAVING_CONFIRM_TITLE'),\n\t\t\t\t\t\t\t(messageBox) => messageBox.close(),\n\t\t\t\t\t\t\tthis.$Bitrix.Loc.getMessage('CRM_CFG_TERMINAL_SETTINGS_SAVING_CONFIRM_OK'),\n\t\t\t\t\t\t\t(messageBox) => {\n\t\t\t\t\t\t\t\tmessageBox.close();\n\t\t\t\t\t\t\t\tthis.save();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tthis.$Bitrix.Loc.getMessage('CRM_CFG_TERMINAL_SETTINGS_SAVING_CONFIRM_SAVE_AND_CLOSE'),\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tsave()\n\t\t\t\t{\n\t\t\t\t\tif (!this.isChanged || this.isSaving)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthis.setSaving(true);\n\t\t\t\t\tajax\n\t\t\t\t\t\t.runComponentAction('bitrix:crm.config.terminal.settings', 'saveSettings', {\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tchangedValues: this.validateChangedValues(),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}).then(\n\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\tthis.setSaving(false);\n\t\t\t\t\t\t\t\tBX.SidePanel.Instance.close();\n\t\t\t\t\t\t\t\ttop.BX.UI.Notification.Center.notify({\n\t\t\t\t\t\t\t\t\tcontent: this.$Bitrix.Loc.getMessage('CRM_CFG_TERMINAL_SETTINGS_ON_SAVE_SUCCESS'),\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\tthis.setSaving(false);\n\t\t\t\t\t\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\t\t\t\t\t\tcontent: this.$Bitrix.Loc.getMessage('CRM_CFG_TERMINAL_SETTINGS_ON_SAVE_ERROR'),\n\t\t\t\t\t\t\t\t\twidth: 350,\n\t\t\t\t\t\t\t\t\tautoHideDelay: 4000,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t);\n\t\t\t\t},\n\n\t\t\t\tonSettingsCancel()\n\t\t\t\t{\n\t\t\t\t\tBX.SidePanel.Instance.close();\n\t\t\t\t},\n\t\t\t},\n\n\t\t\t// language=Vue\n\t\t\ttemplate: `\n\t\t\t\t<div style=\"position: relative; overflow: hidden;\">\n\t\t\t\t\t<div class=\"ui-side-panel-wrap-workarea payment-methods-settings-wrapper\">\n\t\t\t\t\t\t<PaymentMethodsSettings/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"terminal-image\"\n\t\t\t\t\t\tv-bind:class=\"{ 'terminal-image-collapsed': this.getIsPaysystemsCollapsed }\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"terminal-image-title\">{{ $Bitrix.Loc.getMessage('CRM_CFG_TERMINAL_SETTINGS_IMAGE_TITLE') }}</div>\n\t\t\t\t\t\t<div class=\"terminal-image-paysystems-container\">\n\t\t\t\t\t\t\t<div v-if=\"getIsSbpEnabled\" class=\"terminal-image-paysystem terminal-image-paysystem-sbp\">\n\t\t\t\t\t\t\t\t<span>{{ $Bitrix.Loc.getMessage('CRM_CFG_TERMINAL_SETTINGS_SECTION_PS_SBP') }}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div v-if=\"getIsSberQrEnabled\" class=\"terminal-image-paysystem terminal-image-paysystem-sber-qr\">\n\t\t\t\t\t\t\t\t<span>{{ $Bitrix.Loc.getMessage('CRM_CFG_TERMINAL_SETTINGS_SECTION_PS_SBER_QR') }}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<template v-if=\"getAvailablePaysystems.length > 0\" v-for=\"paysystem in getAvailablePaysystems\">\n\t\t\t\t\t\t\t\t<div class=\"terminal-image-paysystem terminal-image-paysystem-wallet\" v-if=\"getTerminalDisabledPaysystems.indexOf(paysystem.id) === -1\">\n\t\t\t\t\t\t\t\t\t<span>{{ paysystem.title }}</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<div v-if=\"getIsLinkPaymentEnabled\" class=\"terminal-image-paysystem terminal-image-paysystem-link\">\n\t\t\t\t\t\t\t\t<span>{{ $Bitrix.Loc.getMessage('CRM_CFG_TERMINAL_SETTINGS_SECTION_PS_LINK_PAYMENT') }}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"terminal-image-no-paysystems-stub\" v-if=\"!getIsAnyPaysystemEnabled\">\n\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('CRM_CFG_TERMINAL_SETTINGS_SECTION_PS_NO_PAY_METHODS') }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"ui-side-panel-wrap-workarea\" style=\"margin-bottom: 70px;\">\n\t\t\t\t\t<SmsSettings/>\n\t\t\t\t</div>\n\n\t\t\t\t<ButtonsPanel/>\n\t\t\t`,\n\t\t});\n\n\t\tthis.#application.use(this.store);\n\t\tthis.#application.mount(this.rootNode);\n\t}\n}\n"],"names":["SettingsContainer","props","title","String","iconStyle","collapsed","Boolean","methods","onTitleClicked","$emit","template","SettingsSection","data","isEnabled","active","switcher","mounted","BX","UI","Switcher","node","$refs","size","checked","handlers","toggled","onSwitcherToggle","bind","Hint","init","onTitleClick","switchable","type","hint","leftIconClass","Sms","SmsProviderSelect","isListShowed","Event","document","mapGetters","mapMutations","switchService","serviceId","selectSMSService","switchVisibility","openSmsServicesSlider","options","cacheable","allowChangeHistory","requestMethod","width","events","onClose","SidePanel","Instance","open","getServiceLink","computed","getListClassname","SmsSettingsSection","popup","components","Notification","getSectionTitle","$Bitrix","Loc","getMessage","getSectionHint","replacements","getNotificationConnectHint","onServiceConnectSliderClosed","ajax","runComponentAction","then","response","status","isUCNEnabled","updateNotificationsEnabled","updateServicesList","activeSmsServices","error","console","onSectionToggled","setSmsSendingActive","isSmsSendingActive","getSmsMessage","link","getPaymentSlipLinkScheme","text","Text","encode","replaceAll","getSmsProviderMessage","providerSelect","onSmsMouseenter","event","target","message","destroy","Popup","onPopupClose","darkMode","content","offsetLeft","offsetWidth","show","onSmsMouseleave","onNotificationsConnectLinkClick","notificationLink","getNotificationsLink","value","top","InfoHelper","onProviderSmsNotificationClick","SmsSettings","isSettingsChanged","isSaving","getIsSmsCollapsed","updateIsSmsCollapsed","RequiredPaysystemCodes","Object","freeze","sbp","sberQr","rest","paysystemPanel","PaymentMethodsSettings","getAvailablePaysystems","getTerminalDisabledPaysystems","getIsLinkPaymentEnabled","getIsSbpEnabled","getIsSberQrEnabled","getIsSbpConnected","getIsSberQrConnected","getIsRuZone","getSbpConnectPath","getSberQrConnectPath","getIsAnyPaysystemActive","getPaysystemPanelPath","getIsPaysystemsCollapsed","getPaysystemsArticleUrl","getRequiredPaysystemCodes","getLinkPaymentHint","onPaysystemToggled","paysystemId","setTerminalPaysystemDisabled","onRequiredPaysystemToggled","paysystemCode","setRequiredPaysystemDisabled","onLinkPaymentToggled","setLinkPaymentEnabled","openPaysystemSlider","psMode","onPaysystemSliderClosed","url","getPaysystemUrl","updateSbpConnectPath","updateSberQrConnectPath","sberbankQr","updateIsSbpConnected","isSbpConnected","updateIsSberQrConnected","isSberQrConnected","updateIsAnyPaysystemActive","isAnyPaysystemActive","updateAvailablePaysystems","availablePaysystems","getStatusLabel","connected","toUpperCase","label","Label","color","LabelColor","LIGHT_GREEN","LIGHT","LabelSize","LG","fill","render","outerHTML","updateIsPaysystemsCollapsed","ButtonsPanel","save","eventEmitter","emit","cancel","buttonsPanelClass","saveButtonClasses","App","rootNode","getElementById","rootNodeId","terminalSettings","store","BitrixVue","createApp","subscribe","onSettingsSave","onSettingsCancel","beforeUnmount","unsubscribe","validateChangedValues","values","getChangedValues","keys","length","getIsAnyPaysystemEnabled","MessageBox","confirm","messageBox","close","isChanged","setSaving","changedValues","Center","notify","autoHideDelay","use","mount","terminalSettingsStore","state","getters","isSmsSendingEnabled","undefined","isAnyServiceEnabled","isNotificationsEnabled","paymentSlipLinkScheme","Type","isObject","connectNotificationsLink","isNotificationAvailableToConnect","isString","connectServiceLink","getSelectedService","selectedServiceId","find","element","ID","SELECTED","hasEnabledPaysystem","paysystem","includes","id","getActiveSmsServices","terminalDisabledPaysystems","isLinkPaymentEnabled","paysystemPanelPath","isSbpEnabled","sbpConnectPath","isSberQrEnabled","sberQrConnectPath","isPaysystemsCollapsed","paysystemsArticleUrl","isSmsCollapsed","isRuZone","mutations","Array","isArray","currentDisabledPs","filter","ps","terminalPaysystemsAllEnabled","push","paysystemKey","isBoolean","createStore"],"mappings":"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"}