this.BX=this.BX||{};(function(e,t,i,a,n,s,l,r,o,c,d,u,v,p,h,b,g,_,T,E,f,S,I){"use strict";function w(e,t,i){m(e,t);t.set(e,i)}function m(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var N=new WeakMap;var H=new WeakMap;var P=new WeakMap;var A=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;babelHelpers.classCallCheck(this,e);w(this,N,{writable:true,value:[]});w(this,H,{writable:true,value:"settings"});w(this,P,{writable:true,value:null});babelHelpers.classPrivateFieldSet(this,P,t)}babelHelpers.createClass(e,[{key:"addEvent",value:function e(t,i){if(babelHelpers.classPrivateFieldGet(this,P).isBitrix24){babelHelpers.classPrivateFieldGet(this,N)[t]=i}}},{key:"send",value:function e(){if(!babelHelpers.classPrivateFieldGet(this,P).isBitrix24){return}if(Object.keys(babelHelpers.classPrivateFieldGet(this,N)).length>0){I.ajax.runComponentAction("bitrix:intranet.settings","analytic",{mode:"class",data:{data:babelHelpers.classPrivateFieldGet(this,N)}}).then((function(){}))}babelHelpers.classPrivateFieldSet(this,N,[])}},{key:"addEventOpenSettings",value:function e(){var i,a,n,s;var l={event:L.OPEN,tool:babelHelpers.classPrivateFieldGet(this,H),category:"slider",p1:((i=babelHelpers.classPrivateFieldGet(this,P))===null||i===void 0?void 0:i.isAdmin)!==false?C.ADMIN:C.NOT_ADMIN,c_section:(a=(n=babelHelpers.classPrivateFieldGet(this,P))===null||n===void 0?void 0:n.analyticContext)!==null&&a!==void 0?a:"",c_element:(s=babelHelpers.classPrivateFieldGet(this,P))===null||s===void 0?void 0:s.locationName};t.sendData(l)}},{key:"addEventOpenTariffSelector",value:function e(t){var i;var a={event:"open_tariff",tool:babelHelpers.classPrivateFieldGet(this,H),category:t,p1:((i=babelHelpers.classPrivateFieldGet(this,P))===null||i===void 0?void 0:i.isAdmin)!==false?C.ADMIN:C.NOT_ADMIN};this.addEvent(t+"_open_tariff",a)}},{key:"addEventOpenHint",value:function e(t){var i;var a={event:"open_hint",tool:babelHelpers.classPrivateFieldGet(this,H),category:t,p1:((i=babelHelpers.classPrivateFieldGet(this,P))===null||i===void 0?void 0:i.isAdmin)!==false?C.ADMIN:C.NOT_ADMIN};this.addEvent(t+"_open_hint",a)}},{key:"addEventStartPagePage",value:function e(i){var a;var n={event:L.START_PAGE,tool:babelHelpers.classPrivateFieldGet(this,H),category:i,p1:((a=babelHelpers.classPrivateFieldGet(this,P))===null||a===void 0?void 0:a.isAdmin)!==false?C.ADMIN:C.NOT_ADMIN};t.sendData(n)}},{key:"addEventChangePage",value:function e(i){var a;var n={event:L.VIEW,tool:babelHelpers.classPrivateFieldGet(this,H),category:i,p1:((a=babelHelpers.classPrivateFieldGet(this,P))===null||a===void 0?void 0:a.isAdmin)!==false?C.ADMIN:C.NOT_ADMIN};t.sendData(n)}},{key:"addEventToggleTools",value:function e(t,i){var a,n;var s="onoff_tools";var l={event:s,tool:babelHelpers.classPrivateFieldGet(this,H),category:"tools",type:t,c_element:(a=babelHelpers.classPrivateFieldGet(this,P))===null||a===void 0?void 0:a.locationName,p1:((n=babelHelpers.classPrivateFieldGet(this,P))===null||n===void 0?void 0:n.isAdmin)!==false?C.ADMIN:C.NOT_ADMIN,p2:i?R.ON:R.OFF};this.addEvent("tools"+t+"_"+s,l)}},{key:"addEventToggle2fa",value:function e(t){var i;var a="2fa_onoff";var n={event:a,tool:babelHelpers.classPrivateFieldGet(this,H),category:"security",p1:((i=babelHelpers.classPrivateFieldGet(this,P))===null||i===void 0?void 0:i.isAdmin)!==false?C.ADMIN:C.NOT_ADMIN,p2:t?R.ON:R.OFF};this.addEvent("security_"+a,n)}},{key:"addEventConfigPortal",value:function e(t){var i={event:t,tool:babelHelpers.classPrivateFieldGet(this,H),category:"portal"};this.addEvent("portal_"+t,i)}},{key:"addEventConfigEmployee",value:function e(t,i){var a;var n={event:t,tool:babelHelpers.classPrivateFieldGet(this,H),category:"employee",p1:((a=babelHelpers.classPrivateFieldGet(this,P))===null||a===void 0?void 0:a.isAdmin)!==false?C.ADMIN:C.NOT_ADMIN,p2:i?R.ON:R.OFF};this.addEvent("employee_"+t,n)}},{key:"addEventConfigConfiguration",value:function e(t,i){var a;var n={event:t,tool:babelHelpers.classPrivateFieldGet(this,H),category:"configuration",p1:((a=babelHelpers.classPrivateFieldGet(this,P))===null||a===void 0?void 0:a.isAdmin)!==false?C.ADMIN:C.NOT_ADMIN,p2:i?R.ON:R.OFF};this.addEvent("configuration_"+t,n)}},{key:"addEventConfigRequisite",value:function e(i){var a,n;var s={event:i,tool:babelHelpers.classPrivateFieldGet(this,H),category:"requisite",c_element:(a=babelHelpers.classPrivateFieldGet(this,P))===null||a===void 0?void 0:a.locationName,p1:((n=babelHelpers.classPrivateFieldGet(this,P))===null||n===void 0?void 0:n.isAdmin)!==false?C.ADMIN:C.NOT_ADMIN};t.sendData(s)}}]);return e}();var y=function e(){babelHelpers.classCallCheck(this,e)};babelHelpers.defineProperty(y,"TOOLS","tools");babelHelpers.defineProperty(y,"SECURITY","security");babelHelpers.defineProperty(y,"AI","ai");babelHelpers.defineProperty(y,"PORTAL","portal");babelHelpers.defineProperty(y,"EMPLOYEE","employee");babelHelpers.defineProperty(y,"COMMUNICATION","communication");babelHelpers.defineProperty(y,"REQUISITE","requisite");babelHelpers.defineProperty(y,"SCHEDULE","schedule");babelHelpers.defineProperty(y,"CONFIGURATION","configuration");var L=function e(){babelHelpers.classCallCheck(this,e)};babelHelpers.defineProperty(L,"OPEN","open_setting");babelHelpers.defineProperty(L,"START_PAGE","start_page");babelHelpers.defineProperty(L,"VIEW","view");babelHelpers.defineProperty(L,"TFA","2fa_onoff");babelHelpers.defineProperty(L,"CHANGE_PORTAL_NAME","change_portal_name");babelHelpers.defineProperty(L,"CHANGE_PORTAL_LOGO","change_portal_logo");babelHelpers.defineProperty(L,"CHANGE_PORTAL_SITE","change_portal_site");babelHelpers.defineProperty(L,"CHANGE_PORTAL_THEME","change_portal_theme");babelHelpers.defineProperty(L,"CHANGE_MARKET","change_market");babelHelpers.defineProperty(L,"CHANGE_PAY_TARIFF","change_pay_tariff");babelHelpers.defineProperty(L,"CREATE_CARD","create_vizitka");babelHelpers.defineProperty(L,"EDIT_CARD","edit_vizitka");babelHelpers.defineProperty(L,"COPY_LINK_CARD","copylink_vizitka");babelHelpers.defineProperty(L,"OPEN_ADD_COMPANY","open_add_company");babelHelpers.defineProperty(L,"CHANGE_QUICK_REG","change_quick_reg");babelHelpers.defineProperty(L,"CHANGE_REG_ALL","change_reg_all");babelHelpers.defineProperty(L,"CHANGE_EXTRANET_INVITE","change_extranet_invite");var C=function e(){babelHelpers.classCallCheck(this,e)};babelHelpers.defineProperty(C,"ADMIN","isAdmin_Y");babelHelpers.defineProperty(C,"NOT_ADMIN","isAdmin_N");var R=function e(){babelHelpers.classCallCheck(this,e)};babelHelpers.defineProperty(R,"ON","turn_on");babelHelpers.defineProperty(R,"OFF","turn_off");var k;function F(e,t,i){G(e,t);t.set(e,i)}function G(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var O=new WeakMap;var M=new WeakMap;var D=function(e){babelHelpers.inherits(t,e);function t(e){var i;var a;babelHelpers.classCallCheck(this,t);a=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));F(babelHelpers.assertThisInitialized(a),O,{writable:true,value:void 0});F(babelHelpers.assertThisInitialized(a),M,{writable:true,value:void 0});a.setEventNamespace("BX.Intranet.Settings");babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),O,new h.Checker({id:"siteLogo24",inputName:"logo24",title:(i=e.title)!==null&&i!==void 0?i:I.Loc.getMessage("INTRANET_SETTINGS_SECTION_TITLE_SITE_LOGO24"),size:"extra-small",isEnable:e.isEnable,checked:e.checked!=="",value:"Y",bannerCode:"limit_admin_logo24",hideSeparator:true}));return a}babelHelpers.createClass(t,[{key:"getFieldView",value:function e(){return babelHelpers.classPrivateFieldGet(this,O)}},{key:"render",value:function e(){if(babelHelpers.classPrivateFieldGet(this,M)){return babelHelpers.classPrivateFieldGet(this,M)}babelHelpers.classPrivateFieldSet(this,M,I.Tag.render(k||(k=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="ui-section__field-selector --align-center">\n\t\t\t\t<div class="ui-section__hint">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),babelHelpers.classPrivateFieldGet(this,O).render()));return babelHelpers.classPrivateFieldGet(this,M)}}]);return t}(T.BaseSettingsElement);var V;function B(e,t){z(e,t);t.add(e)}function U(e,t,i){z(e,t);t.set(e,i)}function z(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function W(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var x=new WeakMap;var X=new WeakMap;var Y=new WeakMap;var j=new WeakMap;var K=new WeakMap;var q=new WeakMap;var Q=new WeakMap;var $=new WeakSet;var Z=new WeakSet;var J=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));B(babelHelpers.assertThisInitialized(i),Z);B(babelHelpers.assertThisInitialized(i),$);U(babelHelpers.assertThisInitialized(i),x,{writable:true,value:void 0});U(babelHelpers.assertThisInitialized(i),X,{writable:true,value:void 0});U(babelHelpers.assertThisInitialized(i),Y,{writable:true,value:void 0});U(babelHelpers.assertThisInitialized(i),j,{writable:true,value:void 0});U(babelHelpers.assertThisInitialized(i),K,{writable:true,value:void 0});U(babelHelpers.assertThisInitialized(i),q,{writable:true,value:10});U(babelHelpers.assertThisInitialized(i),Q,{writable:true,value:void 0});i.setParentElement(e.parent);i.setEventNamespace("BX.Intranet.Settings");var a=e.siteTitleOptions;i.options={title:a.title,canUserEditTitle:a.canUserEditTitle,logo24:a.logo24,canUserEditLogo24:a.canUserEditLogo24};var n=e.siteTitleLabels;i.labels={title:n.title,logo24:n.logo24};W(babelHelpers.assertThisInitialized(i),$,ee).call(babelHelpers.assertThisInitialized(i),a,n);W(babelHelpers.assertThisInitialized(i),Z,te).call(babelHelpers.assertThisInitialized(i),a,n);return i}babelHelpers.createClass(t,[{key:"getFieldView",value:function e(){return babelHelpers.classPrivateFieldGet(this,Y)}},{key:"cancel",value:function e(){}},{key:"startInputMonitoring",value:function e(){if(babelHelpers.classPrivateFieldGet(this,K)>0){return}babelHelpers.classPrivateFieldSet(this,K,setInterval(this.monitorInput.bind(this),500))}},{key:"stopInputMonitoring",value:function e(){if(babelHelpers.classPrivateFieldGet(this,K)>0){clearInterval(babelHelpers.classPrivateFieldGet(this,K));babelHelpers.classPrivateFieldSet(this,K,null)}}},{key:"monitorInput",value:function e(){var t;var i=babelHelpers.classPrivateFieldGet(this,Y).getInputNode().value;if(babelHelpers.classPrivateFieldGet(this,Q)!==i){babelHelpers.classPrivateFieldSet(this,q,10);babelHelpers.classPrivateFieldSet(this,Q,i);E.EventEmitter.emit(E.EventEmitter.GLOBAL_TARGET,this.getEventNamespace()+":Portal:Change",new E.BaseEvent({data:{title:i}}))}else if(babelHelpers.classPrivateFieldSet(this,q,(t=babelHelpers.classPrivateFieldGet(this,q),--t))<=0){this.stopInputMonitoring()}}},{key:"render",value:function e(){var t=this;if(babelHelpers.classPrivateFieldGet(this,x)){return babelHelpers.classPrivateFieldGet(this,x)}I.Event.bind(babelHelpers.classPrivateFieldGet(this,Y).getInputNode(),"focus",this.startInputMonitoring.bind(this));I.Event.bind(babelHelpers.classPrivateFieldGet(this,Y).getInputNode(),"keydown",this.startInputMonitoring.bind(this));I.Event.bind(babelHelpers.classPrivateFieldGet(this,Y).getInputNode(),"click",this.startInputMonitoring.bind(this));I.Event.bind(babelHelpers.classPrivateFieldGet(this,Y).getInputNode(),"blur",this.stopInputMonitoring.bind(this));I.Event.bind(babelHelpers.classPrivateFieldGet(this,Y).getInputNode(),"blur",this.stopInputMonitoring.bind(this));babelHelpers.classPrivateFieldGet(this,j).getFieldView().subscribe("change",(function(e){E.EventEmitter.emit(E.EventEmitter.GLOBAL_TARGET,t.getEventNamespace()+":Portal:Change",new E.BaseEvent({data:{logo24:e.getData()===true?"24":""}}))}));babelHelpers.classPrivateFieldSet(this,x,I.Tag.render(V||(V=babelHelpers.taggedTemplateLiteral(['\n\t\t<div id="','" class="ui-section__field-selector --no-border --no-margin --align-center">\n\t\t\t<div class="ui-section__field-container">\n\t\t\t\t<div class="ui-section__field-label_box">\n\t\t\t\t\t<label class="ui-section__field-label" for="','">\n\t\t\t\t\t\t','\n\t\t\t\t\t</label> \n\t\t\t\t</div>\n\t\t\t\t<div class="ui-section__field-inner">\n\t\t\t\t\t<div class="ui-ctl ui-ctl-textbox ui-ctl-block">\n\t\t\t\t\t\t',"\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t"])),babelHelpers.classPrivateFieldGet(this,Y).getId(),babelHelpers.classPrivateFieldGet(this,Y).getName(),babelHelpers.classPrivateFieldGet(this,Y).getLabel(),babelHelpers.classPrivateFieldGet(this,Y).getInputNode()));return babelHelpers.classPrivateFieldGet(this,x)}},{key:"getLogo24Field",value:function e(){return babelHelpers.classPrivateFieldGet(this,j)}}]);return t}(T.BaseSettingsElement);function ee(e,t){var i;babelHelpers.classPrivateFieldSet(this,Y,new h.TextInput({value:e.title,placeholder:e.title,label:(i=t.title)!==null&&i!==void 0?i:I.Loc.getMessage("INTRANET_SETTINGS_SECTION_TITLE_SITE_TITLE_INPUT_LABEL"),id:"siteTitle",inputName:"title",isEnable:true}));babelHelpers.classPrivateFieldGet(this,Y).setEventNamespace(this.getEventNamespace())}function te(e,t){babelHelpers.classPrivateFieldSet(this,j,new D({title:t.logo24,isEnable:e.canUserEditLogo24,checked:e.logo24}))}function ie(e,t,i){ae(e,t);t.set(e,i)}function ae(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var ne=new WeakMap;var se=new WeakMap;var le=new WeakMap;var re=function(){function e(t){var i=this;babelHelpers.classCallCheck(this,e);ie(this,ne,{writable:true,value:void 0});ie(this,se,{writable:true,value:void 0});ie(this,le,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,ne,t);E.EventEmitter.subscribe("BX.Intranet.SettingsNavigation:onMove",(function(e){var t;var a=e.data,n=a.page,s=a.fieldName;if(((t=i.getCurrentPage())===null||t===void 0?void 0:t.getType())===n){i.moveTo(i.getCurrentPage(),s);return}var l=i.getPageByType(n);if(!(l!==null&&l!==void 0&&l.hasData())){E.EventEmitter.subscribeOnce("BX.Intranet.Settings:onPageComplete",(function(e){if(e.data.page.hasContent()){i.moveTo(e.data.page,s)}}))}E.EventEmitter.subscribeOnce("BX.Intranet.Settings:onAfterShowPage",(function(e){if(e.data.page.hasContent()){i.moveTo(e.data.page,s)}}));babelHelpers.classPrivateFieldGet(i,ne).show(n)}))}babelHelpers.createClass(e,[{key:"getPageByType",value:function e(t){return this.getPages().find((function(e){return e.getType()===t}))}},{key:"getCurrentPage",value:function e(){return babelHelpers.classPrivateFieldGet(this,se)}},{key:"getPrevPage",value:function e(){return babelHelpers.classPrivateFieldGet(this,le)}},{key:"changePage",value:function e(t){if(!(t instanceof T.BaseSettingsPage)){console.log('Not found "'+type+'" page');return}if(t===babelHelpers.classPrivateFieldGet(this,se)){return}babelHelpers.classPrivateFieldSet(this,le,babelHelpers.classPrivateFieldGet(this,se));babelHelpers.classPrivateFieldSet(this,se,t)}},{key:"getPages",value:function e(){return babelHelpers.classPrivateFieldGet(this,ne).getChildrenElements()}},{key:"updateAddressBar",value:function e(){var t;var i=new URL(window.location.href);i.searchParams.set("page",(t=this.getCurrentPage())===null||t===void 0?void 0:t.getType());i.searchParams["delete"]("IFRAME");i.searchParams["delete"]("IFRAME_TYPE");top.window.history.replaceState(null,"",i.toString())}},{key:"findByFieldName",value:function e(t,i){var a;var n=T.RecursiveFilteringVisitor.startFrom(t,(function(e){if(e instanceof T.SettingsSection&&e.getSectionView().getId()===i){return true}if(e instanceof T.TabField&&e.getFieldView().getId()===i){return true}return(e instanceof T.SettingsField||e instanceof J||e instanceof D)&&(e.getFieldView().getName()===i||e.getFieldView().getId()===i)}));return(a=n.shift())!==null&&a!==void 0?a:null}},{key:"scrollToNode",value:function e(t){var i=t.render();var a=45;var n=i.getBoundingClientRect().top;var s=n+window.pageYOffset-a;scrollTo({top:s,behavior:"smooth"})}},{key:"moveTo",value:function e(t,i){var a=this.findByFieldName(t,i);if(I.Type.isNil(a)){return}var n=false;T.AscendingOpeningVisitor.startFrom(a,(function(e){if(e instanceof T.SettingsRow){e.getRowView().show()}else if(e instanceof T.SettingsSection){e.getSectionView().toggle(true,false)}else if(e instanceof T.TabField){var t=e.getParentElement();if(t instanceof T.TabsField){t.activateTab(e,false)}}if(!n){n=e.highlight()}}));this.scrollToNode(a)}}]);return e}();function oe(e,t){de(e,t);t.add(e)}function ce(e,t,i){de(e,t);t.set(e,i)}function de(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function ue(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var ve=new WeakMap;var pe=new WeakMap;var he=new WeakMap;var be=new WeakMap;var ge=new WeakMap;var _e=new WeakSet;var Te=new WeakSet;var Ee=new WeakSet;var fe=new WeakSet;var Se=new WeakSet;var Ie=new WeakSet;var we=new WeakSet;var me=new WeakSet;var Ne=function(e){babelHelpers.inherits(t,e);function t(){var e;babelHelpers.classCallCheck(this,t);e=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));oe(babelHelpers.assertThisInitialized(e),me);oe(babelHelpers.assertThisInitialized(e),we);oe(babelHelpers.assertThisInitialized(e),Ie);oe(babelHelpers.assertThisInitialized(e),Se);oe(babelHelpers.assertThisInitialized(e),fe);oe(babelHelpers.assertThisInitialized(e),Ee);oe(babelHelpers.assertThisInitialized(e),Te);oe(babelHelpers.assertThisInitialized(e),_e);ce(babelHelpers.assertThisInitialized(e),ve,{writable:true,value:void 0});ce(babelHelpers.assertThisInitialized(e),pe,{writable:true,value:void 0});ce(babelHelpers.assertThisInitialized(e),he,{writable:true,value:void 0});ce(babelHelpers.assertThisInitialized(e),be,{writable:true,value:void 0});ce(babelHelpers.assertThisInitialized(e),ge,{writable:true,value:void 0});e.titlePage=I.Loc.getMessage("INTRANET_SETTINGS_TITLE_PAGE_TOOLS");e.descriptionPage=I.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_PAGE_TOOLS");return e}babelHelpers.createClass(t,[{key:"getType",value:function e(){return"tools"}},{key:"appendSections",value:function e(t){var i=new p.Row({content:this.getDescription().getContainer()});new T.SettingsRow({row:i,parent:ue(this,fe,ye).call(this)});if(this.hasValue("tools")){ue(this,_e,He).call(this)}ue(this,fe,ye).call(this).renderTo(t)}},{key:"getDescription",value:function e(){var t="\n\t\t\t".concat(I.Loc.getMessage("INTRANET_SETTINGS_SECTION_TOOLS_DESCRIPTION"),'\n\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show(\'redirect=detail&code=18213196\')">\n\t\t\t\t').concat(I.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE"),"\n\t\t\t</a>\n\t\t");return new BX.UI.Alert({text:t,inline:true,size:BX.UI.Alert.Size.SMALL,color:BX.UI.Alert.Color.PRIMARY,animated:true})}}]);return t}(T.BaseSettingsPage);function He(){var e=this;var t=this.getValue("tools");var i=[];Object.keys(t).forEach((function(n){var s;i.push(t[n].menuId);var l=t[n];var r=l.subgroups;var o=[];if(Object.keys(r).length>0){o=ue(e,Te,Pe).call(e,r,l)}var c=new a.SwitcherNested({id:l.code,title:l.name,link:l["settings-path"],infoHelperCode:l["infohelper-slider"],linkTitle:(s=l["settings-title"])!==null&&s!==void 0?s:I.Loc.getMessage("INTRANET_SETTINGS_SECTION_TOOLS_LINK_SETTINGS"),isChecked:l.enabled,mainInputName:l.code,isOpen:false,items:o,isDefault:l["default"],helpMessage:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE_DISABLED",{"#TOOL#":l.name})});var d=new T.SettingsSection({section:c});I.Dom.style(d.getSectionView().render(),"margin-bottom","8px");I.Dom.attr(d.getSectionView().render(),"data-menu-id",l.menuId);ue(e,we,Le).call(e).append(d.getSectionView().render());new T.SettingsRow({row:ue(e,we,Le).call(e),parent:ue(e,fe,ye).call(e),child:d})}))}function Pe(e,t){var i=this;var n=[];Object.keys(e).forEach((function(s){var l,r,o;var c=e[s];if(I.Type.isNull(c.name)||I.Type.isNull(c.code)||I.Type.isNull(c.enabled)){return}var d=new a.SwitcherNestedItem({title:c.name,id:c.code,inputName:c.code,isChecked:c.enabled,settingsPath:c["settings_path"],settingsTitle:(l=c["settings_title"])!==null&&l!==void 0?l:I.Loc.getMessage("INTRANET_SETTINGS_SECTION_TOOLS_LINK_SETTINGS"),infoHelperCode:c["infohelper-slider"],isDefault:(r=(o=c["default"])!==null&&o!==void 0?o:c.disabled)!==null&&r!==void 0?r:false,helpMessage:c.disabled?I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE_DISABLED",{"#TOOL#":c.name}):c["default"]?I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE_MAIN_TOOL",{"#TOOL#":t.name}):""});if(c.disabled){I.Dom.style(d.getSwitcher().getNode(),{opacity:"0.4"})}else{E.EventEmitter.subscribe(d.getSwitcher(),"toggled",(function(){var e;(e=i.getAnalytic())===null||e===void 0?void 0:e.addEventToggleTools(c.code,d.getSwitcher().isChecked())}))}if(c.code==="tool_subgroup_team_work_instant_messenger"){I.Event.bind(d.getSwitcher().getNode(),"click",(function(){if(!d.getSwitcher().isChecked()){ue(i,me,Ce).call(i,c.code,d.getSwitcher().getNode(),I.Loc.getMessage("INTRANET_SETTINGS_WARNING_TOOL_INSTANT_MESSENGER")).show()}}))}n.push(d)}));return n}function Ae(){if(babelHelpers.classPrivateFieldGet(this,be)){return babelHelpers.classPrivateFieldGet(this,be)}babelHelpers.classPrivateFieldSet(this,be,new p.Section(this.getValue("sectionTools")));return babelHelpers.classPrivateFieldGet(this,be)}function ye(){if(babelHelpers.classPrivateFieldGet(this,ge)){return babelHelpers.classPrivateFieldGet(this,ge)}babelHelpers.classPrivateFieldSet(this,ge,new T.SettingsSection({section:ue(this,Ee,Ae).call(this),parent:this}));return babelHelpers.classPrivateFieldGet(this,ge)}function Le(){if(babelHelpers.classPrivateFieldGet(this,pe)){return babelHelpers.classPrivateFieldGet(this,pe)}babelHelpers.classPrivateFieldSet(this,pe,new p.Row({}));return babelHelpers.classPrivateFieldGet(this,pe)}function Ce(e,t,i){return BX.PopupWindowManager.create(e,t,{content:i,darkMode:true,autoHide:true,angle:true,offsetLeft:14,bindOptions:{position:"bottom"},closeByEsc:true})}function Re(e,t){var i=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=ke(e))||t&&e&&typeof e.length==="number"){if(i)e=i;var a=0;var n=function e(){};return{s:n,n:function t(){if(a>=e.length)return{done:true};return{done:false,value:e[a++]}},e:function e(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s=true,l=false,r;return{s:function t(){i=i.call(e)},n:function e(){var t=i.next();s=t.done;return t},e:function e(t){l=true;r=t},f:function e(){try{if(!s&&i["return"]!=null)i["return"]()}finally{if(l)throw r}}}}function ke(e,t){if(!e)return;if(typeof e==="string")return Fe(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor)i=e.constructor.name;if(i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Fe(e,t)}function Fe(e,t){if(t==null||t>e.length)t=e.length;for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function Ge(e,t){Oe(e,t);t.add(e)}function Oe(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function Me(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var De=new WeakSet;var Ve=new WeakSet;var Be=function(e){babelHelpers.inherits(t,e);function t(){var e;babelHelpers.classCallCheck(this,t);e=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));Ge(babelHelpers.assertThisInitialized(e),Ve);Ge(babelHelpers.assertThisInitialized(e),De);e.titlePage=I.Loc.getMessage("INTRANET_SETTINGS_TITLE_PAGE_EMPLOYEE");e.descriptionPage=I.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_PAGE_EMPLOYEE_BOX");return e}babelHelpers.createClass(t,[{key:"onSuccessDataFetched",value:function e(i){babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"onSuccessDataFetched",this).call(this,i);if(this.hasValue("IS_BITRIX_24")&&this.getValue("IS_BITRIX_24")){this.descriptionPage=I.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_PAGE_EMPLOYEE");this.render().querySelector(".intranet-settings__page-header_desc").innerText=this.descriptionPage}}},{key:"getType",value:function e(){return"employee"}},{key:"appendSections",value:function e(t){var i=Me(this,De,Ue).call(this);i===null||i===void 0?void 0:i.renderTo(t);var a=Me(this,Ve,ze).call(this);a===null||a===void 0?void 0:a.renderTo(t)}}]);return t}(T.BaseSettingsPage);function Ue(){if(!this.hasValue("SECTION_PROFILE")){return}var e=new p.Section(this.getValue("SECTION_PROFILE"));var t=new T.SettingsSection({section:e,parent:this});if(this.hasValue("fieldFormatName")){var i;var a=false;var n=this.getValue("fieldFormatName").current;var s=Re(this.getValue("fieldFormatName").values),l;try{for(s.s();!(l=s.n()).done;){var r=l.value;if(r.selected===true){a=true}}}catch(e){s.e(e)}finally{s.f()}this.getValue("fieldFormatName").values.push({value:"other",name:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_OPTION_OTHER"),selected:!a});var o=new h.Selector({label:(i=this.getValue("fieldFormatName").label)!==null&&i!==void 0?i:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_NAME_FORMAT"),name:this.getValue("fieldFormatName").name+"_selector",items:this.getValue("fieldFormatName").values,hints:this.getValue("fieldFormatName").hints,current:this.getValue("fieldFormatName").current});var c=new T.SettingsField({fieldView:o});new T.SettingsRow({child:c,parent:t});var d=new h.TextInput({inputName:this.getValue("fieldFormatName").name,label:"",value:n});c=new T.SettingsField({fieldView:d});var u=new p.Row({isHidden:true});new T.SettingsRow({row:u,parent:t,child:c});if(!a){u.show()}o.getInputNode().addEventListener("change",(function(e){if(e.target.value==="other"){u.show()}else{d.getInputNode().value=o.getInputNode().value;u.hide()}}))}if(this.hasValue("fieldFormatPhoneNumber")){var v=new h.Selector(this.getValue("fieldFormatPhoneNumber"));Be.addToSectionHelper(v,t)}if(this.hasValue("fieldFormatAddress")){var b=new h.Selector(this.getValue("fieldFormatAddress"));var g=new p.Row({separator:this.hasValue("show_year_for_female")?"bottom":null,className:"--block"});Be.addToSectionHelper(b,t,g)}if(this.hasValue("show_year_for_female")){var _=new h.InlineChecker(this.getValue("show_year_for_female"));Be.addToSectionHelper(_,t)}return t}function ze(){var e=this;if(!this.hasValue("SECTION_INVITE")){return}var t=new p.Section(this.getValue("SECTION_INVITE"));var i=new T.SettingsSection({section:t,parent:this});if(this.hasValue("allow_register")){var a=new h.Checker(this.getValue("allow_register"));E.EventEmitter.subscribe(a.switcher,"toggled",(function(){var t;(t=e.getAnalytic())===null||t===void 0?void 0:t.addEventConfigEmployee(L.CHANGE_QUICK_REG,a.isChecked())}));Be.addToSectionHelper(a,i)}if(this.hasValue("allow_invite_users")){var n=new h.Checker(this.getValue("allow_invite_users"));E.EventEmitter.subscribe(n.switcher,"toggled",(function(){var t;(t=e.getAnalytic())===null||t===void 0?void 0:t.addEventConfigEmployee(L.CHANGE_REG_ALL,n.isChecked())}));Be.addToSectionHelper(n,i)}if(this.hasValue("show_fired_employees")){var s=new h.Checker(this.getValue("show_fired_employees"));Be.addToSectionHelper(s,i)}if(this.hasValue("general_chat_message_join")){var l=new h.Checker(this.getValue("general_chat_message_join"));Be.addToSectionHelper(l,i)}if(this.hasValue("allow_new_user_lf")){var r=new h.Checker(this.getValue("allow_new_user_lf"));Be.addToSectionHelper(r,i)}if(this.hasValue("feature_extranet")){var o=new h.Checker(this.getValue("feature_extranet"));E.EventEmitter.subscribe(o.switcher,"toggled",(function(){var t;(t=e.getAnalytic())===null||t===void 0?void 0:t.addEventConfigEmployee(L.CHANGE_EXTRANET_INVITE,o.isChecked())}));Be.addToSectionHelper(o,i)}return i}var We;function xe(e,t){var i=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=Xe(e))||t&&e&&typeof e.length==="number"){if(i)e=i;var a=0;var n=function e(){};return{s:n,n:function t(){if(a>=e.length)return{done:true};return{done:false,value:e[a++]}},e:function e(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s=true,l=false,r;return{s:function t(){i=i.call(e)},n:function e(){var t=i.next();s=t.done;return t},e:function e(t){l=true;r=t},f:function e(){try{if(!s&&i["return"]!=null)i["return"]()}finally{if(l)throw r}}}}function Xe(e,t){if(!e)return;if(typeof e==="string")return Ye(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor)i=e.constructor.name;if(i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Ye(e,t)}function Ye(e,t){if(t==null||t>e.length)t=e.length;for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function je(e,t,i){Ke(e,t);t.set(e,i)}function Ke(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var qe=new WeakMap;var Qe=new WeakMap;var $e=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];babelHelpers.classCallCheck(this,e);je(this,qe,{writable:true,value:void 0});je(this,Qe,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,Qe,t)}babelHelpers.createClass(e,[{key:"render",value:function e(){if(babelHelpers.classPrivateFieldGet(this,qe)){return babelHelpers.classPrivateFieldGet(this,qe)}babelHelpers.classPrivateFieldSet(this,qe,I.Tag.render(We||(We=babelHelpers.taggedTemplateLiteral(['<div class="intranet-settings__button_bar"></div>']))));var t=xe(babelHelpers.classPrivateFieldGet(this,Qe)),i;try{for(t.s();!(i=t.n()).done;){var a=i.value;I.Dom.append(a.getContainer(),babelHelpers.classPrivateFieldGet(this,qe))}}catch(e){t.e(e)}finally{t.f()}return babelHelpers.classPrivateFieldGet(this,qe)}},{key:"getButtons",value:function e(){return babelHelpers.classPrivateFieldGet(this,Qe)}},{key:"addButton",value:function e(t){babelHelpers.classPrivateFieldGet(this,Qe).push(t);I.Dom.append(t.getContainer(),this.render())}}]);return e}();function Ze(e,t,i){Je(e,t);t.set(e,i)}function Je(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var et=new WeakMap;var tt=function(){function e(){babelHelpers.classCallCheck(this,e);Ze(this,et,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,et,new n.Button({className:"landing-button-trigger",round:true,noCaps:true,size:BX.UI.Button.Size.MEDIUM,color:BX.UI.Button.Color.LIGHT_BORDER}))}babelHelpers.createClass(e,[{key:"setState",value:function e(t){t.apply(babelHelpers.classPrivateFieldGet(this,et))}},{key:"getButton",value:function e(){return babelHelpers.classPrivateFieldGet(this,et)}}]);return e}();var it=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,[{key:"apply",value:function e(t){}}]);return e}();var at=new WeakMap;var nt=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));Ze(babelHelpers.assertThisInitialized(i),at,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),at,e);return i}babelHelpers.createClass(t,[{key:"apply",value:function e(t){var i=this;t.setText(I.Loc.getMessage("INTRANET_SETTINGS_BUTTON_EDIT"));t.setDropdown(false);t.bindEvent("click",(function(){i.openNewTab(babelHelpers.classPrivateFieldGet(i,at).edit_url)}))}},{key:"openNewTab",value:function e(t){window.open(t,"_blank").focus()}}]);return t}(it);var st=new WeakMap;var lt=new WeakMap;var rt=function(e){babelHelpers.inherits(t,e);function t(e,i){var a;babelHelpers.classCallCheck(this,t);a=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));Ze(babelHelpers.assertThisInitialized(a),st,{writable:true,value:void 0});Ze(babelHelpers.assertThisInitialized(a),lt,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),st,e);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),lt,i);return a}babelHelpers.createClass(t,[{key:"apply",value:function e(t){t.setText(I.Loc.getMessage("INTRANET_SETTINGS_BUTTON_REQ_SITE"));t.setDropdown(true);t.unbindEvent("click");t.setColor(BX.UI.Button.Color.PRIMARY);t.setMenu(babelHelpers.classPrivateFieldGet(this,lt).call(this,babelHelpers.classPrivateFieldGet(this,st)))}}]);return t}(it);var ot=new WeakMap;var ct=new WeakMap;var dt=function(e){babelHelpers.inherits(t,e);function t(e,i){var a;babelHelpers.classCallCheck(this,t);a=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));Ze(babelHelpers.assertThisInitialized(a),ot,{writable:true,value:void 0});Ze(babelHelpers.assertThisInitialized(a),ct,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),ot,e);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),ct,i);return a}babelHelpers.createClass(t,[{key:"apply",value:function e(t){var i=this;t.setText(I.Loc.getMessage("INTRANET_SETTINGS_BUTTON_CREATE"));t.setDropdown(false);t.bindEvent("click",(function(e){if(t.getState()===n.ButtonState.WAITING){return}t.setState(n.ButtonState.WAITING);babelHelpers.classPrivateFieldGet(i,ot).call(i).then((function(e){var a=e.data;t.setState(null);t.unbindEvent("click");if(a.is_public){new rt(a,babelHelpers.classPrivateFieldGet(i,ct)).apply(t)}else{var n=new nt(a);n.apply(t);n.openNewTab(a.edit_url)}}),(function(e){t.setState(null);T.ErrorCollection.showSystemError(e.errors[0].message)}))}))}}]);return t}(it);var ut,vt;function pt(e,t,i){ht(e,t);t.set(e,i)}function ht(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var bt=new WeakMap;var gt=new WeakMap;var _t=new WeakMap;var Tt=function(){function e(t){babelHelpers.classCallCheck(this,e);pt(this,bt,{writable:true,value:void 0});pt(this,gt,{writable:true,value:void 0});pt(this,_t,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,bt,t)}babelHelpers.createClass(e,[{key:"qrRender",value:function e(){var t=I.Tag.render(ut||(ut=babelHelpers.taggedTemplateLiteral(['<div class="intranet-settings__qr_image-container"></div>'])));new QRCode(t,{text:babelHelpers.classPrivateFieldGet(this,bt).public_url,width:106,height:106});return t}},{key:"render",value:function e(){var t=this;if(babelHelpers.classPrivateFieldGet(this,_t)){return babelHelpers.classPrivateFieldGet(this,_t)}var i=function e(){window.open(babelHelpers.classPrivateFieldGet(t,bt).edit_url,"_blank").focus()};babelHelpers.classPrivateFieldSet(this,_t,I.Tag.render(vt||(vt=babelHelpers.taggedTemplateLiteral(['\n\t\t<div class="intranet-settings__req-info-container">\n\t\t\t<div class="intranet-settings__req-info-inner">\n\t\t\t\t<div class="intranet-settings__qr_container">','</div>\n\t\t\t\t<div class="intranet-settings__qr_description-block">\n\t\t\t\t\t<div class="intranet-settings__qr_help-text">\n\t\t\t\t\t\t<h4 class="intranet-settings__qr_title">','</h4>\n\t\t\t\t\t\t<p class="intranet-settings__qr_text">\n\t\t\t\t\t\t\t','\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="intranet-settings__qr_button">\n\t\t\t\t\t\t','\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="intranet-settings__qr_editor_box" onclick="','">\n\t\t\t\t<div class="intranet-settings__qr_editor_icon">\n\t\t\t\t\t<div class="ui-icon-set --paint-1"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="intranet-settings__qr_editor_name">','</div>\n\t\t\t\t<div class="ui-icon-set --expand intranet-settings__qr_editor_btn"></div>\n\t\t\t</div>\n\t\t</div>'])),this.qrRender(),I.Loc.getMessage("INTRANET_SETTINGS_BUTTON_REQ_SITE"),I.Loc.getMessage("INTRANET_SETTINGS_BUTTON_REQ_HELP_TEXT",{"#SITE_URL#":babelHelpers.classPrivateFieldGet(this,bt).public_url}),this.getCopyButton().getContainer(),i,I.Loc.getMessage("INTRANET_SETTINGS_BUTTON_EDIT_LANDING")));return babelHelpers.classPrivateFieldGet(this,_t)}},{key:"getCopyButton",value:function e(){var t=this;if(babelHelpers.classPrivateFieldGet(this,gt)){return babelHelpers.classPrivateFieldGet(this,gt)}babelHelpers.classPrivateFieldSet(this,gt,new n.Button({text:I.Loc.getMessage("INTRANET_SETTINGS_BUTTON_REQ_COPY_LINK"),round:true,noCaps:true,className:"landing-copy-button",size:BX.UI.Button.Size.EXTRA_SMALL,color:BX.UI.Button.Color.SUCCESS,events:{click:function e(){if(BX.clipboard.copy(babelHelpers.classPrivateFieldGet(t,bt).public_url)){top.BX.UI.Notification.Center.notify({content:I.Loc.getMessage("INTRANET_SETTINGS_BUTTON_LINK_WAS_COPIED"),autoHide:true})}}}}));return babelHelpers.classPrivateFieldGet(this,gt)}}]);return e}();function Et(e,t){St(e,t);t.add(e)}function ft(e,t,i){St(e,t);t.set(e,i)}function St(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function It(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var wt=new WeakMap;var mt=new WeakMap;var Nt=new WeakSet;var Ht=new WeakSet;var Pt=function(){function e(t,i){babelHelpers.classCallCheck(this,e);Et(this,Ht);Et(this,Nt);ft(this,wt,{writable:true,value:void 0});ft(this,mt,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,wt,t);this.landingData=i;babelHelpers.classPrivateFieldSet(this,mt,It(this,Nt,At))}babelHelpers.createClass(e,[{key:"setMenuRenderer",value:function e(t){babelHelpers.classPrivateFieldSet(this,mt,t)}},{key:"create",value:function e(){var t=this;var i=new tt;var a;if(babelHelpers.classPrivateFieldGet(this,wt).is_connected&&!babelHelpers.classPrivateFieldGet(this,wt).is_public){a=new nt(babelHelpers.classPrivateFieldGet(this,wt))}else if(babelHelpers.classPrivateFieldGet(this,wt).is_connected&&babelHelpers.classPrivateFieldGet(this,wt).is_public){a=new rt(babelHelpers.classPrivateFieldGet(this,wt),babelHelpers.classPrivateFieldGet(this,mt).bind(this))}else{a=new dt((function(){return It(t,Ht,yt).call(t)}),babelHelpers.classPrivateFieldGet(this,mt).bind(this))}i.setState(a);return i.getButton()}}]);return e}();function At(e){return{angle:true,maxWidth:396,closeByEsc:true,className:"intranet-settings__qr_popup",items:[{html:new Tt(e).render(),className:"intranet-settings__qr_popup_item"}]}}function yt(){return I.ajax.runComponentAction("bitrix:intranet.settings","getLanding",{mode:"class",data:{companyId:this.landingData.company_id,requisiteId:this.landingData.requisite_id,bankRequisiteId:this.landingData.bank_requisite_id}})}var Lt,Ct,Rt;function kt(e,t){var i=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=Ft(e))||t&&e&&typeof e.length==="number"){if(i)e=i;var a=0;var n=function e(){};return{s:n,n:function t(){if(a>=e.length)return{done:true};return{done:false,value:e[a++]}},e:function e(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s=true,l=false,r;return{s:function t(){i=i.call(e)},n:function e(){var t=i.next();s=t.done;return t},e:function e(t){l=true;r=t},f:function e(){try{if(!s&&i["return"]!=null)i["return"]()}finally{if(l)throw r}}}}function Ft(e,t){if(!e)return;if(typeof e==="string")return Gt(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor)i=e.constructor.name;if(i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Gt(e,t)}function Gt(e,t){if(t==null||t>e.length)t=e.length;for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function Ot(e,t){Dt(e,t);t.add(e)}function Mt(e,t,i){Dt(e,t);t.set(e,i)}function Dt(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function Vt(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var Bt=new WeakMap;var Ut=new WeakMap;var zt=new WeakMap;var Wt=new WeakMap;var xt=new WeakSet;var Xt=function(){function e(t){babelHelpers.classCallCheck(this,e);Ot(this,xt);Mt(this,Bt,{writable:true,value:void 0});Mt(this,Ut,{writable:true,value:void 0});Mt(this,zt,{writable:true,value:void 0});Mt(this,Wt,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,Bt,t)}babelHelpers.createClass(e,[{key:"render",value:function e(){if(babelHelpers.classPrivateFieldGet(this,Ut)){return babelHelpers.classPrivateFieldGet(this,Ut)}babelHelpers.classPrivateFieldSet(this,Ut,I.Tag.render(Lt||(Lt=babelHelpers.taggedTemplateLiteral(['\n\t\t<div class="intranet-settings__req_background">\n\t\t\t<div class="intranet-settings__req-card_wrapper">\n\t\t\t\t<div class="intranet-settings__header">\n\t\t\t\t\t<div class="intranet-settings__title"> <span class="ui-section__title-icon ui-icon-set --city"></span> <span>','</span></div>\n\t\t\t\t\t<div class="intranet-settings__contact_bar"> \n\t\t\t\t\t\t<span class="intranet-settings__contact_bar_item">\n\t\t\t\t\t\t\t','\n\t\t\t\t\t\t</span> \n\t\t\t\t\t\t<span class="intranet-settings__contact_bar_item">\n\t\t\t\t\t\t\t','\n\t\t\t\t\t\t</span> \n\t\t\t\t\t\t<span class="intranet-settings__contact_bar_item">\n\t\t\t\t\t\t\t',"\n\t\t\t\t\t\t</span> \n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t","\n\t\t\t\t","\n\t\t\t</div>\n\t\t</div>\n\t\t"])),babelHelpers.classPrivateFieldGet(this,Bt).company.TITLE,Vt(this,xt,Yt).call(this,I.Type.isStringFilled(babelHelpers.classPrivateFieldGet(this,Bt).phone)?babelHelpers.classPrivateFieldGet(this,Bt).phone:I.Loc.getMessage("INTRANET_SETTINGS_BUTTON_REQ_EMPTY_FIELD_STUB_PHONE")),Vt(this,xt,Yt).call(this,I.Type.isStringFilled(babelHelpers.classPrivateFieldGet(this,Bt).email)?babelHelpers.classPrivateFieldGet(this,Bt).email:I.Loc.getMessage("INTRANET_SETTINGS_BUTTON_REQ_EMPTY_FIELD_STUB_EMAIL")),Vt(this,xt,Yt).call(this,I.Type.isStringFilled(babelHelpers.classPrivateFieldGet(this,Bt).site)?babelHelpers.classPrivateFieldGet(this,Bt).site:I.Loc.getMessage("INTRANET_SETTINGS_BUTTON_REQ_EMPTY_FIELD_STUB_SITE")),this.requisiteFieldsRender(),this.getButtonsBar().render()));return babelHelpers.classPrivateFieldGet(this,Ut)}},{key:"getCompanyUrl",value:function e(){if(babelHelpers.classPrivateFieldGet(this,Bt).company.ID===0){return"/crm/company/details/0/?mycompany=y&TITLE="+babelHelpers.classPrivateFieldGet(this,Bt).company.TITLE}else{return"/crm/company/details/"+babelHelpers.classPrivateFieldGet(this,Bt).company.ID+"/"}}},{key:"requisiteFieldsRender",value:function e(){if(babelHelpers.classPrivateFieldGet(this,zt)){return babelHelpers.classPrivateFieldGet(this,zt)}var t=babelHelpers.classPrivateFieldGet(this,Bt).fields;babelHelpers.classPrivateFieldSet(this,zt,I.Tag.render(Ct||(Ct=babelHelpers.taggedTemplateLiteral(['<div class="intranet-settings__req-table_wrap"></div>']))));var i=kt(t),a;try{for(i.s();!(a=i.n()).done;){var n=a.value;var s=I.Tag.render(Rt||(Rt=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="intranet-settings__req-table_row">\n\t\t\t\t\t<div class="intranet-settings__table-cell">','</div>\n\t\t\t\t\t<div class="intranet-settings__table-cell">\n\t\t\t\t\t\t',"\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t"])),n.TITLE,I.Type.isStringFilled(n.VALUE)?Vt(this,xt,Yt).call(this,n.VALUE):Vt(this,xt,Yt).call(this,I.Loc.getMessage("INTRANET_SETTINGS_BUTTON_REQ_EMPTY_FIELD_STUB")));I.Dom.append(s,babelHelpers.classPrivateFieldGet(this,zt))}}catch(e){i.e(e)}finally{i.f()}return babelHelpers.classPrivateFieldGet(this,zt)}},{key:"getButtonsBar",value:function e(){if(babelHelpers.classPrivateFieldGet(this,Wt)){return babelHelpers.classPrivateFieldGet(this,Wt)}babelHelpers.classPrivateFieldSet(this,Wt,new $e);return babelHelpers.classPrivateFieldGet(this,Wt)}},{key:"setButtonBar",value:function e(t){babelHelpers.classPrivateFieldSet(this,Wt,t)}}]);return e}();function Yt(e){return I.Dom.create("a",{text:e,attrs:{href:this.getCompanyUrl()}})}var jt,Kt;function qt(e,t){var i=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=Qt(e))||t&&e&&typeof e.length==="number"){if(i)e=i;var a=0;var n=function e(){};return{s:n,n:function t(){if(a>=e.length)return{done:true};return{done:false,value:e[a++]}},e:function e(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s=true,l=false,r;return{s:function t(){i=i.call(e)},n:function e(){var t=i.next();s=t.done;return t},e:function e(t){l=true;r=t},f:function e(){try{if(!s&&i["return"]!=null)i["return"]()}finally{if(l)throw r}}}}function Qt(e,t){if(!e)return;if(typeof e==="string")return $t(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor)i=e.constructor.name;if(i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return $t(e,t)}function $t(e,t){if(t==null||t>e.length)t=e.length;for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}var Zt=function(e){babelHelpers.inherits(t,e);function t(){var e;babelHelpers.classCallCheck(this,t);e=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));e.titlePage=I.Loc.getMessage("INTRANET_SETTINGS_TITLE_PAGE_REQUISITE");e.descriptionPage=I.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_PAGE_REQUISITE");top.BX.addCustomEvent("onLocalStorageSet",(function(t){var i;var a=(i=t===null||t===void 0?void 0:t.key)!==null&&i!==void 0?i:null;if(a==="onCrmEntityUpdate"||a==="onCrmEntityCreate"){e.reload()}}));return e}babelHelpers.createClass(t,[{key:"getType",value:function e(){return"requisite"}},{key:"appendSections",value:function e(t){if(!this.hasValue("sectionRequisite")){return}var i=new p.Section(this.getValue("sectionRequisite"));var a=new T.SettingsSection({parent:this,section:i});var n=new BX.UI.Alert({text:"\n\t\t\t\t".concat(I.Loc.getMessage("INTRANET_SETTINGS_SECTION_REQUISITE_DESCRIPTION"),'\n\t\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show(\'redirect=detail&code=18213326\')">\n\t\t\t\t\t').concat(I.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE"),"\n\t\t\t\t</a>\n\t\t\t"),inline:true,size:BX.UI.Alert.Size.SMALL,color:BX.UI.Alert.Color.PRIMARY,animated:true});var s=new p.Row({content:n.getContainer()});i.append(s.render());if(this.hasValue("COMPANY")){var l=this.getValue("COMPANY");var r=this.getValue("REQUISITES");var o=this.getValue("PHONES");var c=this.getValue("SITES");var d=this.getValue("EMAILS");var u=this.getValue("LANDINGS");var v=this.getValue("LANDINGS_DATA");if(!I.Type.isArray(l)||l.length<=0){var h=new p.Row({content:this.cardRender({company:{ID:0,TITLE:this.getValue("BITRIX_TITLE")},fields:this.getValue("EMPTY_REQUISITE"),phone:[],email:[],site:[]})});i.append(h.render())}var b=qt(l),g;try{for(b.s();!(g=b.n()).done;){var _=g.value;var E=!I.Type.isNil(r[_.ID])?r[_.ID]:this.getValue("EMPTY_REQUISITE");var f=new p.Row({content:this.cardRender({company:_,fields:E,phone:!I.Type.isNil(o[_.ID])?o[_.ID]:[],email:!I.Type.isNil(d[_.ID])?d[_.ID]:[],site:!I.Type.isNil(c[_.ID])?c[_.ID]:[],landing:!I.Type.isNil(u[_.ID])?u[_.ID]:[],landingData:!I.Type.isNil(v[_.ID])?v[_.ID]:[]})});i.append(f.render())}}catch(e){b.e(e)}finally{b.f()}}new T.SettingsRow({row:new p.Row({content:this.addCompanyLinkRender()}),parent:a});a.renderTo(t)}},{key:"addCompanyLinkRender",value:function e(){var t=this;var i=I.Tag.render(jt||(jt=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<a class="ui-section__link" \n\t\t\t\t\thref="/crm/company/details/0/?mycompany=y" target="_blank">\n\t\t\t\t',"\n\t\t\t\t</a>\n\t\t"])),I.Loc.getMessage("INTRANET_SETTINGS_BUTTON_REQ_ADD_COMPANY"));I.Event.bind(i,"click",(function(e){var i;(i=t.getAnalytic())===null||i===void 0?void 0:i.addEventConfigRequisite(L.OPEN_ADD_COMPANY)}));return I.Tag.render(Kt||(Kt=babelHelpers.taggedTemplateLiteral(['<div class="ui-section__link_box">',"</div>"])),i)}},{key:"cardRender",value:function e(t){var i=this;var a=new Xt(t);var n=new $e;if(t.company.ID>0){var s=new Pt(t.landing,t.landingData);s.setMenuRenderer((function(e){var t=new Tt(e);I.Event.bind(t.getCopyButton().getContainer(),"click",(function(e){var t;(t=i.getAnalytic())===null||t===void 0?void 0:t.addEventConfigRequisite(L.COPY_LINK_CARD)}));return{angle:true,maxWidth:396,closeByEsc:true,className:"intranet-settings__qr_popup",items:[{html:t.render(),className:"intranet-settings__qr_popup_item"}]}}));var l=s.create();if(I.Dom.hasClass(l.getContainer(),"landing-button-trigger")){I.Event.bind(l.getContainer(),"click",(function(e){if(t.landing.is_connected&&!t.landing.is_public){var a;(a=i.getAnalytic())===null||a===void 0?void 0:a.addEventConfigRequisite(L.EDIT_CARD)}else if(!t.landing.is_connected&&!t.landing.is_public){var n;(n=i.getAnalytic())===null||n===void 0?void 0:n.addEventConfigRequisite(L.CREATE_CARD)}}))}n.addButton(l)}a.setButtonBar(n);return a.render()}}]);return t}(T.BaseSettingsPage);var Jt,ei,ti,ii;function ai(e,t){ni(e,t);t.add(e)}function ni(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function si(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var li=new WeakSet;var ri=new WeakSet;var oi=new WeakSet;var ci=function(e){babelHelpers.inherits(t,e);function t(){var e;babelHelpers.classCallCheck(this,t);e=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));ai(babelHelpers.assertThisInitialized(e),oi);ai(babelHelpers.assertThisInitialized(e),ri);ai(babelHelpers.assertThisInitialized(e),li);e.titlePage=I.Loc.getMessage("INTRANET_SETTINGS_TITLE_PAGE_COMMUNICATION");e.descriptionPage=I.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_PAGE_COMMUNICATION");return e}babelHelpers.createClass(t,[{key:"getType",value:function e(){return"communication"}},{key:"appendSections",value:function e(t){var i=si(this,li,di).call(this);i.renderTo(t);var a=si(this,ri,ui).call(this);a.renderTo(t);var n=si(this,oi,vi).call(this);n.renderTo(t)}}]);return t}(T.BaseSettingsPage);function di(){if(!this.hasValue("sectionFeed")){return}var e=new p.Section(this.getValue("sectionFeed"));var t=new T.SettingsSection({section:e,parent:this});if(this.hasValue("allow_livefeed_toall")){var i=new h.Checker(this.getValue("allow_livefeed_toall"));i.hideSeparator=true;var a=new T.SettingsField({fieldView:i});var n=new T.SettingsRow({parent:t,child:a});var s=new h.UserSelector({inputName:"livefeed_toall_rights[]",label:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_SELECT_USER_PUBLIC_MESS"),values:Object.values(this.getValue("arToAllRights")),enableDepartments:true,encodeValue:function e(t){if(!I.Type.isNil(t.id)){return t.id==="all-users"?"AU":t.type+t.id.toString().split(":")[0]}return null},decodeValue:function e(t){if(t==="UA"){return{type:"AU",id:""}}var i=t.match(/^(U|DR|D)(\d+)/);if(!I.Type.isArray(i)){return{type:null,id:null}}return{type:i[1],id:i[2]}}});a=new T.SettingsField({fieldView:s});var l=new p.Row({isHidden:!i.isChecked(),className:"ui-section__subrow"});new T.SettingsRow({row:l,parent:n,child:a});E.EventEmitter.subscribe(i.switcher,"toggled",(function(){if(i.isChecked()){l.show()}else{l.hide()}}))}if(this.hasValue("default_livefeed_toall")){var r=new h.Checker(this.getValue("default_livefeed_toall"));ci.addToSectionHelper(r,t)}if(this.hasValue("ratingTextLikeY")){var o,c,d;var u=new h.TextInputInline({inputName:(o=this.getValue("ratingTextLikeY"))===null||o===void 0?void 0:o.name,label:(c=this.getValue("ratingTextLikeY").label)!==null&&c!==void 0?c:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_LIKE_INPUT"),hintTitle:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_TITLE_LIKE"),value:(d=this.getValue("ratingTextLikeY"))===null||d===void 0?void 0:d.current,valueColor:this.hasValue("ratingTextLikeY"),hintDesc:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_DESC_LIKE")});ci.addToSectionHelper(u,t)}return t}function ui(){if(!this.hasValue("sectionChats")){return}var e=new p.Section(this.getValue("sectionChats"));var t=new T.SettingsSection({section:e,parent:this});if(this.hasValue("general_chat_can_post")){var i;var a=new h.Checker(this.getValue("allow_post_general_chat"));var n=new T.SettingsField({fieldView:a});var s=new T.SettingsRow({parent:t,child:n});var l=new h.Selector(this.getValue("general_chat_can_post"));n=new T.SettingsField({fieldView:l});var r=new p.Row({isHidden:!a.isChecked(),className:"ui-section__subrow --no-border"});ci.addToSectionHelper(l,s,r);var o=new h.UserSelector({inputName:"imchat_toall_rights[]",label:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_SELECT_USER_PUBLIC_MESS"),enableAll:false,values:Object.values((i=this.getValue("generalChatManagersList"))!==null&&i!==void 0?i:[]),encodeValue:function e(t){if(!I.Type.isNil(t.id)){return t.id==="all-users"?"AU":"U"+t.id}return null},decodeValue:function e(t){if(t==="UA"){return{type:"AU",id:""}}var i=t.match(/^(U)(\d+)/);if(!I.Type.isArray(i)){return{type:null,id:null}}return{type:i[1],id:i[2]}}});var c=new p.Row({content:o.render(),isHidden:this.getValue("general_chat_can_post").current!=="MANAGER",className:"ui-section__subrow --no-border"});ci.addToSectionHelper(o,s,c);var d=new p.SeparatorRow({isHidden:this.getValue("general_chat_can_post").current!=="MANAGER"});new T.SettingsRow({row:d,parent:s});E.EventEmitter.subscribe(a.switcher,"toggled",(function(){if(a.isChecked()){r.show();if(l.getInputNode().value==="MANAGER"){c.show()}d.show()}else{r.hide();c.hide();d.hide()}}));l.getInputNode().addEventListener("change",(function(e){if(e.target.value==="MANAGER"){c.show()}else{c.hide()}}))}if(this.hasValue("general_chat_message_leave")){var u=new h.Checker(this.getValue("general_chat_message_leave"));ci.addToSectionHelper(u,t)}if(this.hasValue("general_chat_message_admin_rights")){var v=new h.Checker(this.getValue("general_chat_message_admin_rights"));ci.addToSectionHelper(v,t)}if(this.hasValue("url_preview_enable")){var b=new h.Checker(this.getValue("url_preview_enable"));ci.addToSectionHelper(b,t)}if(this.hasValue("create_overdue_chats")){var g=new h.Checker(this.getValue("create_overdue_chats"));ci.addToSectionHelper(g,t)}return t}function vi(){var e=this;if(!this.hasValue("sectionDisk")){return}var t=new p.Section(this.getValue("sectionDisk"));var i=new T.SettingsSection({section:t,parent:this});if(this.hasValue("DISK_VIEWER_SERVICE")){var a=new h.Selector(this.getValue("DISK_VIEWER_SERVICE"));ci.addToSectionHelper(a,i)}if(this.hasValue("DISK_LIMIT_PER_FILE")){var n;var s=I.Tag.render(Jt||(Jt=babelHelpers.taggedTemplateLiteral(["<span>","</span>"])),I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE"));var l=new h.Selector({label:(n=this.getValue("DISK_LIMIT_PER_FILE").label)!==null&&n!==void 0?n:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_MAX_FILE_LIMIT"),hintTitle:this.getValue("DISK_LIMIT_PER_FILE").hintTitle,name:this.getValue("DISK_LIMIT_PER_FILE").name,items:this.getValue("DISK_LIMIT_PER_FILE").values,hints:this.getValue("DISK_LIMIT_PER_FILE").hints,current:this.getValue("DISK_LIMIT_PER_FILE").current,isEnable:this.getValue("DISK_LIMIT_PER_FILE").isEnable,bannerCode:"limit_max_entries_in_document_history",helpDesk:"redirect=detail&code=18869612",helpMessageProvider:this.helpMessageProviderFactory(s)});var r=new p.Row({separator:"bottom",className:"--block"});if(!this.getValue("DISK_LIMIT_PER_FILE").isEnable){I.Event.bind(l.getInputNode(),"click",(function(){var t;(t=e.getAnalytic())===null||t===void 0?void 0:t.addEventOpenHint(e.getValue("DISK_LIMIT_PER_FILE").name)}));I.Event.bind(s.querySelector("a"),"click",(function(){var t;return(t=e.getAnalytic())===null||t===void 0?void 0:t.addEventOpenTariffSelector(e.getValue("DISK_LIMIT_PER_FILE").name)}))}ci.addToSectionHelper(l,i,r)}new T.SettingsRow({row:new p.SeparatorRow,parent:i});if(this.hasValue("disk_allow_edit_object_in_uf")){var o=new h.Checker(this.getValue("disk_allow_edit_object_in_uf"));var c=new p.Row({separator:"top",className:"--block"});ci.addToSectionHelper(o,i,c)}if(this.hasValue("disk_allow_autoconnect_shared_objects")){var d=new h.Checker(this.getValue("disk_allow_autoconnect_shared_objects"));ci.addToSectionHelper(d,i)}if(this.hasValue("disk_allow_use_external_link")){var u;var v=I.Tag.render(ei||(ei=babelHelpers.taggedTemplateLiteral(["<span>","</span>"])),I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE"));var b=new h.Checker({inputName:this.getValue("disk_allow_use_external_link").inputName,title:(u=this.getValue("disk_allow_use_external_link").label)!==null&&u!==void 0?u:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_ALLOW_PUBLIC_LINK"),hintOn:this.getValue("disk_allow_use_external_link").hintOn,checked:this.getValue("disk_allow_use_external_link").checked,isEnable:this.getValue("disk_allow_use_external_link").isEnable,bannerCode:"limit_admin_share_link",helpDesk:this.getValue("disk_allow_use_external_link").helpDesk,helpMessageProvider:this.helpMessageProviderFactory(v)});if(!this.getValue("disk_allow_use_external_link").isEnable){E.EventEmitter.subscribe(b.switcher,"toggled",(function(){var t;(t=e.getAnalytic())===null||t===void 0?void 0:t.addEventOpenHint("disk_allow_use_external_link")}));I.Event.bind(v.querySelector("a"),"click",(function(){var t;return(t=e.getAnalytic())===null||t===void 0?void 0:t.addEventOpenTariffSelector("enable_pub_link")}))}ci.addToSectionHelper(b,i)}if(this.hasValue("disk_object_lock_enabled")){var g;var _=I.Tag.render(ti||(ti=babelHelpers.taggedTemplateLiteral(["<span>","</span>"])),I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE"));var f=new h.Checker({inputName:this.getValue("disk_object_lock_enabled").inputName,title:(g=this.getValue("disk_object_lock_enabled").label)!==null&&g!==void 0?g:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_ALLOW_BLOCK_DOC"),hintOn:this.getValue("disk_object_lock_enabled").hintOn,checked:this.getValue("disk_object_lock_enabled").checked,isEnable:this.getValue("disk_object_lock_enabled").isEnable,bannerCode:"limit_document_lock",helpMessageProvider:this.helpMessageProviderFactory(_),helpDesk:this.getValue("disk_object_lock_enabled").helpDesk});if(!this.getValue("disk_object_lock_enabled").isEnable){E.EventEmitter.subscribe(f.switcher,"toggled",(function(){var t;(t=e.getAnalytic())===null||t===void 0?void 0:t.addEventOpenHint("disk_object_lock_enabled")}));I.Event.bind(_.querySelector("a"),"click",(function(){var t;return(t=e.getAnalytic())===null||t===void 0?void 0:t.addEventOpenTariffSelector("disk_object_lock_enabled")}))}ci.addToSectionHelper(f,i)}if(this.hasValue("disk_allow_use_extended_fulltext")){var S;var w=I.Tag.render(ii||(ii=babelHelpers.taggedTemplateLiteral(["<span>","</span>"])),I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE_ENT",{"#TARIFF#":"ent250"}));var m=new h.Checker({inputName:this.getValue("disk_allow_use_extended_fulltext").inputName,title:(S=this.getValue("disk_allow_use_extended_fulltext").label)!==null&&S!==void 0?S:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_ALLOW_SEARCH_DOC"),hintOn:this.getValue("disk_allow_use_extended_fulltext").hintOn,checked:this.getValue("disk_allow_use_extended_fulltext").checked,isEnable:this.getValue("disk_allow_use_extended_fulltext").isEnable,bannerCode:"limit_in_text_search",helpDesk:this.getValue("disk_allow_use_extended_fulltext").helpDesk,helpMessageProvider:this.helpMessageProviderFactory(w)});if(!this.getValue("disk_allow_use_extended_fulltext").isEnable){E.EventEmitter.subscribe(m.switcher,"toggled",(function(){var t;(t=e.getAnalytic())===null||t===void 0?void 0:t.addEventOpenHint("disk_allow_use_extended_fulltext")}));I.Event.bind(w.querySelector("a"),"click",(function(){var t;return(t=e.getAnalytic())===null||t===void 0?void 0:t.addEventOpenTariffSelector("disk_allow_use_extended_fulltext")}))}ci.addToSectionHelper(m,i)}return i}var pi,hi,bi;function gi(e,t,i){_i(e,t);t.set(e,i)}function _i(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var Ti=new WeakMap;var Ei=new WeakMap;var fi=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);var a=e.siteDomainOptions;e.fieldView=new h.TextInput({value:a.subDomainName,placeholder:a.subDomainName,label:I.Loc.getMessage("INTRANET_SETTINGS_SECTION_DOMAIN_NAME3"),id:"subDomainName",inputName:"subDomainName",isEnable:true});i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));gi(babelHelpers.assertThisInitialized(i),Ti,{writable:true,value:void 0});gi(babelHelpers.assertThisInitialized(i),Ei,{writable:true,value:void 0});i.setParentElement(e.parent);i.getFieldView().setEventNamespace(i.getEventNamespace());i.getFieldView().getInputNode().setAttribute("autocomplete","off");var n=null;I.Event.bind(i.getFieldView().getInputNode(),"input",(function(){clearTimeout(n);n=setTimeout((function(){i.validateInput()}),1e3)}));i.options={hostname:a.hostname,subDomainName:a.subDomainName,mainDomainName:a.mainDomainName,isRenameable:a.isRenameable,occupiedDomains:a.occupiedDomains};i.options.mainDomainName=[".",i.options.mainDomainName].join("").replace("..",".");return i}babelHelpers.createClass(t,[{key:"validateInput",value:function e(){var t=this.getFieldView().getInputNode().value;t=t.trim();if(t.length<3||t.length>60){this.getFieldView().setErrors([I.Loc.getMessage("INTRANET_SETTINGS_DOMAIN_RENAMING_LENGTH_ERROR")])}else if(!/^([a-zA-Z0-9]([a-zA-Z0-9\\-]{0,58})[a-zA-Z0-9])$/.test(t)){this.getFieldView().setErrors([I.Loc.getMessage("INTRANET_SETTINGS_DOMAIN_RENAMING_FORMAT_ERROR")])}else if(this.options.occupiedDomains.includes(t)){this.getFieldView().setErrors([I.Loc.getMessage("INTRANET_SETTINGS_DOMAIN_RENAMING_DOMAIN_EXISTS_ERROR")])}else{this.getFieldView().cleanError()}}},{key:"cancel",value:function e(){}},{key:"render",value:function e(){var t=this;if(babelHelpers.classPrivateFieldGet(this,Ti)){return babelHelpers.classPrivateFieldGet(this,Ti)}if(this.options.isRenameable!==true){var i=I.Tag.render(pi||(pi=babelHelpers.taggedTemplateLiteral(['<div class="settings-tools-description-link">',"</div>"])),I.Loc.getMessage("INTRANET_SETTINGS_COPY"));BX.clipboard.bindCopyClick(i,{text:function e(){return t.options.hostname}});babelHelpers.classPrivateFieldSet(this,Ti,I.Tag.render(hi||(hi=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div>\n\t\t\t\t\t<div class="ui-section__field-label_box">\n\t\t\t\t\t\t<div class="ui-section__field-label">','</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="intranet-settings__domain_box">\n\t\t\t\t\t\t<div class="intranet-settings__domain_name">',"</div>\n\t\t\t\t\t\t","\n\t\t\t\t\t</div>\n\t\t\t\t</div>"])),I.Loc.getMessage("INTRANET_SETTINGS_SECTION_DOMAIN_NAME4"),I.Text.encode(this.options.hostname),i))}else{babelHelpers.classPrivateFieldSet(this,Ti,I.Tag.render(bi||(bi=babelHelpers.taggedTemplateLiteral(['<div id="','" class="ui-section__field-selector --no-border">\n\t\t\t\t<div class="ui-section__field-container">\n\t\t\t\t\t<div class="ui-section__field-label_box">\n\t\t\t\t\t\t<label class="ui-section__field-label" for="','">\n\t\t\t\t\t\t\t','\n\t\t\t\t\t\t</label> \n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="ui-section__field-inner">\n\t\t\t\t\t\t<div class="intarnet-settings__domain_inline-field">\n\t\t\t\t\t\t\t<div class="ui-ctl ui-ctl-textbox ui-ctl-block">\n\t\t\t\t\t\t\t\t','\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="intarnet-settings__domain_name">',"</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t","\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>"])),this.getFieldView().getId(),this.getFieldView().getName(),this.getFieldView().getLabel(),this.getFieldView().getInputNode(),I.Text.encode(this.options.mainDomainName),this.getFieldView().renderErrors()))}return babelHelpers.classPrivateFieldGet(this,Ti)}}]);return t}(T.SettingsField);function Si(e,t){var i=e.querySelector('[data-role="logo"]');var a=e.querySelector('[data-role="title"]');var n=e.querySelector('[data-role="logo24"]');if(!i.hasAttribute("data-prev-display")){i.dataset.prevDisplay=i.style.display;a.dataset.prevDisplay=a.style.display;n.dataset.prevDisplay=n.style.display}if(I.Type.isUndefined(t.title)!==true){a.innerHTML=I.Text.encode(I.Type.isStringFilled(t.title)?t.title:"Bitrix")}if(I.Type.isUndefined(t.logo24)!==true){if(I.Type.isStringFilled(t.logo24)){delete n.dataset.visibility;if(i.style.display==="none"){n.style.removeProperty("display")}}else{n.dataset.visibility="hidden";n.style.display="none"}}if(I.Type.isUndefined(t.logo)!==true){if(I.Type.isPlainObject(t.logo)){i.style.backgroundImage='url("'+encodeURI(t.logo.src)+'")';i.style.removeProperty("display");a.style.display="none";n.style.display="none"}else{i.style.display="none";a.style.removeProperty("display");if(n.dataset.visibility!=="hidden"){n.style.removeProperty("display")}else{n.style.display="none"}}}}function Ii(e,t){var i=I.Type.isPlainObject(t)?t:{};var a=String(i.id).indexOf("dark:")===0?"dark":"light";I.Dom.removeClass(e,"--light --dark");I.Dom.addClass(e,"--"+a);if(I.Type.isStringFilled(i.previewImage)){e.style.backgroundImage='url("'+i.previewImage+'")';e.style.backgroundSize="cover"}else{e.style.removeProperty("backgroundImage");e.style.removeProperty("backgroundSize");e.style.background="none"}if(I.Type.isStringFilled(i.previewColor)){e.style.backgroundColor=i.previewColor}}var wi,mi,Ni;function Hi(e,t){Ai(e,t);t.add(e)}function Pi(e,t,i){Ai(e,t);t.set(e,i)}function Ai(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function yi(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var Li=new WeakMap;var Ci=new WeakSet;var Ri=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,{inputName:"themeId",isEnable:e.allowSetDefaultTheme,bannerCode:"limit_office_background_to_all"}));Hi(babelHelpers.assertThisInitialized(i),Ci);Pi(babelHelpers.assertThisInitialized(i),Li,{writable:true,value:void 0});yi(babelHelpers.assertThisInitialized(i),Ci,ki).call(babelHelpers.assertThisInitialized(i),e);i.applyTheme();return i}babelHelpers.createClass(t,[{key:"applyTheme",value:function e(t){var i=t?babelHelpers.classPrivateFieldGet(this,Li).getItemNode(t):null;var a=i?babelHelpers.classPrivateFieldGet(this,Li).getTheme(i.dataset.themeId):babelHelpers.classPrivateFieldGet(this,Li).getAppliedTheme();this.applyPortalThemePreview(a);if(t){E.EventEmitter.emit(E.EventEmitter.GLOBAL_TARGET,"BX.Intranet.Settings:ThemePicker:Change",a);this.showSaveButton()}}},{key:"applyPortalThemePreview",value:function e(t){var i=this.render().querySelector('[data-role="preview"]');Ii(i,t);this.getInputNode().value=I.Type.isPlainObject(t)?t["id"]:""}},{key:"showSaveButton",value:function e(){this.getInputNode().disabled=false;this.getInputNode().form.dispatchEvent(new window.Event("change"))}},{key:"getValue",value:function e(){return this.getInputNode().value}},{key:"getInputNode",value:function e(){return this.render().querySelector('input[name="themeId"]')}},{key:"applyPortalSettings",value:function e(){}},{key:"renderContentField",value:function e(){var t=this;document.querySelector(".ui-side-panel-content").style.overflow="hidden";var i=I.Tag.render(wi||(wi=babelHelpers.taggedTemplateLiteral(['\n\t\t<div class="intranet-theme-settings ui-section__row">\n\t\t\t<div class="ui-section__row theme-dialog-preview">\n\t\t\t\t<section data-role="preview" style="background-color: #0a51ae;" class="intranet-settings__main-widget_section --preview">\n\t\t\t\t\t<div class="intranet-settings__main-widget__bang"></div>\n\t\t\t\t\t<aside class="intranet-settings__main-widget__aside">\n\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item --active"></div>\n\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t</aside>\n\t\t\t\t\t<main class="intranet-settings__main-widget_main">\n\t\t\t\t\t\t<div class="intranet-settings__main-widget_header --with-logo">\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_header_left">\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_logo" data-role="logo"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_name" data-role="title">Bitrix</div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_logo24" data-role="logo24">24</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_header_right">\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_box">\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item"></div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_inline --space-between">\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --sm"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --bg-30"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --square"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_inner">\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --bg-30"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --bg-30"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</main>\n\t\t\t\t\t<aside class="intranet-settings__main-widget__aside --right-side">\n\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item --active"></div>\n\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t</aside>\n\t\t\t\t</section>\n\t\t\t</div>\n\t\t\t<div class="ui-section__row theme-dialog-content" data-role="theme-container"></div>\n\t\t\t<input type="hidden" name="themeId" value="" disabled>\n\t\t</div>\n\t\t'])));var a=I.Tag.render(mi||(mi=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="intranet-settings__theme-btn_box">\n\t\t\t\t<div class="intranet-settings__theme-btn" onclick="','">',"</div>\n\t\t\t</div>\n\t\t"])),this.handleNewThemeButtonClick.bind(this),I.Loc.getMessage("INTRANET_SETTINGS_THEME_UPLOAD_BTN"));var n=i.querySelector('div[data-role="theme-container"]');Array.from(babelHelpers.classPrivateFieldGet(this,Li).getThemes()).forEach((function(e){var i=babelHelpers.classPrivateFieldGet(t,Li).createItem(e);if(babelHelpers.classPrivateFieldGet(t,Li).canSetDefaultTheme()!==true){I.Event.unbindAll(i,"click");if(e["default"]!==true){I.Dom.addClass(i,"--restricted");i.appendChild(I.Tag.render(Ni||(Ni=babelHelpers.taggedTemplateLiteral(['<div class="intranet-settings__theme_lock_box">',"</div>"])),t.renderLockElement()));I.Event.bind(i,"click",t.showBanner.bind(t))}}if(e["default"]===true){i.setAttribute("data-role","ui-ears-active")}n.appendChild(i)}));new r.Ears({container:n,noScrollbar:false}).init();i.appendChild(a);return i}},{key:"handleNewThemeButtonClick",value:function e(t){if(babelHelpers.classPrivateFieldGet(this,Li).canSetDefaultTheme()!==true){return this.showBanner()}babelHelpers.classPrivateFieldGet(this,Li).getNewThemeDialog().show()}},{key:"handleLockButtonClick",value:function e(){if(BX.getClass("BX.UI.InfoHelper")){BX.UI.InfoHelper.show("limit_office_background_to_all")}}}]);return t}(h.BaseField);function ki(e){var t=this;babelHelpers.classPrivateFieldSet(this,Li,new BX.Intranet.Bitrix24.ThemePicker(e));babelHelpers.classPrivateFieldGet(this,Li).setThemes(e.themes);babelHelpers.classPrivateFieldGet(this,Li).setBaseThemes(e.baseThemes);babelHelpers.classPrivateFieldGet(this,Li).applyThemeAssets=function(){};babelHelpers.classPrivateFieldGet(this,Li).getContentContainer=function(){return t.render().querySelector('div[data-role="theme-container"]')};var i=babelHelpers.classPrivateFieldGet(this,Li).handleRemoveBtnClick.bind(babelHelpers.classPrivateFieldGet(this,Li));babelHelpers.classPrivateFieldGet(this,Li).handleRemoveBtnClick=function(e){var a=babelHelpers.classPrivateFieldGet(t,Li).getItemNode(e);if(!a){return}i(e);t.applyPortalThemePreview(babelHelpers.classPrivateFieldGet(t,Li).getTheme(babelHelpers.classPrivateFieldGet(t,Li).getThemeId()));t.showSaveButton()};var a=babelHelpers.classPrivateFieldGet(this,Li).handleItemClick.bind(babelHelpers.classPrivateFieldGet(this,Li));babelHelpers.classPrivateFieldGet(this,Li).handleItemClick=function(e){a(e);t.applyTheme(e)};var n=babelHelpers.classPrivateFieldGet(this,Li).addItem.bind(babelHelpers.classPrivateFieldGet(this,Li));babelHelpers.classPrivateFieldGet(this,Li).addItem=function(e){n(e);t.applyPortalThemePreview(e);t.showSaveButton()}}var Fi=new WeakMap;var Gi=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);e.fieldView=new Ri(e.themePickerSettings);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));Pi(babelHelpers.assertThisInitialized(i),Fi,{writable:true,value:void 0});if(e.portalSettings){i.setEventNamespace("BX.Intranet.Settings");Si(i.getFieldView().render(),e.portalSettings);E.EventEmitter.subscribe(E.EventEmitter.GLOBAL_TARGET,i.getEventNamespace()+":Portal:Change",(function(e){Si(i.getFieldView().render(),e.getData())}))}return i}return t}(T.SettingsField);var Oi,Mi,Di;function Vi(e,t){Ui(e,t);t.add(e)}function Bi(e,t,i){Ui(e,t);t.set(e,i)}function Ui(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function zi(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var Wi=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,{inputName:"logo",isEnable:e.isEnable,defaultValue:"default",bannerCode:"limit_admin_logo",helpDeskCode:123,helpMessageProvider:function e(){}}));i.getInputNode().type="hidden";i.getInputNode().disabled=true;return i}babelHelpers.createClass(t,[{key:"renderContentField",value:function e(){return this.getInputNode()}}]);return t}(h.TextInput);var xi=new WeakMap;var Xi=new WeakMap;var Yi=new WeakMap;var ji=new WeakMap;var Ki=new WeakMap;var qi=new WeakMap;var Qi=new WeakSet;var $i=new WeakSet;var Zi=new WeakSet;var Ji=new WeakSet;var ea=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);e.fieldView=new Wi({isEnable:e.canUserEditLogo});i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));Vi(babelHelpers.assertThisInitialized(i),Ji);Vi(babelHelpers.assertThisInitialized(i),Zi);Vi(babelHelpers.assertThisInitialized(i),$i);Vi(babelHelpers.assertThisInitialized(i),Qi);Bi(babelHelpers.assertThisInitialized(i),xi,{writable:true,value:void 0});Bi(babelHelpers.assertThisInitialized(i),Xi,{writable:true,value:void 0});Bi(babelHelpers.assertThisInitialized(i),Yi,{writable:true,value:void 0});Bi(babelHelpers.assertThisInitialized(i),ji,{writable:true,value:void 0});Bi(babelHelpers.assertThisInitialized(i),Ki,{writable:true,value:void 0});Bi(babelHelpers.assertThisInitialized(i),qi,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),Yi,e.siteLogoOptions);i.siteLogoLabel=e.siteLogoLabel;i.setEventNamespace("BX.Intranet.Settings");return i}babelHelpers.createClass(t,[{key:"initUploader",value:function e(t){var i=this;var a=t.TileWidget,n=t.StackWidget,s=t.StackWidgetSize;var l={maxFileCount:1,acceptOnlyImages:true,multiple:false,acceptedFileTypes:["image/png"],events:{onError:function e(t){console.error("File Uploader onError",t.getData().error)},"File:onError":this.onFileError.bind(this),"File:onAdd":this.onLogoAdd.bind(this),"File:onRemove":this.onLogoRemove.bind(this),onBeforeFilesAdd:this.getFieldView().isEnable()?function(){}:function(e){i.getFieldView().showBanner();e.preventDefault()}},allowReplaceSingle:true,hiddenFieldName:"logo_file",hiddenFieldsContainer:zi(this,Qi,ta).call(this),assignAsFile:true,imageResizeWidth:444,imageResizeHeight:110,imageResizeMode:"contain",imageResizeMimeType:"image/png",imagePreviewWidth:444,imagePreviewHeight:110,imagePreviewResizeMode:"contain",files:babelHelpers.classPrivateFieldGet(this,Yi)?[[1,{serverFileId:babelHelpers.classPrivateFieldGet(this,Yi).id,serverId:babelHelpers.classPrivateFieldGet(this,Yi).id,type:"image/png",width:babelHelpers.classPrivateFieldGet(this,Yi).width,height:babelHelpers.classPrivateFieldGet(this,Yi).height,treatImageAsFile:true,downloadUrl:babelHelpers.classPrivateFieldGet(this,Yi).src,serverPreviewUrl:babelHelpers.classPrivateFieldGet(this,Yi).src,serverPreviewWidth:babelHelpers.classPrivateFieldGet(this,Yi).width,serverPreviewHeight:babelHelpers.classPrivateFieldGet(this,Yi).height,src:babelHelpers.classPrivateFieldGet(this,Yi).src,preload:true}]]:null};babelHelpers.classPrivateFieldSet(this,Xi,new n(l,{size:s.LARGE}));return this}},{key:"onFileError",value:function e(t){console.error("File Error",t.getData().error);E.EventEmitter.subscribeOnce(E.EventEmitter.GLOBAL_TARGET,this.getEventNamespace()+":onAfterShowPage",this.removeFailedLogo.bind(this));var i=this.getParentElement();if(i){E.EventEmitter.subscribeOnce(i.getFieldView(),"onActive",this.removeFailedLogo.bind(this))}}},{key:"removeFailedLogo",value:function e(){var t=babelHelpers.classPrivateFieldGet(this,Xi).getUploader().getFiles()[0];if(t&&t.isLoadFailed()){babelHelpers.classPrivateFieldGet(this,Xi).getUploader().removeFiles()}}},{key:"onLogoAdd",value:function e(t){E.EventEmitter.emit(E.EventEmitter.GLOBAL_TARGET,this.getEventNamespace()+":Portal:Change",new E.BaseEvent({data:{logo:{src:t.getData().file.getClientPreviewUrl()}}}));this.getFieldView().getInputNode().disabled=false;this.getFieldView().getInputNode().value="add";this.getFieldView().getInputNode().form.dispatchEvent(new window.Event("change"))}},{key:"onLogoRemove",value:function e(t){E.EventEmitter.emit(E.EventEmitter.GLOBAL_TARGET,this.getEventNamespace()+":Portal:Change",new E.BaseEvent({data:{logo:null}}));this.getFieldView().getInputNode().disabled=false;this.getFieldView().getInputNode().value="remove";this.getFieldView().getInputNode().form.dispatchEvent(new window.Event("change"))}},{key:"getName",value:function e(){return"logo"}},{key:"cancel",value:function e(){}},{key:"render",value:function e(){var t=this;if(babelHelpers.classPrivateFieldGet(this,xi)){return babelHelpers.classPrivateFieldGet(this,xi)}babelHelpers.classPrivateFieldSet(this,xi,I.Tag.render(Oi||(Oi=babelHelpers.taggedTemplateLiteral(["<div></div>"]))));zi(this,Zi,aa).call(this);I.Runtime.loadExtension("ui.uploader.stack-widget").then((function(e){t.initUploader(e);zi(t,$i,ia).call(t);zi(t,Ji,na).call(t)}));return babelHelpers.classPrivateFieldGet(this,xi)}}]);return t}(T.SettingsField);function ta(){if(!babelHelpers.classPrivateFieldGet(this,ji)){babelHelpers.classPrivateFieldSet(this,ji,document.createElement("div"))}return babelHelpers.classPrivateFieldGet(this,ji)}function ia(){var e;var t=I.Tag.render(Mi||(Mi=babelHelpers.taggedTemplateLiteral(["<div></div>"])));var i=I.Tag.render(Di||(Di=babelHelpers.taggedTemplateLiteral(['<div>\n\t\t\t\t<div class="ui-section__field-label">',"</div>\n\t\t\t\t",'\n\t\t\t\t<div class="ui-section__field-label">',"</div>\n\t\t\t\t","\n\t\t\t\t","\n\t\t\t\t","\n\t\t\t</div>"])),(e=this.siteLogoLabel)!==null&&e!==void 0?e:I.Loc.getMessage("INTRANET_SETTINGS_SECTION_TAB_TITLE_WIDGET_LOGO_TITLE1"),t,I.Loc.getMessage("INTRANET_SETTINGS_SECTION_TAB_TITLE_WIDGET_LOGO_TITLE2"),this.getFieldView().getInputNode(),zi(this,Qi,ta).call(this),this.getFieldView().renderErrors());babelHelpers.classPrivateFieldGet(this,Xi).renderTo(t);I.Dom.replace(babelHelpers.classPrivateFieldGet(this,xi),i)}function aa(){babelHelpers.classPrivateFieldSet(this,qi,new S.Loader({target:babelHelpers.classPrivateFieldGet(this,xi),color:"rgba(82, 92, 105, 0.9)",mode:"inline"}));babelHelpers.classPrivateFieldGet(this,qi).show().then((function(){console.log("The loader is shown")}))}function na(){if(babelHelpers.classPrivateFieldGet(this,qi)){babelHelpers.classPrivateFieldGet(this,qi).destroy();babelHelpers.classPrivateFieldSet(this,qi,null)}}var sa;function la(e,t,i){ra(e,t);t.set(e,i)}function ra(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var oa=new WeakMap;var ca=function(e){babelHelpers.inherits(t,e);function t(e,i){var a;babelHelpers.classCallCheck(this,t);a=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));la(babelHelpers.assertThisInitialized(a),oa,{writable:true,value:void 0});a.setEventNamespace("BX.Intranet.Settings");Si(a.render(),e);E.EventEmitter.subscribe(E.EventEmitter.GLOBAL_TARGET,a.getEventNamespace()+":Portal:Change",a.onChange.bind(babelHelpers.assertThisInitialized(a)));if(i){Ii(a.render(),i===null||i===void 0?void 0:i.theme);E.EventEmitter.subscribe(E.EventEmitter.GLOBAL_TARGET,a.getEventNamespace()+":ThemePicker:Change",a.onSetTheme.bind(babelHelpers.assertThisInitialized(a)))}return a}babelHelpers.createClass(t,[{key:"onChange",value:function e(t){Si(this.render(),t.getData())}},{key:"onSetTheme",value:function e(t){Ii(this.render(),t.getData())}},{key:"render",value:function e(){if(!babelHelpers.classPrivateFieldGet(this,oa)){babelHelpers.classPrivateFieldSet(this,oa,I.Tag.render(sa||(sa=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<section class="intranet-settings__main-widget_section">\n\t\t\t\t<div class="intranet-settings__main-widget__bang"></div>\n\t\t\t\t\t<div class="intranet-settings__main-widget_bg"></div>\n\t\t\t\t\t<div class="intranet-settings__main-widget_pos-box">\n\t\t\t\t\t\t<aside class="intranet-settings__main-widget__aside">\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item --active"></div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t</aside>\n\t\t\t\t\t\t<main class="intranet-settings__main-widget_main">\n\t\t\t\t\t\t<div class="intranet-settings__main-widget_header"> \n\t\t\t\t\t\t\x3c!-- statement class. depends of content --with-logo --\x3e\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_logo" data-role="logo"></div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_name" data-role="title">Bitrix</div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_logo24" data-role="logo24">24</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_box">\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item"></div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_inline">\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --sm"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --bg-30"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_inner">\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --bg-30"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --bg-30"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --bg-30"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --bg-30"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --bg-30"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --bg-30"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --bg-30"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --bg-30"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --bg-30"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --bg-30"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --bg-30"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</main>\n\t\t\t\t\t</div>\t\t\t\t\n\t\t\t</section>']))))}return babelHelpers.classPrivateFieldGet(this,oa)}}]);return t}(E.EventEmitter);var da,ua;function va(e,t){pa(e,t);t.add(e)}function pa(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function ha(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var ba=new WeakSet;var ga=new WeakSet;var _a=function(e){babelHelpers.inherits(t,e);function t(){var e;babelHelpers.classCallCheck(this,t);e=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));va(babelHelpers.assertThisInitialized(e),ga);va(babelHelpers.assertThisInitialized(e),ba);e.titlePage=I.Loc.getMessage("INTRANET_SETTINGS_TITLE_PAGE_PORTAL");e.descriptionPage=I.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_PAGE_PORTAL");E.EventEmitter.subscribe(E.EventEmitter.GLOBAL_TARGET,e.getEventNamespace()+":Portal:Change",(function(t){if(!I.Type.isNil(t.data.title)){var i;(i=e.getAnalytic())===null||i===void 0?void 0:i.addEventConfigPortal(L.CHANGE_PORTAL_NAME)}else if(!I.Type.isNil(t.data.logo)){var a;(a=e.getAnalytic())===null||a===void 0?void 0:a.addEventConfigPortal(L.CHANGE_PORTAL_LOGO)}}));E.EventEmitter.subscribe(E.EventEmitter.GLOBAL_TARGET,e.getEventNamespace()+":ThemePicker:Change",(function(t){var i;(i=e.getAnalytic())===null||i===void 0?void 0:i.addEventConfigPortal(L.CHANGE_PORTAL_THEME)}));return e}babelHelpers.createClass(t,[{key:"getType",value:function e(){return"portal"}},{key:"headerWidgetRender",value:function e(){return""}},{key:"getSections",value:function e(){return[this.buildSiteTitleSection(this.getValue("portalSettings"),this.getValue("portalThemeSettings"),this.getValue("portalSettingsLabels")),this.getValue("portalDomainSettings")?this.buildDomainSection(this.getValue("portalDomainSettings")):null,this.buildThemeSection(this.getValue("portalThemeSettings"),this.getValue("portalSettings"))].filter((function(e){return e instanceof T.SettingsSection}))}},{key:"buildSiteTitleSection",value:function e(t,i,a){if(!this.hasValue("sectionCompanyTitle")){return}var n=new p.Section(this.getValue("sectionCompanyTitle"));var s=new T.SettingsSection({parent:this,section:n});n.append(new p.Row({content:new c.Alert({text:I.Loc.getMessage("INTRANET_SETTINGS_SECTION_TITLE_SITE_TITLE_DESCRIPTION"),inline:true,size:c.AlertSize.SMALL,color:c.AlertColor.PRIMARY}).getContainer()}).render());var l=new T.SettingsRow({row:new p.Row({className:"intranet-settings__grid_box"}),parent:s});var r=new ca(t,i);var o=new T.SettingsRow({row:new p.Row({className:"intranet-settings__site-logo_subrow --no-padding --bottom-separator --block"}),parent:l});var d=new T.TabsField({parent:o});var u=new T.TabField({parent:d,tabsOptions:this.getValue("tabCompanyTitle")});var v=new p.Row({});var b=new J({parent:v,siteTitleOptions:t,siteTitleLabels:a,helpMessages:{site:this.helpMessageProviderFactory()}});new T.SettingsRow({row:v,parent:u,child:b});new T.SettingsRow({parent:u,child:b.getLogo24Field()});var g=new T.TabField({parent:d,tabsOptions:this.getValue("tabCompanyLogo")});var _=new ea({siteLogoLabel:this.getValue("portalSettingsLabels").logo,siteLogoOptions:this.getValue("portalSettings").logo,canUserEditLogo:this.getValue("portalSettings").canUserEditLogo});new T.SettingsRow({parent:g,child:_});d.activateTab(u);new T.SettingsRow({row:new p.Row({content:r.render(),className:"intranet-settings__site-logo_subrow --no-padding"}),parent:l});new T.SettingsRow({row:new p.SeparatorRow,parent:s});new T.SettingsRow({parent:s,child:new T.SettingsField({fieldView:new h.TextInput({inputName:"name",label:this.getValue("portalSettingsLabels").name,value:this.getValue("portalSettings").name,placeholder:window.document.location.hostname,inputDefaultWidth:true})})});return s}},{key:"buildDomainSection",value:function e(t){var i=this;if(!this.hasValue("sectionSiteDomain")){return}var a=new p.Section(this.getValue("sectionSiteDomain"));var n=new T.SettingsSection({parent:this,section:a});a.append(new p.Row({content:new c.Alert({text:"\n\t\t\t\t\t\t".concat(I.Loc.getMessage("INTRANET_SETTINGS_SECTION_TITLE_SITE_DOMAIN_DESCRIPTION"),'\n\t\t\t\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show(\'redirect=detail&code=18213298\')">\n\t\t\t\t\t\t\t').concat(I.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE"),"\n\t\t\t\t\t\t</a>\n\t\t\t\t\t"),inline:true,size:c.AlertSize.SMALL,color:c.AlertColor.PRIMARY}).getContainer()}).render());var s=new T.SettingsRow({parent:n});var l=new T.TabsField({parent:s});var r=new T.TabField({parent:l,tabsOptions:this.getValue("tabDomainPrefix")});var o=new fi({siteDomainOptions:t,helpMessages:{site:this.helpMessageProviderFactory()}});I.Event.bind(o.getFieldView().getInputNode(),"keydown",(function(){var e;(e=i.getAnalytic())===null||e===void 0?void 0:e.addEventConfigPortal(L.CHANGE_PORTAL_SITE)}));var d=new p.Row({content:o.render()});new T.SettingsRow({row:d,parent:r,child:o});var u=new T.TabField({parent:l,tabsOptions:this.getValue("tabDomain")});var v=new p.Row({content:ha(this,ga,Ta).call(this,t)});new T.SettingsRow({row:v,parent:u});l.activateTab(r);return n}},{key:"buildThemeSection",value:function e(t,i){if(!this.hasValue("sectionSiteTheme")){return}var a=new p.Section(this.getValue("sectionSiteTheme"));var n=new T.SettingsSection({section:a,parent:this});new T.SettingsRow({row:new p.Row({content:new c.Alert({text:"\n\t\t\t\t\t\t".concat(I.Loc.getMessage("INTRANET_SETTINGS_SECTION_TITLE_PORTAL_THEME_DESCRIPTION"),'\n\t\t\t\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show(\'redirect=detail&code=18325288\')">\n\t\t\t\t\t\t\t').concat(I.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE"),"\n\t\t\t\t\t\t</a>\n\t\t\t\t\t"),inline:true,size:c.AlertSize.SMALL,color:c.AlertColor.PRIMARY}).getContainer()}),parent:n});new Gi({parent:n,portalSettings:i,themePickerSettings:t});return n}}]);return t}(T.BaseSettingsPage);function Ta(e){var t=I.Tag.render(da||(da=babelHelpers.taggedTemplateLiteral(['<div class="ui-icon-set --copy-plates intranet-settings__domain__list_btn"></div>'])));BX.clipboard.bindCopyClick(t,{text:function e(){return I.Loc.getMessage("INTRANET_SETTINGS_OWN_DOMAIN_HELP_DNS").replaceAll("<br>","\n")}});var i=I.Tag.render(ua||(ua=babelHelpers.taggedTemplateLiteral(['<div class="intranet-settings__domain__list_box">\n\t\t\t\t\t\t<ul class="intranet-settings__domain__list">\n\t\t\t\t\t\t\t<li class="intranet-settings__domain__list_item">\n\t\t\t\t\t\t\t\t','\n\t\t\t\t\t\t\t\t<div class="intranet-settings__domain_box">\n\t\t\t\t\t\t\t\t\t',"\n\t\t\t\t\t\t\t\t\t",'\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class="intranet-settings__domain__list_item">\n\t\t\t\t\t\t\t\t','\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class="intranet-settings__domain__list_item">\n\t\t\t\t\t\t\t\t','\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<a target="_blank" href="/settings/support.php" class="settings-tools-description-link">',"</a>\n\t\t\t\t\t</div>"])),I.Loc.getMessage("INTRANET_SETTINGS_OWN_DOMAIN_HELP1"),I.Loc.getMessage("INTRANET_SETTINGS_OWN_DOMAIN_HELP_DNS"),t,I.Loc.getMessage("INTRANET_SETTINGS_OWN_DOMAIN_HELP2"),I.Loc.getMessage("INTRANET_SETTINGS_OWN_DOMAIN_HELP3"),I.Loc.getMessage("INTRANET_SETTINGS_WRITE_TO_SUPPORT"));if(e.isCustomizable!==true){I.Event.bind(i.querySelector("a.settings-tools-description-link"),"click",(function(e){BX.UI.InfoHelper.show("limit_office_own_domain");e.preventDefault();return false}))}return i}var Ea,fa;function Sa(e,t){wa(e,t);t.add(e)}function Ia(e,t,i){wa(e,t);t.set(e,i)}function wa(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function ma(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var Na=new WeakMap;var Ha=new WeakSet;var Pa=new WeakSet;var Aa=new WeakSet;var ya=new WeakSet;var La=new WeakSet;var Ca=new WeakSet;var Ra=function(e){babelHelpers.inherits(t,e);function t(){var e;babelHelpers.classCallCheck(this,t);e=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));Sa(babelHelpers.assertThisInitialized(e),Ca);Sa(babelHelpers.assertThisInitialized(e),La);Sa(babelHelpers.assertThisInitialized(e),ya);Sa(babelHelpers.assertThisInitialized(e),Aa);Sa(babelHelpers.assertThisInitialized(e),Pa);Sa(babelHelpers.assertThisInitialized(e),Ha);Ia(babelHelpers.assertThisInitialized(e),Na,{writable:true,value:void 0});e.titlePage=I.Loc.getMessage("INTRANET_SETTINGS_TITLE_PAGE_CONFIGURATION");return e}babelHelpers.createClass(t,[{key:"getType",value:function e(){return"configuration"}},{key:"headerWidgetRender",value:function e(){var t="";if(this.getValue("isFormat24Hour")==="Y"){t=this.getValue("format24HourTime")}else{t=this.getValue("format12HourTime")}babelHelpers.classPrivateFieldSet(this,Na,I.Tag.render(Ea||(Ea=babelHelpers.taggedTemplateLiteral(['\n\t\t<div class="intranet-settings__date-widget_box">\n\t\t\t<span class="ui-icon-set --earth-language"></span>\n\t\t\t<div class="intranet-settings__date-widget_content">\n\t\t\t\t<div class="intranet-settings__date-widget_inner">\n\t\t\t\t\t<span data-role="time" class="intranet-settings__date-widget_title">','</span>\n\t\t\t\t\t<span class="intranet-settings__date-widget_subtitle">','</span>\n\t\t\t\t</div>\n\t\t\t\t<div data-role="date" class="intranet-settings__date-widget_subtitle">',"</div>\n\t\t\t</div>\n\t\t</div>"])),t,this.getValue("offsetUTC"),this.getValue("currentDate")));return babelHelpers.classPrivateFieldGet(this,Na)}},{key:"appendSections",value:function e(t){var i=ma(this,Ha,ka).call(this);i===null||i===void 0?void 0:i.renderTo(t);var a=ma(this,Pa,Fa).call(this);a===null||a===void 0?void 0:a.renderTo(t);if(this.hasValue("mapsProviderCRM")&&this.getValue("mapsProviderCRM")){var n=ma(this,Aa,Ga).call(this);n===null||n===void 0?void 0:n.renderTo(t)}var s=ma(this,ya,Oa).call(this);s===null||s===void 0?void 0:s.renderTo(t);var l=ma(this,La,Ma).call(this);l===null||l===void 0?void 0:l.renderTo(t)}}]);return t}(T.BaseSettingsPage);function ka(){var e=this;if(!this.hasValue("sectionDateFormat")){return}var t=new p.Section(this.getValue("sectionDateFormat"));var i=new T.SettingsSection({section:t,parent:this});if(this.hasValue("culture")){var a=new h.Selector(this.getValue("culture"));Ra.addToSectionHelper(a,i,new p.Row({className:"--intranet-settings__mb-20"}));I.Event.bind(a.getInputNode(),"change",(function(t){babelHelpers.classPrivateFieldGet(e,Na).querySelector('[data-role="date"]').innerHTML=e.getValue("longDates")[t.target.value]}))}if(this.hasValue("isFormat24Hour")){var n=new h.InlineChecker(this.getValue("isFormat24Hour"));Ra.addToSectionHelper(n,i);E.EventEmitter.subscribe(n,"change",(function(t){babelHelpers.classPrivateFieldGet(e,Na).querySelector('[data-role="time"]').innerHTML=n.isChecked()?e.getValue("format24HourTime"):e.getValue("format12HourTime")}))}return i}function Fa(){if(!this.hasValue("sectionLetters")){return}var e=new p.Section(this.getValue("sectionLetters"));var t=new T.SettingsSection({section:e,parent:this});if(this.hasValue("trackOutMailsRead")){var i=new h.Checker(this.getValue("trackOutMailsRead"));var a=new p.Row({});Ra.addToSectionHelper(i,t,a)}if(this.hasValue("trackOutMailsClick")){var n=new h.Checker(this.getValue("trackOutMailsClick"));var s=new p.Row({});Ra.addToSectionHelper(n,t,s)}if(this.hasValue("defaultEmailFrom")){var l=new h.TextInput(this.getValue("defaultEmailFrom"));var r=new p.Row({});Ra.addToSectionHelper(l,t,r)}return t}function Ga(){var e;if(!this.hasValue("sectionMapsInCrm")){return}var t=new p.Section(this.getValue("sectionMapsInCrm"));var i=new T.SettingsSection({section:t,parent:this});var a=new h.Selector({label:(e=this.getValue("mapsProviderCRM").label)!==null&&e!==void 0?e:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_CHOOSE_REGION_CRM_MAPS"),name:this.getValue("mapsProviderCRM").name,items:this.getValue("mapsProviderCRM").values,current:this.getValue("mapsProviderCRM").current});var n=new p.Row({separator:"bottom",className:"--block"});Ra.addToSectionHelper(a,i,n);var s=new p.SeparatorRow({isHidden:this.getValue("mapsProviderCRM").current==="OSM"});new T.SettingsRow({row:s,parent:i});var l=new BX.UI.Alert({text:I.Loc.getMessage("INTRANET_SETTINGS_SECTION_CRM_MAPS_DESCRIPTION",{"#GOOGLE_API_URL#":this.getValue("googleApiUrl")}),inline:true,size:BX.UI.Alert.Size.SMALL,color:BX.UI.Alert.Color.PRIMARY,animated:true});var r=new p.Row({separator:"top",content:l.getContainer(),isHidden:this.getValue("mapsProviderCRM").current==="OSM"});new T.SettingsRow({row:r,parent:i});var o=new h.TextInputInline({inputName:"API_KEY_FRONTEND",label:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_GOOGLE_KEY_PUBLIC"),hintTitle:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_GOOGLE_KEY_PUBLIC_HINT"),value:this.getValue("API_KEY_FRONTEND").value,placeholder:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_TEXT_KEY_PLACEHOLDER")});var c=new p.Row({isHidden:this.getValue("mapsProviderCRM").current==="OSM"});Ra.addToSectionHelper(o,i,c);var d=new h.TextInputInline({inputName:"API_KEY_BACKEND",label:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_GOOGLE_KEY_SERVER"),hintTitle:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_GOOGLE_KEY_SERVER_HINT"),value:this.getValue("API_KEY_BACKEND").value,placeholder:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_TEXT_KEY_PLACEHOLDER")});var u=new p.Row({content:d.render(),isHidden:this.getValue("mapsProviderCRM").current==="OSM",separator:"bottom",className:"--block"});Ra.addToSectionHelper(d,i,u);var v=new p.SeparatorRow({});new T.SettingsRow({row:v,parent:i});var b=new h.Checker({inputName:"SHOW_PHOTOS_ON_MAP",title:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_SHOW_PHOTO_PLACES_MAPS"),hintOn:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_SHOW_PHOTO_PLACES_MAPS_CLICK_ON"),hintOff:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_SHOW_PHOTO_PLACES_MAPS_CLICK_ON"),checked:this.getValue("SHOW_PHOTOS_ON_MAP").value==="1"});var g=new p.Row({separator:"top",className:"--block",content:b.render(),isHidden:this.getValue("mapsProviderCRM").current==="OSM"});Ra.addToSectionHelper(b,i,g);var _=new h.Checker({inputName:"USE_GEOCODING_SERVICE",title:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_SHOW_GEOCODING_SERVICE"),hintOn:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_SHOW_PHOTO_PLACES_MAPS_CLICK_ON"),hintOff:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_SHOW_PHOTO_PLACES_MAPS_CLICK_ON"),checked:this.getValue("USE_GEOCODING_SERVICE").value==="1"});var E=new p.Row({content:_.render(),isHidden:this.getValue("mapsProviderCRM").current==="OSM"});Ra.addToSectionHelper(_,i,E);a.getInputNode().addEventListener("change",(function(e){if(e.target.value==="OSM"){s.hide();r.hide();c.hide();u.hide();E.hide();g.hide()}else{s.show();r.show();c.show();u.show();E.show();g.show()}}));return i}function Oa(){if(!this.hasValue("sectionMapsInProduct")){return}var e=new p.Section(this.getValue("sectionMapsInProduct"));var t=new T.SettingsSection({section:e,parent:this});if(this.hasValue("cardsProviderProductProperties")){var i;var a=new h.Selector({label:(i=this.getValue("cardsProviderProductProperties").label)!==null&&i!==void 0?i:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_CHOOSE_REGION_CRM_MAPS"),name:this.getValue("cardsProviderProductProperties").name,items:this.getValue("cardsProviderProductProperties").values,current:this.getValue("cardsProviderProductProperties").current});var n=new p.Row({separator:"bottom"});Ra.addToSectionHelper(a,t,n);new T.SettingsRow({row:new p.SeparatorRow,parent:t});var s=new BX.UI.Alert({text:I.Loc.getMessage("INTRANET_SETTINGS_SECTION_CRM_MAPS_YANDEX_DESCRIPTION",{"#YANDEX_API_URL#":this.getValue("yandexApiUrl")}),inline:true,size:BX.UI.Alert.Size.SMALL,color:BX.UI.Alert.Color.PRIMARY,animated:true});var l=new p.Row({content:s.getContainer(),isHidden:this.getValue("cardsProviderProductProperties").current!=="yandex"});new T.SettingsRow({row:l,parent:t});var r=new h.TextInput({inputName:"yandexKeyProductProperties",label:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_MAP_PRODUCT_PROPERTIES_YANDEX_KEY"),value:this.getValue("yandexKeyProductProperties"),placeholder:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_TEXT_KEY_PLACEHOLDER")});var o=new p.Row({separator:"bottom",className:"--block",content:r.render(),isHidden:this.getValue("cardsProviderProductProperties").current!=="yandex"});Ra.addToSectionHelper(r,t,o);var c=new BX.UI.Alert({text:I.Loc.getMessage("INTRANET_SETTINGS_SECTION_CRM_MAPS_DESCRIPTION",{"#GOOGLE_API_URL#":this.getValue("googleApiUrl")}),inline:true,size:BX.UI.Alert.Size.SMALL,color:BX.UI.Alert.Color.PRIMARY,animated:true});var d=new p.Row({content:c.getContainer(),isHidden:this.getValue("cardsProviderProductProperties").current!=="google"});new T.SettingsRow({row:d,parent:t});var u=new h.TextInput({inputName:"googleKeyProductProperties",label:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_MAP_PRODUCT_PROPERTIES_GOOGLE_KEY"),value:this.getValue("googleKeyProductProperties"),placeholder:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_TEXT_KEY_PLACEHOLDER")});var v=new p.Row({content:u.render(),isHidden:this.getValue("cardsProviderProductProperties").current!=="google"});Ra.addToSectionHelper(u,t,v);a.getInputNode().addEventListener("change",(function(e){if(e.target.value==="yandex"){l.show();o.show();d.hide();v.hide()}else{l.hide();o.hide();d.show();v.show()}}))}return t}function Ma(){var e=this;if(!this.hasValue("sectionOther")){return}var t=new p.Section(this.getValue("sectionOther"));var i=new T.SettingsSection({section:t,parent:this});if(this.hasValue("allowUserInstallApplication")){var a=new h.Checker(this.getValue("allowUserInstallApplication"));var n=new p.Row({});E.EventEmitter.subscribe(a.switcher,"toggled",(function(){var t;(t=e.getAnalytic())===null||t===void 0?void 0:t.addEventConfigConfiguration(L.CHANGE_MARKET,a.isChecked())}));Ra.addToSectionHelper(a,i,n)}if(this.hasValue("allCanBuyTariff")){var s;var l=I.Tag.render(fa||(fa=babelHelpers.taggedTemplateLiteral(["<span>","</span>"])),I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE"));var r=new h.Checker({inputName:this.getValue("allCanBuyTariff").inputName,title:(s=this.getValue("allCanBuyTariff").title)!==null&&s!==void 0?s:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_ALL_CAN_BUY_TARIFF"),hintOn:this.getValue("allCanBuyTariff").hintOn,checked:this.getValue("allCanBuyTariff").checked,isEnable:this.getValue("allCanBuyTariff").isEnable,bannerCode:"limit_why_pay_tariff_everyone",helpMessageProvider:this.helpMessageProviderFactory(l)});var o=new p.Row({});E.EventEmitter.subscribe(r.switcher,"toggled",(function(){var t;(t=e.getAnalytic())===null||t===void 0?void 0:t.addEventConfigConfiguration(L.CHANGE_PAY_TARIFF,r.isChecked())}));Ra.addToSectionHelper(r,i,o)}if(this.hasValue("allowMeasureStressLevel")){var c=new h.Checker(this.getValue("allowMeasureStressLevel"));var d=new p.Row({});Ra.addToSectionHelper(c,i,d)}if(this.hasValue("collectGeoData")){var u=new h.Checker(this.getValue("collectGeoData"));E.EventEmitter.subscribe(u.switcher,"toggled",(function(){ma(e,Ca,Da).call(e,u)}));Ra.addToSectionHelper(u,i)}return i}function Da(e){if(e.isChecked()){BX.UI.Dialogs.MessageBox.show({modal:true,minWidth:640,title:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_COLLECT_GEO_DATA"),message:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_COLLECT_GEO_DATA_CONFIRM"),buttons:BX.UI.Dialogs.MessageBoxButtons.OK_CANCEL,okCaption:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_COLLECT_GEO_DATA_OK"),onCancel:function t(){e.switcher.check(false);return true},onOk:function e(){return true}})}}var Va,Ba,Ua;function za(e,t){Wa(e,t);t.add(e)}function Wa(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function xa(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var Xa=new WeakSet;var Ya=new WeakSet;var ja=new WeakSet;var Ka=new WeakSet;var qa=function(e){babelHelpers.inherits(t,e);function t(){var e;babelHelpers.classCallCheck(this,t);e=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));za(babelHelpers.assertThisInitialized(e),Ka);za(babelHelpers.assertThisInitialized(e),ja);za(babelHelpers.assertThisInitialized(e),Ya);za(babelHelpers.assertThisInitialized(e),Xa);e.titlePage=I.Loc.getMessage("INTRANET_SETTINGS_TITLE_PAGE_SCHEDULE");e.descriptionPage=I.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_PAGE_SCHEDULE");return e}babelHelpers.createClass(t,[{key:"getType",value:function e(){return"schedule"}},{key:"appendSections",value:function e(t){var i=xa(this,Ya,$a).call(this);i.renderTo(t);var a=xa(this,ja,Za).call(this);a.renderTo(t)}}]);return t}(T.BaseSettingsPage);function Qa(e){var t=new p.Row({className:"intranet-settings__work-time_container --no-padding"});var i=new T.SettingsRow({row:t,parent:e});if(this.hasValue("WORK_TIME_START")){var a=new h.Selector(this.getValue("WORK_TIME_START"));new T.SettingsRow({child:new T.SettingsField({fieldView:a}),parent:i,row:new p.Row({className:"intranet-settings__work-time_row"})})}new T.SettingsRow({row:new p.Row({className:"ui-section__field-inline-separator"}),parent:i});if(this.hasValue("WORK_TIME_END")){var n=new h.Selector(this.getValue("WORK_TIME_END"));new T.SettingsRow({child:new T.SettingsField({fieldView:n}),parent:i,row:new p.Row({className:"intranet-settings__work-time_row"})})}var s=I.Tag.render(Va||(Va=babelHelpers.taggedTemplateLiteral(["<div><div>"])));I.Dom.append(t.render(),s);if(this.hasValue("WEEK_DAYS")){var l;var r=new h.ItemPicker({inputName:this.getValue("WEEK_DAYS").inputName,isMulti:true,label:(l=this.getValue("WEEK_DAYS").label)!==null&&l!==void 0?l:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_WEEKEND"),items:this.getValue("WEEK_DAYS").values,current:this.getValue("WEEK_DAYS").multiValue});var o=new T.SettingsField({fieldView:r});var c=new p.Row({content:r.render()});new T.SettingsRow({row:c,child:o,parent:e});I.Dom.append(c.render(),s)}if(this.hasValue("WEEK_START")){var d=new h.ItemPicker(this.getValue("WEEK_START"));var u=new T.SettingsField({fieldView:d});I.Dom.addClass(d.render(),"--row-frame_gray");var v=new p.Row({content:d.render()});new T.SettingsRow({row:v,child:u,parent:e});I.Dom.append(v.render(),s)}return s}function $a(){if(!this.hasValue("sectionSchedule")){return}var e=new p.Section(this.getValue("sectionSchedule"));var t=new T.SettingsSection({parent:this,section:e});var i=new T.SettingsRow({parent:t});var a=new T.TabsField({parent:i});var n=new T.TabField({parent:a,tabsOptions:this.getValue("tabForCompany")});xa(this,Xa,Qa).call(this,n);if(this.getValue("TIMEMAN").enabled){var s=new T.TabField({parent:a,tabsOptions:this.getValue("tabForDepartment")});var l=new p.Row({content:xa(this,Ka,Ja).call(this)});new T.SettingsRow({row:l,parent:s})}a.activateTab(n);return t}function Za(){var e,t,i,a;if(!this.hasValue("sectionHoliday")){return}var n=new p.Section(this.getValue("sectionHoliday"));var s=new T.SettingsSection({parent:this,section:n});var l=(e=(t=this.getValue("year_holidays"))===null||t===void 0?void 0:(i=t.value)===null||i===void 0?void 0:(a=i.match(/\d{1,2}.\d{1,2}/gm))===null||a===void 0?void 0:a.length)!==null&&e!==void 0?e:0;var r=I.Tag.render(Ba||(Ba=babelHelpers.taggedTemplateLiteral(['<div class="ui-section__field-label">',"</div>"])),I.Loc.getMessage("INTRANET_SETTINGS_FIELD_INFO",{"#COUNT_DAYS#":l}));var o=new p.Row({content:r});n.append(o.render());if(this.hasValue("year_holidays")){var c=new h.TextInput(this.getValue("year_holidays"));qa.addToSectionHelper(c,s);I.Event.bind(c.getInputNode(),"keyup",(function(){var e,t,i;var a=(e=c===null||c===void 0?void 0:(t=c.getInputNode().value)===null||t===void 0?void 0:(i=t.match(/\d{1,2}.\d{1,2}/gm))===null||i===void 0?void 0:i.length)!==null&&e!==void 0?e:0;r.innerHTML=I.Loc.getMessage("INTRANET_SETTINGS_FIELD_INFO",{"#COUNT_DAYS#":a})}))}return s}function Ja(){return I.Tag.render(Ua||(Ua=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="intranet-settings__tab-info_container">\n\t\t\t\t<div class="intranet-settings__tab-info_text">','</div>\n\t\t\t\t<a href="/timeman/schedules/" class="ui-section__link" target="_blank">',"</a>\n\t\t\t</div>\n\t\t"])),I.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_FOR_DEPARTMENTS"),I.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_FOR_DEPARTMENTS_CONFIG"))}var en;function tn(e,t){an(e,t);t.add(e)}function an(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function nn(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var sn=new WeakSet;var ln=function(e){babelHelpers.inherits(t,e);function t(){var e;babelHelpers.classCallCheck(this,t);e=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));tn(babelHelpers.assertThisInitialized(e),sn);e.titlePage=I.Loc.getMessage("INTRANET_SETTINGS_TITLE_PAGE_GDPR");e.descriptionPage=I.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_PAGE_GDPR");return e}babelHelpers.createClass(t,[{key:"getType",value:function e(){return"gdpr"}},{key:"appendSections",value:function e(t){var i=nn(this,sn,rn).call(this);i===null||i===void 0?void 0:i.renderTo(t)}},{key:"addApplicationsRender",value:function e(){if(this.hasValue("marketDirectory")){var t=this.getValue("marketDirectory");return I.Tag.render(en||(en=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="ui-text-right">\n\t\t\t\t\t<a class="ui-section__link" href="','detail/integrations24.gdprstaff/">\n\t\t\t\t\t\t','\n\t\t\t\t\t</a>\n\t\t\t\t\t<a class="ui-section__link" style="margin-left: 12px;" href="','detail/integrations24.gdpr/">\n\t\t\t\t\t\t',"\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t"])),t,I.Loc.getMessage("INTRANET_SETTINGS_BUTTON_GDPR_APPLICATION_EMPLOYEE"),t,I.Loc.getMessage("INTRANET_SETTINGS_BUTTON_GDPR_APPLICATION_CRM"))}return null}}]);return t}(T.BaseSettingsPage);function rn(){if(!this.hasValue("sectionGdpr")){return}var e=new p.Section(this.getValue("sectionGdpr"));var t=new T.SettingsSection({section:e,parent:this});var i=new BX.UI.Alert({text:"\n\t\t\t\t".concat(I.Loc.getMessage("INTRANET_SETTINGS_SECTION_GDPR_DESCRIPTION"),'\n\t\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show(\'redirect=detail&code=7608199\')">\n\t\t\t\t\t').concat(I.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE"),'\n\t\t\t\t</a>\n\t\t\t\t</br>\n\t\t\t\t<a class="ui-section__link" href="').concat(this.getValue("dpaLink"),'" target="_blank">\n\t\t\t\t\t').concat(I.Loc.getMessage("INTRANET_SETTINGS_BUTTON_GDPR_AGREEMENT"),"\n\t\t\t\t</a>\n\t\t\t"),inline:true,size:BX.UI.Alert.Size.SMALL,color:BX.UI.Alert.Color.PRIMARY,animated:true});var a=new p.Row({content:i.getContainer()});new T.SettingsRow({row:a,parent:t});if(this.hasValue("companyTitle")){var n;var s=new h.TextInput({inputName:"companyTitle",label:(n=this.getValue("companyTitle").label)!==null&&n!==void 0?n:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_COMPANY_TITLE"),value:this.getValue("companyTitle").value,placeholder:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_PLACEHOLDER_COMPANY_TITLE")});var l=new T.SettingsField({fieldView:s});new T.SettingsRow({parent:t,child:l})}if(this.hasValue("contactName")){var r;var o=new h.TextInput({inputName:"contactName",label:(r=this.getValue("contactName").label)!==null&&r!==void 0?r:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_CONTACT_NAME"),value:this.getValue("contactName").value,placeholder:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_PLACEHOLDER_CONTACT_NAME")});var c=new T.SettingsField({fieldView:o});new T.SettingsRow({parent:t,child:c})}if(this.hasValue("notificationEmail")){var d;var u=new h.TextInput({inputName:"notificationEmail",label:(d=this.getValue("notificationEmail").label)!==null&&d!==void 0?d:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_NOTIFICATION_EMAIL"),value:this.getValue("notificationEmail").value,placeholder:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_PLACEHOLDER_NOTIFICATION_EMAIL")});var v=new T.SettingsField({fieldView:u});new T.SettingsRow({parent:t,child:v})}if(this.hasValue("date")){var b;var g=new h.TextInput({inputName:"date",label:(b=this.getValue("date").label)!==null&&b!==void 0?b:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_DATE"),value:this.getValue("date").value});I.Dom.adjust(g.render(),{events:{click:function e(t){BX.calendar({node:t.target,field:"date",form:"",bTime:false,bHideTime:true})}}});var _=new T.SettingsField({fieldView:g});new T.SettingsRow({parent:t,child:_})}new T.SettingsRow({row:new p.Row({content:this.addApplicationsRender()}),parent:t});return t}var on,cn,dn,un,vn,pn,hn,bn,gn;function _n(e,t){var i=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=Tn(e))||t&&e&&typeof e.length==="number"){if(i)e=i;var a=0;var n=function e(){};return{s:n,n:function t(){if(a>=e.length)return{done:true};return{done:false,value:e[a++]}},e:function e(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s=true,l=false,r;return{s:function t(){i=i.call(e)},n:function e(){var t=i.next();s=t.done;return t},e:function e(t){l=true;r=t},f:function e(){try{if(!s&&i["return"]!=null)i["return"]()}finally{if(l)throw r}}}}function Tn(e,t){if(!e)return;if(typeof e==="string")return En(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor)i=e.constructor.name;if(i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return En(e,t)}function En(e,t){if(t==null||t>e.length)t=e.length;for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function fn(e,t){In(e,t);t.add(e)}function Sn(e,t,i){In(e,t);t.set(e,i)}function In(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function wn(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var mn=new WeakMap;var Nn=new WeakMap;var Hn=new WeakMap;var Pn=new WeakSet;var An=new WeakSet;var yn=new WeakSet;var Ln=new WeakSet;var Cn=new WeakSet;var Rn=new WeakSet;var kn=new WeakSet;var Fn=new WeakSet;var Gn=new WeakSet;var On=new WeakSet;var Mn=new WeakSet;var Dn=new WeakSet;var Vn=new WeakSet;var Bn=new WeakSet;var Un=new WeakSet;var zn=new WeakSet;var Wn=function(e){babelHelpers.inherits(t,e);function t(){var e;babelHelpers.classCallCheck(this,t);e=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));fn(babelHelpers.assertThisInitialized(e),zn);fn(babelHelpers.assertThisInitialized(e),Un);fn(babelHelpers.assertThisInitialized(e),Bn);fn(babelHelpers.assertThisInitialized(e),Vn);fn(babelHelpers.assertThisInitialized(e),Dn);fn(babelHelpers.assertThisInitialized(e),Mn);fn(babelHelpers.assertThisInitialized(e),On);fn(babelHelpers.assertThisInitialized(e),Gn);fn(babelHelpers.assertThisInitialized(e),Fn);fn(babelHelpers.assertThisInitialized(e),kn);fn(babelHelpers.assertThisInitialized(e),Rn);fn(babelHelpers.assertThisInitialized(e),Cn);fn(babelHelpers.assertThisInitialized(e),Ln);fn(babelHelpers.assertThisInitialized(e),yn);fn(babelHelpers.assertThisInitialized(e),An);fn(babelHelpers.assertThisInitialized(e),Pn);Sn(babelHelpers.assertThisInitialized(e),mn,{writable:true,value:void 0});Sn(babelHelpers.assertThisInitialized(e),Nn,{writable:true,value:void 0});Sn(babelHelpers.assertThisInitialized(e),Hn,{writable:true,value:void 0});e.titlePage=I.Loc.getMessage("INTRANET_SETTINGS_TITLE_PAGE_SECURITY");e.descriptionPage=I.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_PAGE_SECURITY");return e}babelHelpers.createClass(t,[{key:"getType",value:function e(){return"security"}},{key:"appendSections",value:function e(t){var i,a;var n=this.hasValue("IS_BITRIX_24")&&this.getValue("IS_BITRIX_24");if(this.hasValue("SECURITY_OTP_ENABLED")&&this.getValue("SECURITY_OTP_ENABLED")){var s;(s=wn(this,Pn,xn).call(this))===null||s===void 0?void 0:s.renderTo(t)}(i=wn(this,Bn,is).call(this))===null||i===void 0?void 0:i.renderTo(t);(a=wn(this,Un,as).call(this))===null||a===void 0?void 0:a.renderTo(t);if(n){var l,r;(l=wn(this,kn,Qn).call(this))===null||l===void 0?void 0:l.renderTo(t);(r=wn(this,zn,ns).call(this))===null||r===void 0?void 0:r.renderTo(t)}}}]);return t}(T.BaseSettingsPage);function xn(){var e=this;if(!this.hasValue("sectionOtp")){return}var t=new p.Section(this.getValue("sectionOtp"));var i=new T.SettingsSection({section:t,parent:this});var a=new p.Row({content:wn(this,Cn,Kn).call(this).getContainer()});new T.SettingsRow({row:a,parent:i});if(this.hasValue("SECURITY_OTP")&&this.hasValue("SEND_OTP_PUSH")){var n=new p.Row({content:wn(this,An,Xn).call(this).render(),separator:wn(this,An,Xn).call(this).isChecked()?"":"bottom",className:wn(this,An,Xn).call(this).isChecked()?"":"--block"});new T.SettingsRow({row:n,parent:i});var s=new p.Row({content:wn(this,Ln,jn).call(this).render(),isHidden:!wn(this,An,Xn).call(this).isChecked()});new T.SettingsRow({row:s,parent:i});var l=I.Tag.render(on||(on=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="settings-switcher-wrapper">\n\t\t\t\t\t<div class="settings-security-message-switcher"/>\n\t\t\t\t</div>\n\t\t\t'])));new h.SingleChecker({switcher:new b.Switcher({node:l.querySelector(".settings-security-message-switcher"),inputName:"SEND_OTP_PUSH",checked:this.getValue("SEND_OTP_PUSH"),size:b.SwitcherSize.small})});var r=new p.Row({content:l,isHidden:!wn(this,An,Xn).call(this).isChecked()});l.append(I.Tag.render(cn||(cn=babelHelpers.taggedTemplateLiteral(['<span class="settings-switcher-title">',"</span>"])),I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_OTP_SWITCHING_MESSAGE_CHAT")));new T.SettingsRow({row:r,parent:i});E.EventEmitter.subscribe(wn(this,An,Xn).call(this).switcher,"toggled",(function(){if(e.getValue("SECURITY_IS_USER_OTP_ACTIVE")!==true&&wn(e,An,Xn).call(e).isChecked()){wn(e,yn,Yn).call(e).show();wn(e,An,Xn).call(e).cancel();wn(e,An,Xn).call(e).switcher.check(false);return}if(e.hasValue("SECURITY_OTP_ENABLED")&&e.getValue("SECURITY_OTP_ENABLED")){var t;(t=e.getAnalytic())===null||t===void 0?void 0:t.addEventToggle2fa(wn(e,An,Xn).call(e).isChecked())}if(wn(e,An,Xn).call(e).isChecked()){I.Dom.removeClass(n.render(),"--bottom-separator --block");s.show();r.show()}else{I.Dom.addClass(n.render(),"--bottom-separator --block");s.hide();r.hide()}}))}return i}function Xn(){if(babelHelpers.classPrivateFieldGet(this,mn)instanceof h.Checker){return babelHelpers.classPrivateFieldGet(this,mn)}if(this.hasValue("fieldSecurityOtp")){babelHelpers.classPrivateFieldSet(this,mn,new h.Checker({inputName:this.getValue("fieldSecurityOtp").inputName,checked:this.getValue("fieldSecurityOtp").checked,title:this.getValue("fieldSecurityOtp").title,isEnable:this.getValue("fieldSecurityOtp").isEnable,hideSeparator:true,alignCenter:true,noMarginBottom:true}))}babelHelpers.classPrivateFieldGet(this,mn).renderLockElement=function(){return null};return babelHelpers.classPrivateFieldGet(this,mn)}function Yn(){var e=this;if(babelHelpers.classPrivateFieldGet(this,Hn)instanceof f.Popup){return babelHelpers.classPrivateFieldGet(this,Hn)}var t=I.Tag.render(dn||(dn=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="intranet-settings__security_popup_info">\n\t\t\t\t',"\n\t\t\t</div>\t\n\t\t"])),I.Loc.getMessage("INTRANET_SETTINGS_POPUP_OTP_ENABLE"));var i=new BX.UI.Button({text:I.Loc.getMessage("INTRANET_SETTINGS_POPUP_OTP_ENABLE_BUTTON"),color:BX.UI.Button.Color.PRIMARY,events:{click:function t(){wn(e,yn,Yn).call(e).close();BX.SidePanel.Instance.open(e.getValue("SECURITY_OTP_PATH"))}}});var a=I.Tag.render(un||(un=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="intranet-settings__security_popup_container">\n\t\t\t\t','\n\t\t\t\t<div class="ui-btn-container ui-btn-container-center">\n\t\t\t\t\t',"\n\t\t\t\t</div>\t\t\t\n\t\t\t</div>\n\t\t"])),t,i.getContainer());babelHelpers.classPrivateFieldSet(this,Hn,new f.Popup({bindElement:babelHelpers.classPrivateFieldGet(this,mn).getInputNode(),content:a,autoHide:true,width:337,angle:{offset:200-15},offsetLeft:babelHelpers.classPrivateFieldGet(this,mn).getInputNode().offsetWidth-200+15,closeByEsc:true,borderRadius:18}));return babelHelpers.classPrivateFieldGet(this,Hn)}function jn(){if(babelHelpers.classPrivateFieldGet(this,Nn)instanceof h.Selector){return babelHelpers.classPrivateFieldGet(this,Nn)}babelHelpers.classPrivateFieldSet(this,Nn,new h.Selector({label:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_OTP_SWITCHING_PERIOD"),name:"SECURITY_OTP_DAYS",items:this.getValue("SECURITY_OTP_DAYS").ITEMS,current:this.getValue("SECURITY_OTP_DAYS").CURRENT}));return babelHelpers.classPrivateFieldGet(this,Nn)}function Kn(){return new BX.UI.Alert({text:wn(this,Rn,qn).call(this),inline:true,size:BX.UI.Alert.Size.SMALL,color:BX.UI.Alert.Color.PRIMARY,animated:true})}function qn(){return"\n\t\t".concat(I.Loc.getMessage("INTRANET_SETTINGS_SECTION_SECURITY_DESCRIPTION_FIRST"),'\n\t\t</br></br>\n\t\t<span class="settings-section-description-focus-text --security-info">\n\t\t\t').concat(I.Loc.getMessage("INTRANET_SETTINGS_SECTION_SECURITY_DESCRIPTION_SECOND"),'\n\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show(\'redirect=detail&code=17728602\')">\n\t\t\t\t').concat(I.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE"),"\n\t\t\t</a>\n\t\t</span>")}function Qn(){var e=this;if(!this.hasValue("sectionAccessIp")){return}var t=new p.Section(this.getValue("sectionAccessIp"));var i=new T.SettingsSection({section:t,parent:this});var a=new p.Row({content:wn(this,Dn,ts).call(this).getContainer()});new T.SettingsRow({row:a,parent:i});var n=0;if(this.hasValue("IP_ACCESS_RIGHTS")){var s=_n(this.getValue("IP_ACCESS_RIGHTS")),l;try{for(s.s();!(l=s.n()).done;){var r=l.value;n++;new T.SettingsRow({parent:i,child:wn(this,On,Jn).call(this,r)});new T.SettingsRow({parent:i,child:wn(this,Mn,es).call(this,r)})}}catch(e){s.e(e)}finally{s.f()}}if(n===0){n++;new T.SettingsRow({parent:i,child:wn(this,Fn,$n).call(this,n)});new T.SettingsRow({parent:i,child:wn(this,Gn,Zn).call(this,n)})}var o=function t(){if(e.getValue("IP_ACCESS_RIGHTS_ENABLED")){n++;var i=new p.Row({content:wn(e,Fn,$n).call(e,n).render()});I.Dom.insertBefore(i.render(),c.parentElement);var a=new p.Row({content:wn(e,Gn,Zn).call(e,n).render()});I.Dom.insertBefore(a.render(),c.parentElement)}else{BX.UI.InfoHelper.show("limit_admin_ip")}};var c=I.Tag.render(vn||(vn=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="ui-text-right">\n\t\t\t\t<a class="ui-section__link" href="javascript:void(0)" onclick="','">\n\t\t\t\t\t',"\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t"])),o,I.Loc.getMessage("INTRANET_SETTINGS_ADDITIONAL_USER_ACCESS_IP"));new T.SettingsRow({row:new p.Row({content:c}),parent:i});return i}function $n(e){var t=new h.UserSelector({inputName:"SECURITY_IP_ACCESS_".concat(e,"_USERS[]"),label:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_SELECT_USER_ACCESS_IP"),enableDepartments:true,encodeValue:function e(t){if(!I.Type.isNil(t.id)){return t.id==="all-users"?"AU":t.type+t.id.toString().split(":")[0]}return null},isEnable:this.getValue("IP_ACCESS_RIGHTS_ENABLED"),helpMessageProvider:this.helpMessageProviderFactory(I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE_PRO"))});return new T.SettingsField({fieldView:t})}function Zn(e){var t;var i="SECURITY_IP_ACCESS_".concat(e,"_IP");var a=new h.TextInput({inputName:i,label:(t=this.getValue("IP_ACCESS_RIGHTS_ENABLED_LABEL"))!==null&&t!==void 0?t:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_SELECT_ACCEPTED_IP"),isEnable:this.getValue("IP_ACCESS_RIGHTS_ENABLED"),helpMessageProvider:this.helpMessageProviderFactory(I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE_PRO"))});return new T.SettingsField({fieldView:a})}function Jn(e){var t;var i=new h.UserSelector({inputName:"SECURITY_IP_ACCESS_".concat(e.fieldNumber,"_USERS[]"),label:(t=this.getValue("IP_ACCESS_RIGHTS_ENABLED_LABEL"))!==null&&t!==void 0?t:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_SELECT_USER_ACCESS_IP"),values:Object.values(e.users),enableDepartments:true,encodeValue:function e(t){if(!I.Type.isNil(t.id)){return t.id==="all-users"?"AU":t.type+t.id.toString().split(":")[0]}return null},decodeValue:function e(t){if(t==="AU"){return{type:t,id:""}}var i=t.match(/^(U|DR|D)(\d+)/);if(!I.Type.isArray(i)){return{type:null,id:null}}return{type:i[1],id:i[2]}}});return new T.SettingsField({fieldView:i})}function es(e){var t="SECURITY_IP_ACCESS_".concat(e.fieldNumber,"_IP");var i=new h.TextInput({inputName:t,label:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_SELECT_ACCEPTED_IP"),value:e.ip});return new T.SettingsField({fieldView:i})}function ts(){return new BX.UI.Alert({text:"\n\t\t\t\t".concat(I.Loc.getMessage("INTRANET_SETTINGS_SECTION_SECURITY_DESCRIPTION_IP_ACCESS",{"#ARTICLE_CODE#":"redirect=detail&code=17300230"}),'\n\t\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show(\'redirect=detail&code=17300230\')">\n\t\t\t\t\t').concat(I.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE"),"\n\t\t\t\t</a>\n\t\t\t"),inline:true,size:BX.UI.Alert.Size.SMALL,color:BX.UI.Alert.Color.PRIMARY,animated:true})}function is(){var e=this;if(!this.hasValue("sectionHistory")){return}var t=new p.Section(this.getValue("sectionHistory"));var i=new T.SettingsSection({section:t,parent:this});var a=new BX.UI.Alert({text:"\n\t\t\t\t".concat(I.Loc.getMessage("INTRANET_SETTINGS_SECTION_SECURITY_DESCRIPTION_DEVICE_HISTORY"),'\n\t\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show(\'redirect=detail&code=16623484\')">\n\t\t\t\t\t').concat(I.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE"),"\n\t\t\t\t</a>\n\t\t\t"),inline:true,size:BX.UI.Alert.Size.SMALL,color:BX.UI.Alert.Color.PRIMARY,animated:true});var n=new p.Row({content:a.getContainer()});new T.SettingsRow({row:n,parent:i});if(this.hasValue("DEVICE_HISTORY_SETTINGS")){var s=I.Tag.render(pn||(pn=babelHelpers.taggedTemplateLiteral(["<span>","</span>"])),I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE_ENT",{"#TARIFF#":"ent250"}));var l=new h.Selector({label:this.getValue("DEVICE_HISTORY_SETTINGS").label,name:this.getValue("DEVICE_HISTORY_SETTINGS").name,items:this.getValue("DEVICE_HISTORY_SETTINGS").values,current:this.getValue("DEVICE_HISTORY_SETTINGS").current,isEnable:this.getValue("DEVICE_HISTORY_SETTINGS").isEnable,bannerCode:"limit_office_login_history",helpMessageProvider:this.helpMessageProviderFactory(s)});if(!this.getValue("DEVICE_HISTORY_SETTINGS").isEnable){I.Event.bind(l.getInputNode(),"click",(function(){var t;(t=e.getAnalytic())===null||t===void 0?void 0:t.addEventOpenHint(e.getValue("DEVICE_HISTORY_SETTINGS").name)}));I.Event.bind(s.querySelector("a"),"click",(function(){var t;return(t=e.getAnalytic())===null||t===void 0?void 0:t.addEventOpenTariffSelector(e.getValue("DEVICE_HISTORY_SETTINGS").name)}))}Wn.addToSectionHelper(l,i)}var r=I.Tag.render(hn||(hn=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="ui-text-right">\n\t\t\t\t<a class="ui-section__link" href="/company/" target="_blank">\n\t\t\t\t\t',"\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t"])),I.Loc.getMessage("INTRANET_SETTINGS_GO_TO_USER_LIST_LINK"));new T.SettingsRow({row:new p.Row({content:r}),parent:i});return i}function as(){if(!this.hasValue("sectionEventLog")){return}var e=new p.Section(this.getValue("sectionEventLog"));var t=new T.SettingsSection({section:e,parent:this});var i=new BX.UI.Alert({text:"\n\t\t\t\t".concat(I.Loc.getMessage("INTRANET_SETTINGS_SECTION_SECURITY_DESCRIPTION_EVENT_LOG"),'\n\t\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show(\'redirect=detail&code=17296266\')">\n\t\t\t\t\t').concat(I.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE"),"\n\t\t\t\t</a>\n\t\t\t"),inline:true,size:BX.UI.Alert.Size.SMALL,color:BX.UI.Alert.Color.PRIMARY,animated:true});var a=new p.Row({content:i.getContainer()});new T.SettingsRow({row:a,parent:t});var n=this.hasValue("EVENT_LOG")?I.Tag.render(bn||(bn=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="ui-text-right">\n\t\t\t\t\t<a class="ui-section__link" href="','" target="_blank">\n\t\t\t\t\t\t',"\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t"])),this.getValue("EVENT_LOG"),I.Loc.getMessage("INTRANET_SETTINGS_GO_TO_EVENT_LOG_LINK")):I.Tag.render(gn||(gn=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="ui-text-right">\n\t\t\t\t\t<a class="ui-section__link" href="javascript:void(0)" onclick="BX.UI.InfoHelper.show(\'limit_office_login_log\')">\n\t\t\t\t\t\t',"\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t"])),I.Loc.getMessage("INTRANET_SETTINGS_GO_TO_EVENT_LOG_LINK"));new T.SettingsRow({row:new p.Row({content:n}),parent:t});return t}function ns(){if(!this.hasValue("sectionBlackList")){return}var e=this.getValue("sectionBlackList");e["singleLink"]={href:"/settings/configs/mail_blacklist.php"};return new p.Section(e)}function ss(e,t,i){ls(e,t);t.set(e,i)}function ls(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var rs=new WeakMap;var os=new WeakMap;var cs=function(e){babelHelpers.inherits(t,e);function t(e,i){var a;babelHelpers.classCallCheck(this,t);a=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));ss(babelHelpers.assertThisInitialized(a),rs,{writable:true,value:void 0});ss(babelHelpers.assertThisInitialized(a),os,{writable:true,value:[]});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),rs,e);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),os,i);return a}babelHelpers.createClass(t,[{key:"getType",value:function e(){return babelHelpers.classPrivateFieldGet(this,rs)}},{key:"onSuccessDataFetched",value:function e(t){var i=this;I.Runtime.loadExtension(babelHelpers.classPrivateFieldGet(this,os)).then((function(e){var a;var n=Object.values(e).some((function(e){if(I.Type.isObjectLike(e)){var t=null;if(e.prototype instanceof T.BaseSettingsPage){t=new e}else if(e instanceof T.BaseSettingsPage){t=e}if(t instanceof T.BaseSettingsPage){a=t;return true}}return false}));if(n===false){var s=new E.BaseEvent;n=E.EventEmitter.emit(E.EventEmitter.GLOBAL_TARGET,"BX.Intranet.Settings:onExternalPageLoaded:"+i.getType(),s).some((function(e){if(e instanceof T.BaseSettingsPage){a=e;return true}return false}))}if(a instanceof T.BaseSettingsPage){i.getParentElement().registerPage(a);a.setData(t.data);i.getParentElement().removeChild(i);if(I.Dom.isShown(i.getPage())){a.getParentElement().show(a.getType())}}else{i.onFailDataFetched("The external page was not found.")}}),this.onFailDataFetched.bind(this))}}]);return t}(T.BaseSettingsPage);function ds(e,t,i){us(e,t);t.set(e,i)}function us(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var vs=new WeakMap;var ps=function(){function e(t){babelHelpers.classCallCheck(this,e);ds(this,vs,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,vs,t)}babelHelpers.createClass(e,[{key:"fetchPage",value:function e(t){var i=this;return new Promise((function(e,a){var n=babelHelpers.classPrivateFieldGet(i,vs).some((function(i){if(t.getType()===i.getType()){I.ajax.runComponentAction("bitrix:intranet.settings","get",{mode:"class",data:{type:t.getType()}}).then(e,a);return true}return false}));if(n!==true){return a({error:"The page was not found in pageManager"})}}))}},{key:"collectData",value:function e(){var t=this;var i={};babelHelpers.classPrivateFieldGet(this,vs).forEach((function(e){if(e.hasData()){i[e.getType()]=t.constructor.getFormData(e.getFormNode())}}));return i}}],[{key:"getFormData",value:function e(t){return BX.ajax.prepareForm(t).data}}]);return e}();var hs=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,[{key:"fetch",value:function e(t){return new Promise}}]);return e}();function bs(e,t,i){gs(e,t);t.set(e,i)}function gs(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var _s=new WeakMap;var Ts=new WeakMap;var Es=new WeakMap;var fs=new WeakMap;var Ss=new WeakMap;var Is=function(){function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:3;babelHelpers.classCallCheck(this,e);bs(this,_s,{writable:true,value:void 0});bs(this,Ts,{writable:true,value:void 0});bs(this,Es,{writable:true,value:void 0});bs(this,fs,{writable:true,value:void 0});bs(this,Ss,{writable:true,value:void 0});if(!(t instanceof hs)){throw new Error("Unexpected type, expect: DataSource")}babelHelpers.classPrivateFieldSet(this,Es,t);babelHelpers.classPrivateFieldSet(this,Ts,i);babelHelpers.classPrivateFieldSet(this,fs,[]);babelHelpers.classPrivateFieldSet(this,Ss,"ready")}babelHelpers.createClass(e,[{key:"find",value:function t(i){if(i.length<babelHelpers.classPrivateFieldGet(this,Ts)){return}babelHelpers.classPrivateFieldSet(this,_s,i);this.changeState(e.STATE_WAIT);babelHelpers.classPrivateFieldGet(this,Es).fetch(babelHelpers.classPrivateFieldGet(this,_s)).then(this.resolve.bind(this),this.reject.bind(this))}},{key:"changeState",value:function e(t){if(babelHelpers.classPrivateFieldGet(this,Ss)===t){return}babelHelpers.classPrivateFieldSet(this,Ss,t);E.EventEmitter.emit(E.EventEmitter.GLOBAL_TARGET,"BX.Intranet.Settings:searchChangeState",{state:babelHelpers.classPrivateFieldGet(this,Ss)})}},{key:"getMinSymbol",value:function e(){return babelHelpers.classPrivateFieldGet(this,Ts)}},{key:"resolve",value:function t(i){babelHelpers.classPrivateFieldSet(this,fs,i.data);this.changeState(babelHelpers.classPrivateFieldGet(this,fs).length>0?e.STATE_READY:e.STATE_NOT_FOUND)}},{key:"reject",value:function t(i){babelHelpers.classPrivateFieldSet(this,fs,[]);this.changeState(e.STATE_READY)}},{key:"getResult",value:function e(){return babelHelpers.classPrivateFieldGet(this,fs)}},{key:"getOthers",value:function e(){return[{link:"/stream/",title:I.Loc.getMessage("INTRANET_SETTINGS_TITLE_TOOL_TEAMWORK")},{link:"/tasks/config/permissions/",title:I.Loc.getMessage("INTRANET_SETTINGS_TITLE_TOOL_TASKS")},{link:"/crm/configs/",title:I.Loc.getMessage("INTRANET_SETTINGS_TITLE_TOOL_CRM")},{link:"/shop/documents/?inventoryManagementSource=inventory",title:I.Loc.getMessage("INTRANET_SETTINGS_TITLE_TOOL_WAREHOUSE")},{link:"/sites/",title:I.Loc.getMessage("INTRANET_SETTINGS_TITLE_TOOL_SITES")},{link:"/company/vis_structure.php",title:I.Loc.getMessage("INTRANET_SETTINGS_TITLE_TOOL_COMPANY")}]}}]);return e}();babelHelpers.defineProperty(Is,"STATE_READY","ready");babelHelpers.defineProperty(Is,"STATE_WAIT","wait");babelHelpers.defineProperty(Is,"STATE_NOT_FOUND","not_found");var ws,ms,Ns,Hs,Ps,As,ys,Ls,Cs,Rs,ks,Fs,Gs,Os,Ms;function Ds(e,t,i){Vs(e,t);t.set(e,i)}function Vs(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var Bs=new WeakMap;var Us=new WeakMap;var zs=new WeakMap;var Ws=new WeakMap;var xs=new WeakMap;var Xs=new WeakMap;var Ys=new WeakMap;var js=function(){function e(t){var i=this;babelHelpers.classCallCheck(this,e);Ds(this,Bs,{writable:true,value:void 0});Ds(this,Us,{writable:true,value:void 0});Ds(this,zs,{writable:true,value:void 0});Ds(this,Ws,{writable:true,value:void 0});Ds(this,xs,{writable:true,value:void 0});Ds(this,Xs,{writable:true,value:void 0});Ds(this,Ys,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,Bs,t.searcher);babelHelpers.classPrivateFieldSet(this,Us,t.inputNode);babelHelpers.classPrivateFieldSet(this,zs,t.iconContainer);babelHelpers.classPrivateFieldSet(this,Xs,t.timeout);babelHelpers.classPrivateFieldSet(this,Ys,new Qs);babelHelpers.classPrivateFieldSet(this,Ws,new f.Popup("settings-search-popup",babelHelpers.classPrivateFieldGet(this,Us),{closeByEsc:true,angle:false,overlay:false,width:332,offsetTop:4,background:"#fff",contentBackground:"#fff",contentPadding:0,autoHide:true,borderRadius:6,autoHideHandler:function e(t){return t.target!==babelHelpers.classPrivateFieldGet(i,Us)}}));babelHelpers.classPrivateFieldGet(this,Ws).setContent(this.renderContent());I.Event.bind(babelHelpers.classPrivateFieldGet(this,Us),"focus",(function(){if(!babelHelpers.classPrivateFieldGet(i,Ws).isShown()){babelHelpers.classPrivateFieldGet(i,Ws).show()}}));E.EventEmitter.subscribe("BX.Intranet.Settings:searchChangeState",(function(e){var t=e.data.state;babelHelpers.classPrivateFieldGet(i,Ys).clean();babelHelpers.classPrivateFieldGet(i,Ws).setContent(i.renderContent(t))}));I.Event.bind(babelHelpers.classPrivateFieldGet(this,zs).querySelector("#intranet-settings-icon-delete"),"click",(function(){I.Dom.removeClass(babelHelpers.classPrivateFieldGet(i,zs),"main-ui-show");babelHelpers.classPrivateFieldGet(i,Us).value=""}));I.Event.bind(babelHelpers.classPrivateFieldGet(this,Us),"keyup",(function(e){if(e.keyCode===37||e.keyCode===39){return}if(e.keyCode===13){babelHelpers.classPrivateFieldGet(i,Ys).current().dispatchEvent(new MouseEvent("click"));babelHelpers.classPrivateFieldGet(i,Ys).unHighlightAll();return}if(e.keyCode===38){babelHelpers.classPrivateFieldGet(i,Ys).prev().highlight();if(!I.Type.isNil(babelHelpers.classPrivateFieldGet(i,Ys).current())){i.updateScroll(babelHelpers.classPrivateFieldGet(i,Ys).current())}return}if(e.keyCode===40){babelHelpers.classPrivateFieldGet(i,Ys).next().highlight();if(!I.Type.isNil(babelHelpers.classPrivateFieldGet(i,Ys).current())){i.updateScroll(babelHelpers.classPrivateFieldGet(i,Ys).current())}return}if(i.getQuery().length>0){I.Dom.addClass(babelHelpers.classPrivateFieldGet(i,zs),"main-ui-show")}else{I.Dom.removeClass(babelHelpers.classPrivateFieldGet(i,zs),"main-ui-show")}if(!babelHelpers.classPrivateFieldGet(i,Ws).isShown()&&i.getQuery().length>0){babelHelpers.classPrivateFieldGet(i,Ws).show()}i.find()}))}babelHelpers.createClass(e,[{key:"updateScroll",value:function e(t){var i=t.getBoundingClientRect();var a=babelHelpers.classPrivateFieldGet(this,Ws).getContentContainer().firstElementChild;var n=i.top-a.getBoundingClientRect().top;var s=i.bottom-a.getBoundingClientRect().bottom;var l=10;if(n<0&&s<=0){a.scrollTo(0,n+a.scrollTop-l)}else if(n>=0&&s>0){a.scrollTo(0,s+a.scrollTop+l)}}},{key:"renderWait",value:function e(){var t=I.Tag.render(ws||(ws=babelHelpers.taggedTemplateLiteral(['<span class="title-search-waiter-img"></span>'])));var i=new S.Loader({target:t,size:20,mode:"inline"});i.show();return I.Tag.render(ms||(ms=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="title-search-waiter">\n\t\t\t\t','\n\t\t\t\t<span class="title-search-waiter-text">',"</span>\n\t\t\t</div>\n\t\t"])),t,I.Loc.getMessage("INTRANET_SETTINGS_TITLE_SEARCHING"))}},{key:"find",value:function e(){var t=this;clearTimeout(babelHelpers.classPrivateFieldGet(this,xs));babelHelpers.classPrivateFieldSet(this,xs,setTimeout((function(){babelHelpers.classPrivateFieldGet(t,Bs).find(t.getQuery())}),babelHelpers.classPrivateFieldGet(this,Xs)))}},{key:"getQuery",value:function e(){return BX.util.trim(babelHelpers.classPrivateFieldGet(this,Us).value)}},{key:"createLinkOption",value:function e(t){var i=this;var a=I.Dom.create("a",{props:{className:"search-title-top-item-link"},events:{mouseenter:function e(t){babelHelpers.classPrivateFieldGet(i,Ys).unHighlightAll();babelHelpers.classPrivateFieldGet(i,Ys).cursorTo(t.target);Qs.highlight(t.target)},mouseleave:function e(t){Qs.unHighlight(t.target)}},attrs:{title:t.title,href:I.Type.isStringFilled(t.url)?t.url:"#",target:"_blank"},children:[I.Tag.render(Ns||(Ns=babelHelpers.taggedTemplateLiteral(['<span class="search-title-top-item-text"><span>',"</span></span>"])),t.title)]});babelHelpers.classPrivateFieldGet(this,Ys).add(a);return a}},{key:"createBtnOption",value:function e(t,i){var a=this;var n=I.Dom.create("a",{props:{className:"search-title-top-item-link"},events:{click:function e(n){E.EventEmitter.emit(E.EventEmitter.GLOBAL_TARGET,"BX.Intranet.SettingsNavigation:onMove",{page:t,fieldName:i.code});babelHelpers.classPrivateFieldGet(a,Us).blur();babelHelpers.classPrivateFieldGet(a,Ws).close();n.preventDefault()},mouseenter:function e(t){babelHelpers.classPrivateFieldGet(a,Ys).unHighlightAll();babelHelpers.classPrivateFieldGet(a,Ys).cursorTo(t.target);Qs.highlight(t.target)},mouseleave:function e(t){Qs.unHighlight(t.target)}},attrs:{title:i.title,href:"#"},children:[I.Tag.render(Hs||(Hs=babelHelpers.taggedTemplateLiteral(['<span class="search-title-top-item-text"><span>',"</span></span>"])),i.title)]});babelHelpers.classPrivateFieldGet(this,Ys).add(n);return I.Tag.render(Ps||(Ps=babelHelpers.taggedTemplateLiteral(['<div class="search-title-top-item search-title-top-item-js">',"</div>"])),n)}},{key:"renderOption",value:function t(i,a){var n;if(i===e.EXTERNAL_LINK){n=this.createLinkOption(a)}else{n=this.createBtnOption(i,a)}return I.Tag.render(As||(As=babelHelpers.taggedTemplateLiteral(['<div class="search-title-top-item search-title-top-item-js">',"</div>"])),n)}},{key:"renderGroup",value:function e(t){var i=this;var a=I.Tag.render(ys||(ys=babelHelpers.taggedTemplateLiteral(['<div class="search-title-top-list search-title-top-list-js"></div>'])));t.options.forEach((function(e){I.Dom.append(i.renderOption(t.page,e),a)}));return I.Tag.render(Ls||(Ls=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="search-title-top-block search-title-top-block-sonetgroups">\n\t\t\t\t<div class="search-title-top-subtitle">\n\t\t\t\t\t<div class="search-title-top-subtitle-text">','</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="search-title-top-list-wrap">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),t.title,a)}},{key:"renderContent",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"ready";var i=I.Tag.render(Cs||(Cs=babelHelpers.taggedTemplateLiteral(['<div class="search-title-top-result"></div>'])));switch(t){case"ready":I.Dom.append(this.renderSearchResult(babelHelpers.classPrivateFieldGet(this,Bs).getResult()),i);break;case"wait":I.Dom.append(this.renderWait(),i);break;case"not_found":I.Dom.append(this.renderNotFound(),i);break}I.Dom.append(this.renderOthers(babelHelpers.classPrivateFieldGet(this,Bs).getOthers()),i);return i}},{key:"renderNotFound",value:function e(){return I.Tag.render(Rs||(Rs=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="title-search-waiter">\n\t\t\t\t<span class="title-search-waiter-text">',"</span>\n\t\t\t</div>\n\t\t"])),I.Loc.getMessage("INTRANET_SETTINGS_SEARCH_NOT_FOUND"))}},{key:"renderSearchResult",value:function e(t){var i=this;var a=I.Tag.render(ks||(ks=babelHelpers.taggedTemplateLiteral(['<div class="search-title-content-result"></div>'])));t.forEach((function(e){I.Dom.append(i.renderGroup(e),a)}));return a}},{key:"renderOthers",value:function e(t){var i=this;var a=I.Tag.render(Fs||(Fs=babelHelpers.taggedTemplateLiteral(['<div class="search-title-top-list search-title-top-list-js"></div>'])));var n=I.Tag.render(Gs||(Gs=babelHelpers.taggedTemplateLiteral(['\n\t\t<div class="search-title-top-block search-title-top-block-tools">\n\t\t\t<div class="search-title-top-subtitle">\n\t\t\t\t<div class="search-title-top-subtitle-text">','</div>\n\t\t\t</div>\n\t\t\t<div class="search-title-top-list-height-wrap">\n\t\t\t\t\t<div class="search-title-top-list-wrap">',"</div>\n\t\t\t\t</div>\n\t\t</div>\n\t\t"])),I.Loc.getMessage("INTRANET_SETTINGS_TITLE_SEARCH_IN"),a);t.forEach((function(e){I.Dom.append(i.renderOtherLink(e),a)}));return n}},{key:"renderOtherLink",value:function e(t){var i=this;var a=I.Dom.create("a",{props:{className:"search-title-top-item-link"},events:{mouseenter:function e(t){babelHelpers.classPrivateFieldGet(i,Ys).unHighlightAll();babelHelpers.classPrivateFieldGet(i,Ys).cursorTo(t.target);Qs.highlight(t.target)},mouseleave:function e(t){Qs.unHighlight(t.target)}},attrs:{title:t.title,href:t.link,target:"blank_"},children:[I.Tag.render(Os||(Os=babelHelpers.taggedTemplateLiteral(['<span class="search-title-top-item-text"><span>',"</span></span>"])),t.title)]});babelHelpers.classPrivateFieldGet(this,Ys).add(a);return I.Tag.render(Ms||(Ms=babelHelpers.taggedTemplateLiteral(['\n\t\t<div class="search-title-top-item search-title-top-item-js">\n\t\t\t',"\n\t\t</div>"])),a)}}]);return e}();babelHelpers.defineProperty(js,"EXTERNAL_LINK","EXTERNAL_LINKS");var Ks=new WeakMap;var qs=new WeakMap;var Qs=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];babelHelpers.classCallCheck(this,e);Ds(this,Ks,{writable:true,value:null});Ds(this,qs,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,qs,t)}babelHelpers.createClass(e,[{key:"add",value:function e(t){babelHelpers.classPrivateFieldGet(this,qs).push(t)}},{key:"clean",value:function e(){babelHelpers.classPrivateFieldSet(this,Ks,null);babelHelpers.classPrivateFieldSet(this,qs,[])}},{key:"next",value:function e(){if(I.Type.isNil(babelHelpers.classPrivateFieldGet(this,Ks))){babelHelpers.classPrivateFieldSet(this,Ks,0);return this}if(babelHelpers.classPrivateFieldGet(this,qs).length-1>babelHelpers.classPrivateFieldGet(this,Ks)){var t,i;babelHelpers.classPrivateFieldSet(this,Ks,(t=babelHelpers.classPrivateFieldGet(this,Ks),i=t++,t)),i}return this}},{key:"current",value:function e(){if(I.Type.isNil(babelHelpers.classPrivateFieldGet(this,Ks))){return null}return babelHelpers.classPrivateFieldGet(this,qs)[babelHelpers.classPrivateFieldGet(this,Ks)]}},{key:"prev",value:function e(){if(I.Type.isNil(babelHelpers.classPrivateFieldGet(this,Ks))){babelHelpers.classPrivateFieldSet(this,Ks,babelHelpers.classPrivateFieldGet(this,qs).length-1);return this}if(babelHelpers.classPrivateFieldGet(this,Ks)>0){babelHelpers.classPrivateFieldSet(this,Ks,babelHelpers.classPrivateFieldGet(this,Ks)-1)}return this}},{key:"highlight",value:function e(){this.unHighlightAll();if(!I.Dom.hasClass(this.current(),"active")){I.Dom.addClass(this.current(),"active")}return this}},{key:"unHighlight",value:function e(){if(I.Dom.hasClass(this.current(),"active")){I.Dom.removeClass(this.current(),"active")}return this}},{key:"cursorTo",value:function e(t){var i=this;babelHelpers.classPrivateFieldGet(this,qs).forEach((function(e,a){if(e===t){babelHelpers.classPrivateFieldSet(i,Ks,a);return}}))}},{key:"unHighlightAll",value:function t(){babelHelpers.classPrivateFieldGet(this,qs).forEach((function(t){e.unHighlight(t)}))}}],[{key:"highlight",value:function e(t){t.classList.add("active")}},{key:"unHighlight",value:function e(t){t.classList.remove("active")}}]);return e}();var $s=function(e){babelHelpers.inherits(t,e);function t(){babelHelpers.classCallCheck(this,t);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this))}babelHelpers.createClass(t,[{key:"fetch",value:function e(t){return I.ajax.runComponentAction("bitrix:intranet.settings","search",{mode:"class",data:{query:t}})}}]);return t}(hs);function Zs(e,t){var i=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=Js(e))||t&&e&&typeof e.length==="number"){if(i)e=i;var a=0;var n=function e(){};return{s:n,n:function t(){if(a>=e.length)return{done:true};return{done:false,value:e[a++]}},e:function e(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s=true,l=false,r;return{s:function t(){i=i.call(e)},n:function e(){var t=i.next();s=t.done;return t},e:function e(t){l=true;r=t},f:function e(){try{if(!s&&i["return"]!=null)i["return"]()}finally{if(l)throw r}}}}function Js(e,t){if(!e)return;if(typeof e==="string")return el(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor)i=e.constructor.name;if(i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return el(e,t)}function el(e,t){if(t==null||t>e.length)t=e.length;for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function tl(e,t){al(e,t);t.add(e)}function il(e,t,i){al(e,t);t.set(e,i)}function al(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function nl(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var sl=new WeakMap;var ll=new WeakMap;var rl=new WeakMap;var ol=new WeakMap;var cl=new WeakMap;var dl=new WeakMap;var ul=new WeakMap;var vl=new WeakMap;var pl=new WeakSet;var hl=new WeakSet;var bl=new WeakSet;var gl=new WeakSet;var _l=new WeakSet;var Tl=new WeakSet;var El=new WeakSet;var fl=new WeakSet;var Sl=new WeakSet;var Il=new WeakSet;var wl=new WeakSet;var ml=new WeakSet;var Nl=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));tl(babelHelpers.assertThisInitialized(i),ml);tl(babelHelpers.assertThisInitialized(i),wl);tl(babelHelpers.assertThisInitialized(i),Il);tl(babelHelpers.assertThisInitialized(i),Sl);tl(babelHelpers.assertThisInitialized(i),fl);tl(babelHelpers.assertThisInitialized(i),El);tl(babelHelpers.assertThisInitialized(i),Tl);tl(babelHelpers.assertThisInitialized(i),_l);tl(babelHelpers.assertThisInitialized(i),gl);tl(babelHelpers.assertThisInitialized(i),bl);tl(babelHelpers.assertThisInitialized(i),hl);tl(babelHelpers.assertThisInitialized(i),pl);il(babelHelpers.assertThisInitialized(i),sl,{writable:true,value:void 0});babelHelpers.defineProperty(babelHelpers.assertThisInitialized(i),"isChanged",false);il(babelHelpers.assertThisInitialized(i),ll,{writable:true,value:void 0});il(babelHelpers.assertThisInitialized(i),rl,{writable:true,value:void 0});il(babelHelpers.assertThisInitialized(i),ol,{writable:true,value:void 0});il(babelHelpers.assertThisInitialized(i),cl,{writable:true,value:void 0});il(babelHelpers.assertThisInitialized(i),dl,{writable:true,value:void 0});il(babelHelpers.assertThisInitialized(i),ul,{writable:true,value:void 0});il(babelHelpers.assertThisInitialized(i),vl,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),ul,new A({isAdmin:true,locationName:"settings",isBitrix24:e.isBitrix24===true,analyticContext:I.Type.isStringFilled(e.analyticContext)?e.analyticContext:null}));babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(i),ul).addEventOpenSettings();babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(i),ul).addEventStartPagePage(e.startPage);i.setEventNamespace("BX.Intranet.Settings");E.EventEmitter.subscribe(E.EventEmitter.GLOBAL_TARGET,"button-click",(function(e){var t=babelHelpers.slicedToArray(e.data,1),a=t[0];if(a.TYPE==="save"){nl(babelHelpers.assertThisInitialized(i),Tl,Cl).call(babelHelpers.assertThisInitialized(i),e)}}));E.EventEmitter.subscribe(E.EventEmitter.GLOBAL_TARGET,"SidePanel.Slider:onClose",nl(babelHelpers.assertThisInitialized(i),bl,Al).bind(babelHelpers.assertThisInitialized(i)));babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),ll,I.Type.isDomNode(e.menuNode)?e.menuNode:null);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),rl,I.Type.isDomNode(e.settingsNode)?e.settingsNode:null);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),ol,I.Type.isDomNode(e.contentNode)?e.contentNode:null);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),sl,I.Type.isString(e.basePage)?e.basePage:"");if(babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(i),ll)){babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(i),ll).querySelectorAll("li.ui-sidepanel-menu-item a").forEach((function(e){e.addEventListener("click",(function(t){i.show(e.dataset.type)}))}))}if(babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(i),rl)){babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(i),rl).querySelector('.ui-button-panel input[name="cancel"]').addEventListener("click",nl(babelHelpers.assertThisInitialized(i),Il,Gl))}e.pages.concat(Object.values(e.externalPages).map((function(e){var t=e.type,i=e.extensions;return new cs(t,i)}))).forEach((function(t){return i.registerPage(t).expandPage(e.subPages[t.getType()])}));var a=BX.UI.DropdownMenuItem.getItemByNode(babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(i),ll).querySelector('[data-type="tools"]'));if(a.subItems&&a.subItems.length>0){a.hideSubmenu();a.setDefaultToggleButtonName()}babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),vl,new re(babelHelpers.assertThisInitialized(i)));return i}babelHelpers.createClass(t,[{key:"registerPage",value:function e(t){t.setParentElement(this);t.subscribe("change",nl(this,_l,Ll).bind(this)).subscribe("fetch",nl(this,hl,Pl).bind(this));t.setAnalytic(babelHelpers.classPrivateFieldGet(this,ul));return t}},{key:"getCurrentPage",value:function e(){return this.getNavigator().getCurrentPage()}},{key:"getNavigator",value:function e(){return babelHelpers.classPrivateFieldGet(this,vl)}},{key:"show",value:function e(t,i){var a,n=this;if(!I.Type.isDomNode(babelHelpers.classPrivateFieldGet(this,ol))){console.log("Not found settings container");return}var s=this.getNavigator().getPageByType(t);if(this.getCurrentPage()===s){return}this.getNavigator().changePage(s);I.Dom.hide((a=this.getNavigator().getPrevPage())===null||a===void 0?void 0:a.getPage());if(I.Type.isNil(this.getNavigator().getCurrentPage().getPage().parentNode)){I.Dom.append(this.getNavigator().getCurrentPage().getPage(),babelHelpers.classPrivateFieldGet(this,ol))}else{I.Dom.show(this.getNavigator().getCurrentPage().getPage())}this.activateMenuItem(t);babelHelpers.classPrivateFieldGet(this,ul).addEventChangePage(t);this.getNavigator().updateAddressBar();E.EventEmitter.emit(E.EventEmitter.GLOBAL_TARGET,"BX.Intranet.Settings:onAfterShowPage",{source:this,page:s});if(I.Type.isString(i)&&i!==""){E.EventEmitter.subscribeOnce(E.EventEmitter.GLOBAL_TARGET,"BX.Intranet.Settings:onPageComplete",(function(){console.log(i);n.getNavigator().moveTo(s,i)}))}}},{key:"activateMenuItem",value:function e(t){var i=BX.UI.DropdownMenuItem.getItemByNode(babelHelpers.classPrivateFieldGet(this,ll).querySelector('a.ui-sidepanel-menu-link[data-type="'.concat(t,'"]')));i&&i.setActiveHandler()}}]);return t}(T.BaseSettingsElement);function Hl(){if(!babelHelpers.classPrivateFieldGet(this,cl)){babelHelpers.classPrivateFieldSet(this,cl,new ps(this.getChildrenElements()))}return babelHelpers.classPrivateFieldGet(this,cl)}function Pl(e){return nl(this,pl,Hl).call(this).fetchPage(e.getTarget())}function Al(e){var t,i=this;var a=e.getCompatData(),n=babelHelpers.slicedToArray(a,1),s=n[0];if(babelHelpers.classPrivateFieldGet(this,dl)instanceof _.MessageBox){s.denyAction();return false}if(this.isChanged&&((t=s.slider.getData())===null||t===void 0?void 0:t.get("ignoreChanges"))!==true){s.denyAction();babelHelpers.classPrivateFieldSet(this,dl,_.MessageBox.create({message:I.Loc.getMessage("INTRANET_SETTINGS_CONFIRM_ACTION_DESC"),modal:true,buttons:[new BX.UI.Button({text:I.Loc.getMessage("INTRANET_SETTINGS_CONFIRM_ACTION_OK"),color:BX.UI.Button.Color.SUCCESS,events:{click:function e(){E.EventEmitter.emit(E.EventEmitter.GLOBAL_TARGET,"BX.Intranet.Settings:onCancel",{});s.slider.getData().set("ignoreChanges",true);i.isChanged=false;BX.UI.ButtonPanel.hide();babelHelpers.classPrivateFieldGet(i,dl).close();babelHelpers.classPrivateFieldSet(i,dl,null);s.slider.close();s.slider.destroy();if(babelHelpers.classPrivateFieldGet(i,sl).includes("/configs/")){nl(i,gl,yl).call(i,"/index.php")}}}}),new BX.UI.CancelButton({text:I.Loc.getMessage("INTRANET_SETTINGS_CONFIRM_ACTION_CANCEL"),events:{click:function e(){babelHelpers.classPrivateFieldGet(i,dl).close();babelHelpers.classPrivateFieldSet(i,dl,null)}}})]}));return babelHelpers.classPrivateFieldGet(this,dl).show()}if(babelHelpers.classPrivateFieldGet(this,sl).includes("/configs/")||this.reloadAfterClose){nl(this,gl,yl).call(this,"/index.php")}}function yl(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var t=document.querySelector("#ui-sidepanel-wrapper-loader");if(t){t.style.display=""}if(I.Type.isString(e)){top.window.location.href=e}else{top.window.location.href=babelHelpers.classPrivateFieldGet(this,sl)}}function Ll(e){this.isChanged=true;BX.UI.ButtonPanel.show()}function Cl(e){var t=nl(this,pl,Hl).call(this).collectData();E.EventEmitter.emit(E.EventEmitter.GLOBAL_TARGET,"BX.Intranet.Settings:onBeforeSave",{data:t});babelHelpers.classPrivateFieldGet(this,ul).send();I.ajax.runComponentAction("bitrix:intranet.settings","set",{mode:"class",data:I.Http.Data.convertObjectToFormData(t)}).then(nl(this,El,Rl).bind(this),nl(this,fl,kl).bind(this))}function Rl(e){this.isChanged=false;nl(this,wl,Ol).call(this);BX.UI.ButtonPanel.hide();this.reloadAfterClose=true}function kl(e){var t=nl(this,Sl,Fl).call(this,e.errors);nl(this,wl,Ol).call(this);E.EventEmitter.emit("BX.UI.FormElement.Field:onFailedSave",{errors:t});var i=nl(this,ml,Ml).call(this,t);this.show(i)}function Fl(e){var t={};var i=Zs(e),a;try{for(i.s();!(a=i.n()).done;){var n,s;var l=a.value;var r=(n=l.customData)===null||n===void 0?void 0:n.page;var o=(s=l.customData)===null||s===void 0?void 0:s.field;if(I.Type.isNil(r)||I.Type.isNil(o)){T.ErrorCollection.showSystemError(I.Loc.getMessage("INTRANET_SETTINGS_ERROR_FETCH_DATA"));break}if(I.Type.isNil(t[r])){t[r]={}}if(I.Type.isNil(t[r][o])){t[r][o]=[]}t[r][o].push(l.message)}}catch(e){i.e(e)}finally{i.f()}return t}function Gl(e){top.BX.SidePanel.Instance.close()}function Ol(){var e=document.querySelector("#intranet-settings-page #ui-button-panel-save");I.Dom.removeClass(e,"ui-btn-wait")}function Ml(e){for(var t in e){return t}}e.Settings=Nl;e.ToolsPage=Ne;e.EmployeePage=Be;e.PortalPage=_a;e.CommunicationPage=ci;e.RequisitePage=Zt;e.ConfigurationPage=Ra;e.SchedulePage=qa;e.GdprPage=ln;e.SecurityPage=Wn;e.Renderer=js;e.Searcher=Is;e.ServerDataSource=$s})(this.BX.Intranet=this.BX.Intranet||{},BX.UI.Analytics,BX.UI.DragAndDrop,BX.UI,BX.UI,BX,BX.UI.Uploader,BX.UI,BX,BX.UI,BX,BX,BX,BX.UI,BX.UI.FormElements,BX.UI,BX.UI.EntitySelector,BX.UI.Dialogs,BX.UI.FormElements,BX.Event,BX.Main,BX,BX);
//# sourceMappingURL=script.map.js