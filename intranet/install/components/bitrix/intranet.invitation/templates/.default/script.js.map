{"version":3,"file":"script.js","sources":["src/submit.js","src/self-register.js","src/phone.js","src/row.js","src/selector.js","src/active-directory.js","src/analytics.js","src/form.js"],"sourcesContent":["import {Type, Validation, Loc, Dom, Event} from \"main.core\";\nimport {EventEmitter} from \"main.core.events\";\n\nexport class Submit extends EventEmitter\n{\n\tconstructor(parent)\n\t{\n\t\tsuper();\n\t\tthis.parent = parent;\n\t\tthis.setEventNamespace(\"BX.Intranet.Invitation.Submit\");\n\t\tthis.parent.subscribe(\"onButtonClick\", (event) => {});\n\t}\n\n\tparseEmailAndPhone(form)\n\t{\n\t\tif (!Type.isDomNode(form))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet errorInputData = [];\n\t\tlet items = [];\n\t\tconst phoneExp = /^[\\d+][\\d\\(\\)\\ -]{4,22}\\d$/;\n\t\tconst rows = Array.prototype.slice.call(form.querySelectorAll(\".js-form-row\"));\n\n\t\t(rows || []).forEach((row) => {\n\t\t\tconst emailInput = row.querySelector(\"input[name='EMAIL[]']\");\n\t\t\tconst phoneInput = row.querySelector(\"input[name='PHONE[]']\");\n\t\t\tconst nameInput = row.querySelector(\"input[name='NAME[]']\");\n\t\t\tconst lastNameInput = row.querySelector(\"input[name='LAST_NAME[]']\");\n\t\t\tconst emailValue = emailInput.value.trim();\n\n\t\t\tif (this.parent.isInvitationBySmsAvailable && Type.isDomNode(phoneInput))\n\t\t\t{\n\t\t\t\tconst phoneValue = phoneInput.value.trim();\n\t\t\t\tif (phoneValue)\n\t\t\t\t{\n\t\t\t\t\tif (!phoneExp.test(String(phoneValue).toLowerCase()))\n\t\t\t\t\t{\n\t\t\t\t\t\terrorInputData.push(phoneValue);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tconst phoneCountryInput = row.querySelector(\"input[name='PHONE_COUNTRY[]']\");\n\t\t\t\t\t\titems.push({\n\t\t\t\t\t\t\t\"PHONE\": phoneValue,\n\t\t\t\t\t\t\t\"PHONE_COUNTRY\": phoneCountryInput.value.trim(),\n\t\t\t\t\t\t\t\"NAME\": nameInput.value,\n\t\t\t\t\t\t\t\"LAST_NAME\": lastNameInput.value\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (emailValue)\n\t\t\t{\n\t\t\t\tif (Validation.isEmail(emailValue))\n\t\t\t\t{\n\t\t\t\t\titems.push({\n\t\t\t\t\t\t\"EMAIL\": emailValue,\n\t\t\t\t\t\t\"NAME\": nameInput.value,\n\t\t\t\t\t\t\"LAST_NAME\": lastNameInput.value\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\terrorInputData.push(emailValue);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn [items, errorInputData];\n\t}\n\n\tgetGroupAndDepartmentData(requestData)\n\t{\n\t\tconst selector = this.parent.selector;\n\t\tconst selectorItems = selector.getItems();\n\n\t\tif (selectorItems[\"departments\"].length > 0)\n\t\t{\n\t\t\trequestData[\"UF_DEPARTMENT\"] = selectorItems[\"departments\"];\n\t\t}\n\n\t\tif (selectorItems[\"projects\"].length > 0)\n\t\t{\n\t\t\trequestData[\"SONET_GROUPS_CODE\"] = selectorItems[\"projects\"];\n\t\t}\n\t}\n\n\tsubmitInvite()\n\t{\n\t\tconst inviteForm = this.parent.contentBlocks[\"invite\"].querySelector(\"form\");\n\t\tlet [items, errorInputData] = [...this.parseEmailAndPhone(inviteForm)];\n\n\t\tif (errorInputData.length > 0)\n\t\t{\n\t\t\tconst event = new Event.BaseEvent({data: {error: Loc.getMessage(\"INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_VALIDATE_ERROR\") + \": \" + errorInputData.join(', ')}});\n\t\t\tthis.emit(\"onInputError\", event);\n\t\t\treturn;\n\t\t}\n\n\t\tif (items.length <= 0)\n\t\t{\n\t\t\tconst event = new Event.BaseEvent({data: {error: Loc.getMessage(\"INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_EMPTY_ERROR\")}});\n\t\t\tthis.emit(\"onInputError\", event);\n\t\t\treturn;\n\t\t}\n\n\t\tconst requestData = {\n\t\t\t\"ITEMS\": items\n\t\t};\n\n\t\tconst analyticsLabel = {\n\t\t\t\"INVITATION_TYPE\": \"invite\",\n\t\t\t\"INVITATION_COUNT\": items.length\n\t\t};\n\n\t\tthis.sendAction(\"invite\", requestData, analyticsLabel);\n\t}\n\n\tsubmitInviteWithGroupDp()\n\t{\n\t\tconst inviteWithGroupDpForm = this.parent.contentBlocks[\"invite-with-group-dp\"].querySelector(\"form\");\n\t\tlet [items, errorInputData] = [...this.parseEmailAndPhone(inviteWithGroupDpForm)];\n\n\t\tif (errorInputData.length > 0)\n\t\t{\n\t\t\tthis.parent.showErrorMessage(Loc.getMessage(\"INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_VALIDATE_ERROR\") + \": \" + errorInputData.join(', '));\n\t\t\treturn;\n\t\t}\n\n\t\tif (items.length <= 0)\n\t\t{\n\t\t\tconst event = new Event.BaseEvent({data: {\n\t\t\t\terror: Loc.getMessage(\"INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_EMPTY_ERROR\")}\n\t\t\t});\n\t\t\tthis.emit(\"onInputError\", event);\n\t\t\treturn;\n\t\t}\n\n\t\tlet requestData = {\n\t\t\t\"ITEMS\": items\n\t\t};\n\t\tthis.getGroupAndDepartmentData(requestData);\n\n\t\tconst analyticsLabel = {\n\t\t\t\"INVITATION_TYPE\": \"withGroupOrDepartment\",\n\t\t\t\"INVITATION_COUNT\": items.length\n\t\t};\n\n\t\tthis.sendAction(\"inviteWithGroupDp\", requestData, analyticsLabel);\n\t}\n\n\tsubmitSelf()\n\t{\n\t\tconst selfForm = this.parent.contentBlocks[\"self\"].querySelector(\"form\");\n\t\tlet obRequestData = {\n\t\t\t\"allow_register\": selfForm[\"allow_register\"].value,\n\t\t\t\"allow_register_confirm\": selfForm[\"allow_register_confirm\"].checked ? \"Y\" : \"N\",\n\t\t\t\"allow_register_secret\": selfForm[\"allow_register_secret\"].value,\n\t\t\t\"allow_register_whitelist\": selfForm[\"allow_register_whitelist\"].value,\n\t\t};\n\n\t\tthis.sendAction(\"self\", obRequestData);\n\t}\n\n\tsubmitExtranet()\n\t{\n\t\tconst extranetForm = this.parent.contentBlocks[\"extranet\"].querySelector(\"form\");\n\t\tlet [items, errorInputData] = [...this.parseEmailAndPhone(extranetForm)];\n\n\t\tif (errorInputData.length > 0)\n\t\t{\n\t\t\tthis.parent.showErrorMessage(Loc.getMessage(\"INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_VALIDATE_ERROR\") + \": \" + errorInputData.join(', '));\n\t\t\treturn;\n\t\t}\n\n\t\tif (items.length <= 0)\n\t\t{\n\t\t\tconst event = new Event.BaseEvent({data: {\n\t\t\t\terror: Loc.getMessage(\"INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_EMPTY_ERROR\")}\n\t\t\t});\n\t\t\tthis.emit(\"onInputError\", event);\n\t\t\treturn;\n\t\t}\n\n\t\tlet requestData = {\n\t\t\t\"ITEMS\": items\n\t\t};\n\t\tthis.getGroupAndDepartmentData(requestData);\n\n\t\tconst analyticsLabel = {\n\t\t\t\"INVITATION_TYPE\": \"extranet\",\n\t\t\t\"INVITATION_COUNT\": items.length\n\t\t};\n\n\t\tthis.sendAction(\"extranet\", requestData, analyticsLabel);\n\t}\n\n\tsubmitIntegrator()\n\t{\n\t\tconst integratorForm = this.parent.contentBlocks[\"integrator\"].querySelector(\"form\");\n\n\t\tconst obRequestData = {\n\t\t\t\"integrator_email\": integratorForm[\"integrator_email\"].value,\n\t\t};\n\n\t\tconst analyticsLabel = {\n\t\t\t\"INVITATION_TYPE\": \"integrator\"\n\t\t};\n\n\t\tthis.sendAction(\"inviteIntegrator\", obRequestData, analyticsLabel);\n\t}\n\n\tsubmitMassInvite()\n\t{\n\t\tconst massInviteForm = this.parent.contentBlocks[\"mass-invite\"].querySelector(\"form\");\n\n\t\tconst obRequestData = {\n\t\t\t\"ITEMS\": massInviteForm[\"mass_invite_emails\"].value\n\t\t};\n\n\t\tconst analyticsLabel = {\n\t\t\t\"INVITATION_TYPE\": \"mass\"\n\t\t};\n\t\tthis.sendAction(\"massInvite\", obRequestData, analyticsLabel);\n\t}\n\n\tsubmitAdd()\n\t{\n\t\tconst addForm = this.parent.contentBlocks[\"add\"].querySelector(\"form\");\n\n\t\tlet requestData = {\n\t\t\t\"ADD_EMAIL\": addForm[\"ADD_EMAIL\"].value,\n\t\t\t\"ADD_NAME\": addForm[\"ADD_NAME\"].value,\n\t\t\t\"ADD_LAST_NAME\": addForm[\"ADD_LAST_NAME\"].value,\n\t\t\t\"ADD_POSITION\": addForm[\"ADD_POSITION\"].value,\n\t\t\t\"ADD_SEND_PASSWORD\": (\n\t\t\t\taddForm[\"ADD_SEND_PASSWORD\"]\n\t\t\t\t&& !!addForm[\"ADD_SEND_PASSWORD\"].checked\n\t\t\t\t\t? addForm[\"ADD_SEND_PASSWORD\"].value\n\t\t\t\t\t: \"N\"\n\t\t\t),\n\t\t};\n\t\tthis.getGroupAndDepartmentData(requestData);\n\n\t\tconst analyticsLabel = {\n\t\t\t\"INVITATION_TYPE\": \"add\"\n\t\t};\n\t\tthis.sendAction(\"add\", requestData, analyticsLabel);\n\t}\n\n\tsendAction(action, requestData, analyticsLabel)\n\t{\n\t\tthis.disableSubmitButton(true);\n\t\trequestData[\"userOptions\"] = this.parent.userOptions;\n\t\trequestData[\"analyticsData\"] = this.parent.analyticsLabel;\n\n\t\tBX.ajax.runComponentAction(this.parent.componentName, action, {\n\t\t\tsignedParameters: this.parent.signedParameters,\n\t\t\tmode: \"ajax\",\n\t\t\tdata: requestData,\n\t\t\tanalyticsLabel: analyticsLabel,\n\t\t}).then((response) => {\n\n\t\t\tthis.disableSubmitButton(false);\n\n\t\t\tif (response.data)\n\t\t\t{\n\t\t\t\tif (action === \"self\")\n\t\t\t\t{\n\t\t\t\t\tthis.parent.showSuccessMessage(response.data);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.parent.changeContent(\"success\");\n\t\t\t\t\tthis.sendSuccessEvent(response.data);\n\t\t\t\t}\n\t\t\t}\n\n\t\t}, (response) => {\n\n\t\t\tthis.disableSubmitButton(false);\n\n\t\t\tif (response.data == \"user_limit\")\n\t\t\t{\n\t\t\t\tB24.licenseInfoPopup.show(\n\t\t\t\t\t\"featureID\",\n\t\t\t\t\tBX.message(\"BX24_INVITE_DIALOG_USERS_LIMIT_TITLE\"),\n\t\t\t\t\tBX.message(\"BX24_INVITE_DIALOG_USERS_LIMIT_TEXT\")\n\t\t\t\t);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.parent.showErrorMessage(response.errors[0].message);\n\t\t\t}\n\t\t});\n\t}\n\n\tdisableSubmitButton(isDisable)\n\t{\n\t\tconst button = this.parent.button;\n\n\t\tif (!Type.isDomNode(button) || !Type.isBoolean(isDisable))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (isDisable)\n\t\t{\n\t\t\tDom.addClass(button, [\"ui-btn-wait\", \"invite-cursor-auto\"]);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(button, [\"ui-btn-wait\", \"invite-cursor-auto\"]);\n\t\t}\n\t}\n\n\tsendSuccessEvent(users)\n\t{\n\t\tBX.SidePanel.Instance.postMessageAll(window, \"BX.Intranet.Invitation:onAdd\", { users: users });\n\t}\n}","import {Event, Type, Dom, Text, Loc} from \"main.core\";\nimport {Switcher} from 'ui.switcher';\n\nexport class SelfRegister\n{\n\tconstructor(parent)\n\t{\n\t\tthis.parent = parent;\n\n\t\tif (Type.isDomNode(this.parent.contentBlocks[\"self\"]))\n\t\t{\n\t\t\tthis.selfBlock = this.parent.contentBlocks[\"self\"];\n\t\t\tthis.bindActions();\n\n\t\t\tconst switcherNode = this.selfBlock.querySelector('.invite-dialog-fast-reg-control-switcher');\n\t\t\tthis.switcher = new Switcher({\n\t\t\t\tinputName: 'allow_register',\n\t\t\t\tid: 'allow_register',\n\t\t\t\tchecked: parent.isSelfRegisterEnabled,\n\t\t\t\tnode: switcherNode,\n\t\t\t\thandlers: {\n\t\t\t\t\ttoggled: this.toggleSettings.bind(this),\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t}\n\n\tbindActions()\n\t{\n\t\tconst regenerateButton = this.selfBlock.querySelector(\"[data-role='selfRegenerateSecretButton']\");\n\t\tif (Type.isDomNode(regenerateButton))\n\t\t{\n\t\t\tEvent.bind(regenerateButton, 'click',() => {\n\t\t\t\tthis.parent.activateButton();\n\t\t\t\tthis.regenerateSecret(this.parent.regenerateUrlBase);\n\t\t\t});\n\t\t}\n\n\t\tconst copyRegisterUrlButton = this.selfBlock.querySelector(\"[data-role='copyRegisterUrlButton']\");\n\t\tif (Type.isDomNode(copyRegisterUrlButton))\n\t\t{\n\t\t\tEvent.bind(copyRegisterUrlButton, 'click', () => {\n\t\t\t\tthis.copyRegisterUrl();\n\t\t\t});\n\t\t}\n\n\t\tconst allowRegisterConfirm = this.selfBlock.querySelector(\"[data-role='allowRegisterConfirm']\");\n\t\tif (Type.isDomNode(allowRegisterConfirm))\n\t\t{\n\t\t\tEvent.bind(allowRegisterConfirm, 'change', () => {\n\t\t\t\tthis.parent.activateButton();\n\t\t\t\tthis.toggleWhiteList(allowRegisterConfirm);\n\t\t\t});\n\t\t}\n\n\t\tconst selfWhiteList = this.selfBlock.querySelector(\"[data-role='selfWhiteList']\");\n\t\tif (Type.isDomNode(selfWhiteList))\n\t\t{\n\t\t\tEvent.bind(selfWhiteList, 'input', () => {\n\t\t\t\tthis.parent.activateButton();\n\t\t\t});\n\t\t}\n\t}\n\n\tregenerateSecret(registerUrl)\n\t{\n\t\tconst value = Text.getRandom(8);\n\n\t\tconst allowRegisterSecretNode = this.selfBlock.querySelector(\"[data-role='allowRegisterSecret']\");\n\t\tif (Type.isDomNode(allowRegisterSecretNode))\n\t\t{\n\t\t\tallowRegisterSecretNode.value = value || '';\n\t\t}\n\n\t\tconst allowRegisterUrlNode = this.selfBlock.querySelector(\"[data-role='allowRegisterUrl']\");\n\t\tif (Type.isDomNode(allowRegisterUrlNode) && registerUrl)\n\t\t{\n\t\t\tallowRegisterUrlNode.value = registerUrl + (value || 'yes');\n\t\t}\n\t}\n\n\tcopyRegisterUrl()\n\t{\n\t\tconst allowRegisterUrlNode = this.selfBlock.querySelector(\"[data-role='allowRegisterUrl']\");\n\t\tif (Type.isDomNode(allowRegisterUrlNode))\n\t\t{\n\t\t\tBX.clipboard.copy(allowRegisterUrlNode.value);\n\t\t\tthis.showHintPopup(Loc.getMessage(\"BX24_INVITE_DIALOG_COPY_URL\"), allowRegisterUrlNode);\n\n\t\t\tBX.ajax.runAction('intranet.controller.invite.copyregisterurl', {\n\t\t\t\tdata: {}\n\t\t\t}).then(function (response) {}, function (response) {});\n\n\t\t\tthis.parent.analytics.send();\n\t\t}\n\t}\n\n\tshowHintPopup(message, bindNode)\n\t{\n\t\tif (!Type.isDomNode(bindNode) || !message)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tnew BX.PopupWindow('inviteHint' + Text.getRandom(8), bindNode, {\n\t\t\tcontent: message,\n\t\t\tzIndex: 15000,\n\t\t\tangle: true,\n\t\t\toffsetTop: 0,\n\t\t\toffsetLeft: 50,\n\t\t\tcloseIcon: false,\n\t\t\tautoHide: true,\n\t\t\tdarkMode: true,\n\t\t\toverlay: false,\n\t\t\tmaxWidth: 400,\n\t\t\tevents: {\n\t\t\t\tonAfterPopupShow: function () {\n\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\tthis.close();\n\t\t\t\t\t}.bind(this), 4000);\n\t\t\t\t}\n\t\t\t}\n\t\t}).show();\n\t}\n\n\ttoggleSettings()\n\t{\n\t\tthis.parent.activateButton();\n\t\tconst controlBlock = this.selfBlock.querySelector(\".js-invite-dialog-fast-reg-control-container\");\n\t\tif (Type.isDomNode(controlBlock))\n\t\t{\n\t\t\tif (!Dom.hasClass(controlBlock, 'disallow-registration'))\n\t\t\t{\n\t\t\t\tconst switcher = controlBlock.querySelector(\"[data-role='self-switcher']\");\n\t\t\t\tthis.showHintPopup(Loc.getMessage(\"INTRANET_INVITE_DIALOG_SELF_OFF_HINT\"), switcher);\n\t\t\t}\n\t\t\tDom.toggleClass(controlBlock, 'disallow-registration');\n\t\t}\n\n\t\tconst settingsBlock = this.selfBlock.querySelector(\"[data-role='selfSettingsBlock']\");\n\t\tif (Type.isDomNode(settingsBlock))\n\t\t{\n\t\t\tDom.style(settingsBlock, 'display', this.switcher.checked ? 'block' : 'none');\n\t\t}\n\t}\n\n\ttoggleWhiteList(inputElement)\n\t{\n\t\tconst selfWhiteList = this.selfBlock.querySelector(\"[data-role='selfWhiteList']\");\n\t\tif (Type.isDomNode(selfWhiteList))\n\t\t{\n\t\t\tDom.style(selfWhiteList, 'display', inputElement.checked ? 'block' : 'none');\n\t\t}\n\t}\n}","import {Dom, Type, Tag, Event} from \"main.core\";\n\nexport class Phone\n{\n\tconstructor(parent)\n\t{\n\t\tthis.parent = parent;\n\n\t\tthis.count = 0;\n\t\tthis.index = 0;\n\t\tthis.maxCount = 5;\n\t\tthis.inputStack = [];\n\t}\n\n\trenderPhoneRow(inputNode)\n\t{\n\t\tif(this.count >= this.maxCount)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (!Type.isDomNode(inputNode))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst num = inputNode.getAttribute(\"data-num\");\n\n\t\tif (inputNode.parentNode.querySelector(\"#phone_number_\" + num))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst element = Tag.render`\n\t\t\t<span style=\"z-index: 3;\" class=\"ui-ctl-before\" data-role=\"phone-block\">\n\t\t\t\t<input type=\"hidden\" name=\"PHONE_COUNTRY[]\" id=\"phone_country_${num}\" value=\"\">\n\t\t\t\t<input type=\"hidden\" name=\"PHONE[]\" id=\"phone_number_${num}\" value=\"\">\n\t\t\t\t<div class=\"invite-dialog-phone-flag-block\" data-role=\"flag\">\n\t\t\t\t\t<span data-role=\"phone_flag_${num}\" style=\"pointer-events: none;\"></span>\n\t\t\t\t</div>\n\t\t\t\t<input class=\"invite-dialog-phone-input\" type=\"hidden\" id=\"phone_input_${num}\" value=\"\">&nbsp;\n\t\t\t</span>\n\t\t`;\n\n\t\tinputNode.style.paddingLeft = \"57px\";\n\t\tDom.append(element, inputNode.parentNode);\n\n\t\tconst flagNode = inputNode.parentNode.querySelector(\"[data-role='flag']\");\n\t\tif (Type.isDomNode(flagNode))\n\t\t{\n\t\t\tEvent.bind(inputNode.parentNode.querySelector(\"[data-role='flag']\"), 'click', () => {\n\t\t\t\tthis.showCountrySelector(num);\n\t\t\t});\n\t\t}\n\n\t\tlet changeCallback = function(i, inputNode)\n\t\t{\n\t\t\treturn function(e)\n\t\t\t{\n\t\t\t\tinputNode.parentNode.querySelector('#phone_number_' + i).value = e.value;\n\t\t\t\tinputNode.parentNode.querySelector('#phone_country_' + i).value = e.country;\n\t\t\t}\n\t\t};\n\n\t\tthis.inputStack[num] = new BX.PhoneNumber.Input({\n\t\t\tnode: inputNode,\n\t\t\tflagNode: inputNode.parentNode.querySelector(\"[data-role='phone_flag_\"+ num +\"']\"),\n\t\t\tflagSize: 16,\n\t\t\tonChange: changeCallback(num, inputNode)\n\t\t});\n\n\t\t//for ctrl+v paste\n\t\tconst id = setInterval(() => {\n\t\t\tif (\n\t\t\t\t!inputNode.parentNode?.querySelector('#phone_number_' + num).value\n\t\t\t\t|| !inputNode.parentNode?.querySelector('#phone_country_' + num).value\n\t\t\t)\n\t\t\t{\n\t\t\t\tchangeCallback(num, inputNode)({\n\t\t\t\t\tvalue: this.inputStack[num].getValue(),\n\t\t\t\t\tcountry: this.inputStack[num].formatter ? this.inputStack[num].getCountry() : null,\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tclearInterval(id);\n\t\t\t}\n\t\t}, 1000);\n\t}\n\n\tshowCountrySelector(i)\n\t{\n\t\tthis.inputStack[i]._onFlagClick();\n\t}\n}","import {Event, Type, Dom, Tag, Loc} from \"main.core\";\nimport {Phone} from \"./phone\";\n\nexport class Row\n{\n\tconstructor(parent, params)\n\t{\n\t\tthis.parent = parent;\n\t\tthis.contentBlock = params.contentBlock;\n\t\tthis.inputNum = 0;\n\n\t\tif (Type.isDomNode(this.contentBlock))\n\t\t{\n\t\t\tthis.rowsContainer = this.contentBlock.querySelector(\"[data-role='rows-container']\");\n\t\t\tthis.bindActions();\n\t\t}\n\n\t\tif (this.parent.isInvitationBySmsAvailable)\n\t\t{\n\t\t\tthis.phoneObj = new Phone(this);\n\t\t}\n\t}\n\n\tbindActions()\n\t{\n\t\tconst moreButton = this.contentBlock.querySelector(\"[data-role='invite-more']\");\n\t\tif (Type.isDomNode(moreButton))\n\t\t{\n\t\t\tEvent.unbindAll(moreButton);\n\t\t\tEvent.bind(moreButton, 'click', () => {\n\t\t\t\tthis.renderInputRow();\n\t\t\t});\n\t\t}\n\n\t\tconst massInviteButton = this.contentBlock.querySelector(\"[data-role='invite-mass']\");\n\t\tif (Type.isDomNode(massInviteButton))\n\t\t{\n\t\t\tEvent.unbindAll(massInviteButton);\n\t\t\tEvent.bind(massInviteButton, 'click', () => {\n\t\t\t\tconst massMenuNode = document.querySelector(\"[data-role='menu-mass-invite']\");\n\t\t\t\tif (Type.isDomNode(massMenuNode))\n\t\t\t\t{\n\t\t\t\t\tBX.fireEvent(massMenuNode, 'click');\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tcheckPhoneInput(element)\n\t{\n\t\tconst phoneExp = /^[\\d+][\\d\\(\\)\\ -]{2,14}\\d$/;\n\n\t\tif (element.value && phoneExp.test(String(element.value).toLowerCase()))\n\t\t{\n\t\t\tthis.phoneObj.renderPhoneRow(element);\n\t\t}\n\t}\n\n\tbindPhoneChecker(element)\n\t{\n\t\tif (this.parent.isInvitationBySmsAvailable && Type.isDomNode(element))\n\t\t{\n\t\t\tconst inputNodes = Array.prototype.slice.call(element.querySelectorAll(\".js-email-phone-input\"));\n\t\t\tif (inputNodes)\n\t\t\t{\n\t\t\t\tinputNodes.forEach(element => {\n\t\t\t\t\tEvent.bind(element, 'input', () => {\n\t\t\t\t\t\tthis.checkPhoneInput(element);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tbindCloseIcons(container)\n\t{\n\t\tconst inputNodes = Array.prototype.slice.call(container.querySelectorAll(\"input\"));\n\n\t\t(inputNodes || []).forEach((node) => {\n\t\t\tlet closeIcon = node.nextElementSibling;\n\n\t\t\tEvent.bind(node, 'input', () => {\n\t\t\t\tDom.style(closeIcon, 'display', node.value !== \"\" ? \"block\" : \"none\");\n\t\t\t});\n\n\t\t\tEvent.bind(closeIcon, 'click', (event) => {\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tif (Type.isDomNode(node.parentNode))\n\t\t\t\t{\n\t\t\t\t\tconst phoneBlock = node.parentNode.querySelector(\"[data-role='phone-block']\");\n\t\t\t\t\tif (Type.isDomNode(phoneBlock))\n\t\t\t\t\t{\n\t\t\t\t\t\tconst newInput = Tag.render`\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tname=\"EMAIL[]\"\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tmaxlength=\"50\"\n\t\t\t\t\t\t\t\tdata-num=\"${node.getAttribute('data-num')}\"\n\t\t\t\t\t\t\t\tclass=\"ui-ctl-element js-email-phone-input\"\n\t\t\t\t\t\t\t\tplaceholder=\"${Loc.getMessage('INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_INPUT')}\"\n\t\t\t\t\t\t\t/>`;\n\n\t\t\t\t\t\tDom.replace(node, newInput);\n\t\t\t\t\t\tthis.bindCloseIcons(newInput.parentNode);\n\t\t\t\t\t\tthis.bindPhoneChecker(newInput.parentNode);\n\t\t\t\t\t\tDom.remove(phoneBlock);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tDom.style(closeIcon, 'display', \"none\");\n\t\t\t});\n\t\t});\n\t}\n\n\trenderInviteInputs(numRows = 3)\n\t{\n\t\tDom.clean(this.rowsContainer);\n\t\tfor (let i = 0; i < numRows; i++)\n\t\t{\n\t\t\tthis.renderInputRow(i === 0);\n\t\t}\n\t}\n\n\trenderInputRow(showTitles = false)\n\t{\n\t\tlet emailTitle, nameTitle, lastNameTitle;\n\n\t\tif (showTitles)\n\t\t{\n\t\t\temailTitle = `\n\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t${Loc.getMessage(\"INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_INPUT\")}\n\t\t\t\t</div>`;\n\n\t\t\tnameTitle = `\n\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t${Loc.getMessage(\"BX24_INVITE_DIALOG_ADD_NAME_TITLE\")}\n\t\t\t\t</div>`;\n\n\t\t\tlastNameTitle = `\n\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t${Loc.getMessage(\"BX24_INVITE_DIALOG_ADD_LAST_NAME_TITLE\")}\n\t\t\t\t</div>`;\n\n\t\t}\n\n\t\tconst element = Tag.render`\n\t\t\t<div class=\"invite-form-row js-form-row\">\n\t\t\t\t<div class=\"invite-form-col\">\n\t\t\t\t\t${showTitles ? emailTitle: ''}\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon\">\n\t\t\t\t\t\t<input \n\t\t\t\t\t\t\tname=\"EMAIL[]\" \n\t\t\t\t\t\t\ttype=\"text\" \n\t\t\t\t\t\t\tmaxlength=\"50\"\n\t\t\t\t\t\t\tdata-num=\"${this.inputNum++}\" \n\t\t\t\t\t\t\tclass=\"ui-ctl-element js-email-phone-input\" \n\t\t\t\t\t\t\tplaceholder=\"${Loc.getMessage('INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_INPUT')}\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<button class=\"ui-ctl-after ui-ctl-icon-clear\" style=\"display: none\"></button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"invite-form-col\">\n\t\t\t\t\t${showTitles ? nameTitle: ''}\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon\">\n\t\t\t\t\t\t<input name=\"NAME[]\" type=\"text\" class=\"ui-ctl-element\" placeholder=\"${Loc.getMessage('BX24_INVITE_DIALOG_ADD_NAME_TITLE')}\">\n\t\t\t\t\t\t<button class=\"ui-ctl-after ui-ctl-icon-clear\" style=\"display: none\"></button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"invite-form-col\">\n\t\t\t\t\t${showTitles ? lastNameTitle: ''}\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon\">\n\t\t\t\t\t\t<input name=\"LAST_NAME[]\" type=\"text\" class=\"ui-ctl-element\" placeholder=\"${Loc.getMessage('BX24_INVITE_DIALOG_ADD_LAST_NAME_TITLE')}\">\n\t\t\t\t\t\t<button class=\"ui-ctl-after ui-ctl-icon-clear\" style=\"display: none\"></button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tDom.append(element, this.rowsContainer);\n\t\tthis.bindCloseIcons(element);\n\t\tthis.bindPhoneChecker(element);\n\t}\n\n\trenderRegisterInputs()\n\t{\n\t\tDom.clean(this.rowsContainer);\n\t\tconst element = Tag.render`\n\t\t\t<div>\n\t\t\t\t<div class=\"invite-form-row\">\n\t\t\t\t\t<div class=\"invite-form-col\">\n\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">${Loc.getMessage(\"BX24_INVITE_DIALOG_ADD_NAME_TITLE\")}</div>\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon\">\n\t\t\t\t\t\t\t<input type=\"text\" name=\"ADD_NAME\" id=\"ADD_NAME\" class=\"ui-ctl-element\">\n\t\t\t\t\t\t\t<button class=\"ui-ctl-after ui-ctl-icon-clear\" style=\"display: none\"></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"invite-form-row\">\n\t\t\t\t\t<div class=\"invite-form-col\">\n\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">${Loc.getMessage(\"BX24_INVITE_DIALOG_ADD_LAST_NAME_TITLE\")}</div>\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon\">\n\t\t\t\t\t\t\t<input type=\"text\" name=\"ADD_LAST_NAME\" id=\"ADD_LAST_NAME\" class=\"ui-ctl-element\">\n\t\t\t\t\t\t\t<button class=\"ui-ctl-after ui-ctl-icon-clear\" style=\"display: none\"></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"invite-form-row\">\n\t\t\t\t\t<div class=\"invite-form-col\">\n\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">${Loc.getMessage(\"BX24_INVITE_DIALOG_ADD_EMAIL_TITLE\")}</div>\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon\">\n\t\t\t\t\t\t\t<input type=\"text\" name=\"ADD_EMAIL\" id=\"ADD_EMAIL\" class=\"ui-ctl-element\" maxlength=\"50\">\n\t\t\t\t\t\t\t<button class=\"ui-ctl-after ui-ctl-icon-clear\" style=\"display: none\"></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"invite-form-row\">\n\t\t\t\t\t<div class=\"invite-form-col\">\n\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">${Loc.getMessage(\"BX24_INVITE_DIALOG_ADD_POSITION_TITLE\")}</div>\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon\">\n\t\t\t\t\t\t\t<input type=\"text\" name=\"ADD_POSITION\" id=\"ADD_POSITION\" class=\"ui-ctl-element\">\n\t\t\t\t\t\t\t<button class=\"ui-ctl-after ui-ctl-icon-clear\" style=\"display: none\"></button>\n\t\t\t\t\t\t</div>\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tDom.append(element, this.rowsContainer);\n\t\tthis.bindCloseIcons(element);\n\t}\n\n\trenderIntegratorInput()\n\t{\n\t\tDom.clean(this.rowsContainer);\n\t\tconst element = Tag.render`\n\t\t\t<div class=\"invite-form-row\">\n\t\t\t\t<div class=\"invite-form-col\">\n\t\t\t\t\t<div class=\"ui-ctl-label-text\">${Loc.getMessage(\"INTRANET_INVITE_DIALOG_INTEGRATOR_EMAIL\")}</div>\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon\">\n\t\t\t\t\t\t<input \n\t\t\t\t\t\t\ttype=\"text\" \n\t\t\t\t\t\t\tclass=\"ui-ctl-element\" \n\t\t\t\t\t\t\tvalue=\"\" \n\t\t\t\t\t\t\tmaxlength=\"50\"\n\t\t\t\t\t\t\tname=\"integrator_email\" \n\t\t\t\t\t\t\tid=\"integrator_email\" \n\t\t\t\t\t\t\tplaceholder=\"${Loc.getMessage(\"INTRANET_INVITE_DIALOG_INTEGRATOR_EMAIL\")}\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<button class=\"ui-ctl-after ui-ctl-icon-clear\" style=\"display: none\"></button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tDom.append(element, this.rowsContainer);\n\t\tthis.bindCloseIcons(element);\n\t}\n}\n","import {Type, Dom} from \"main.core\";\nimport {TagSelector} from 'ui.entity-selector';\n\nexport class Selector\n{\n\tconstructor(parent, params)\n\t{\n\t\tthis.parent = parent;\n\t\tthis.contentBlock = params.contentBlock;\n\t\tthis.options = params.options;\n\t\tthis.entities = [];\n\n\t\tthis.prepareOptions();\n\t}\n\n\tprepareOptions()\n\t{\n\t\tfor (let type in this.options)\n\t\t{\n\t\t\tif (!this.options.hasOwnProperty(type))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (type === \"department\" && !!this.options[type])\n\t\t\t{\n\t\t\t\tthis.entities.push({\n\t\t\t\t\tid: \"department\",\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tselectMode: \"departmentsOnly\",\n\t\t\t\t\t\tallowOnlyUserDepartments: !(!!this.options[\"isAdmin\"] && this.options[\"isAdmin\"] === true),\n\t\t\t\t\t\tallowSelectRootDepartment: true,\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (type === \"project\" && !!this.options[type])\n\t\t\t{\n\t\t\t\tlet optionValue = {\n\t\t\t\t\tid: \"project\",\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tfillRecentTab: true\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tif (this.options[type] === \"extranet\")\n\t\t\t\t{\n\t\t\t\t\toptionValue[\"options\"][\"extranet\"] = true;\n\t\t\t\t}\n\t\t\t\tthis.entities.push(optionValue);\n\t\t\t}\n\t\t}\n\t}\n\n\trender()\n\t{\n\t\tconst preselectedItems = [];\n\n\t\tif (\n\t\t\tthis.options.hasOwnProperty('projectId')\n\t\t\t&& this.options.projectId > 0\n\t\t)\n\t\t{\n\t\t\tpreselectedItems.push(['project', this.options.projectId])\n\t\t}\n\n\t\tthis.tagSelector = new TagSelector({\n\t\t\tdialogOptions: {\n\t\t\t\tpreselectedItems: preselectedItems,\n\t\t\t\tentities: this.entities,\n\t\t\t\tcontext: 'INTRANET_INVITATION'\n\t\t\t}\n\t\t});\n\n\t\tif (Type.isDomNode(this.contentBlock))\n\t\t{\n\t\t\tDom.clean(this.contentBlock);\n\t\t\tthis.tagSelector.renderTo(this.contentBlock);\n\t\t}\n\t}\n\n\tgetItems()\n\t{\n\t\tlet departments = [];\n\t\tlet projects = [];\n\t\tconst tagSelectorItems = this.tagSelector.getDialog().getSelectedItems();\n\n\t\ttagSelectorItems.forEach(item => {\n\t\t\tconst id = parseInt(item.getId());\n\t\t\tconst type = item.getEntityId();\n\n\t\t\tif (type === \"department\")\n\t\t\t{\n\t\t\t\tdepartments.push(id);\n\t\t\t}\n\t\t\telse if (type === \"project\")\n\t\t\t{\n\t\t\t\tprojects.push(id);\n\t\t\t}\n\t\t});\n\n\t\treturn {\n\t\t\tdepartments: departments,\n\t\t\tprojects: projects\n\t\t};\n\t}\n}","export class ActiveDirectory\n{\n\tconstructor(parent)\n\t{\n\t\tthis.parent = parent;\n\t}\n\n\tshowForm()\n\t{\n\t\tBX.UI.Feedback.Form.open(\n\t\t\t{\n\t\t\t\tid: 'intranet-active-directory',\n\t\t\t\tdefaultForm: {id: 309, sec: 'fbc0n3'}\n\t\t\t}\n\t\t);\n\t}\n}","import { Event, Type } from 'main.core';\nimport { sendData } from 'ui.analytics';\n\nexport class Analytics\n{\n\tstatic TOOLS = 'Invitation';\n\tstatic CATEGORY_INVITATION = 'invitation';\n\tstatic EVENT_COPY = 'copy_invitation_link';\n\tstatic ADMIN_ALLOW_MODE_Y = 'askAdminToAllow_Y';\n\tstatic ADMIN_ALLOW_MODE_N = 'askAdminToAllow_N';\n\tstatic IS_ADMIN_Y = 'isAdmin_Y';\n\tstatic IS_ADMIN_N = 'isAdmin_N';\n\n\t#cSection: Object;\n\t#isAdmin: boolean;\n\n\tconstructor(cSection: Object, isAdmin: boolean)\n\t{\n\t\tthis.#cSection = cSection;\n\t\tthis.#isAdmin = isAdmin;\n\t}\n\n\t#getAdminAllowMode(): string\n\t{\n\t\treturn document.querySelector('#allow_register_confirm').checked\n\t\t\t? Analytics.ADMIN_ALLOW_MODE_Y\n\t\t\t: Analytics.ADMIN_ALLOW_MODE_N;\n\t}\n\n\t#getIsAdmin(): string\n\t{\n\t\treturn this.#isAdmin ? Analytics.IS_ADMIN_Y : Analytics.IS_ADMIN_N;\n\t}\n\n\t#getCSection(): string\n\t{\n\t\treturn this.#cSection.source;\n\t}\n\n\tsend(): void\n\t{\n\t\tsendData({\n\t\t\ttool: Analytics.TOOLS,\n\t\t\tcategory: Analytics.CATEGORY_INVITATION,\n\t\t\tevent: Analytics.EVENT_COPY,\n\t\t\tc_section: this.#getCSection(),\n\t\t\tp1: this.#getIsAdmin(),\n\t\t\tp2: this.#getAdminAllowMode(),\n\t\t});\n\t}\n}","import {Type, Dom, Event, Loc} from 'main.core';\nimport {Submit} from './submit';\nimport {SelfRegister} from './self-register';\nimport {Row} from \"./row\";\nimport {Selector} from \"./selector\";\nimport {EventEmitter} from \"main.core.events\";\nimport {ActiveDirectory} from \"./active-directory\";\nimport { Analytics } from './analytics';\n\nexport default class Form extends EventEmitter\n{\n\tconstructor(formParams)\n\t{\n\t\tsuper();\n\t\tconst params = Type.isPlainObject(formParams) ? formParams : {};\n\n\t\tthis.signedParameters = params.signedParameters;\n\t\tthis.componentName = params.componentName;\n\n\t\tthis.menuContainer = params.menuContainerNode;\n\t\tthis.contentContainer = params.contentContainerNode;\n\t\tthis.contentBlocks = {};\n\t\tthis.userOptions = params.userOptions;\n\n\t\tthis.isExtranetInstalled = params.isExtranetInstalled === \"Y\";\n\t\tthis.isCloud = params.isCloud === \"Y\";\n\t\tthis.isAdmin = params.isAdmin === \"Y\";\n\t\tthis.isInvitationBySmsAvailable = params.isInvitationBySmsAvailable === \"Y\";\n\t\tthis.isCreatorEmailConfirmed = params.isCreatorEmailConfirmed === \"Y\";\n\t\tthis.regenerateUrlBase = params.regenerateUrlBase;\n\t\tthis.firstInvitationBlock = params.firstInvitationBlock;\n\t\tthis.isSelfRegisterEnabled = params.isSelfRegisterEnabled;\n\t\tthis.analyticsLabel = params.analyticsLabel;\n\n\t\tif (Type.isDomNode(this.contentContainer))\n\t\t{\n\t\t\tconst blocks = Array.prototype.slice.call(\n\t\t\t\tthis.contentContainer.querySelectorAll(\".js-intranet-invitation-block\")\n\t\t\t);\n\t\t\t(blocks || []).forEach((block) => {\n\t\t\t\tlet blockType = block.getAttribute(\"data-role\");\n\t\t\t\tblockType = blockType.replace(\"-block\", \"\");\n\t\t\t\tthis.contentBlocks[blockType] = block;\n\t\t\t});\n\n\t\t\tthis.errorMessageBlock = this.contentContainer.querySelector(\"[data-role='error-message']\");\n\t\t\tthis.successMessageBlock = this.contentContainer.querySelector(\"[data-role='success-message']\");\n\n\t\t\tBX.UI.Hint.init(this.contentContainer);\n\t\t}\n\n\t\tthis.button = document.querySelector(\"#intranet-invitation-btn\");\n\n\t\tif (Type.isDomNode(this.menuContainer))\n\t\t{\n\t\t\tthis.menuItems = Array.prototype.slice.call(this.menuContainer.querySelectorAll(\"a\"));\n\n\t\t\t(this.menuItems || []).forEach((item) => {\n\t\t\t\tEvent.bind(item, 'click', () => {\n\t\t\t\t\tthis.changeContent(item.getAttribute('data-action'));\n\t\t\t\t});\n\n\t\t\t\tif (item.getAttribute('data-action') === this.firstInvitationBlock)\n\t\t\t\t{\n\t\t\t\t\tBX.fireEvent(item, 'click');\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis.submit = new Submit(this);\n\t\tthis.submit.subscribe('onInputError', (event) => {\n\t\t\tthis.showErrorMessage(event.data.error);\n\t\t});\n\n\t\tthis.analytics = new Analytics(this.analyticsLabel, this.isAdmin);\n\n\t\tif (this.isCloud)\n\t\t{\n\t\t\tthis.selfRegister = new SelfRegister(this);\n\t\t}\n\n\t\tthis.arrowBox = document.querySelector('.invite-wrap-decal-arrow');\n\t\tif (Type.isDomNode(this.arrowBox))\n\t\t{\n\t\t\tthis.arrowRect = this.arrowBox.getBoundingClientRect();\n\t\t\tthis.arrowHeight = this.arrowRect.height;\n\t\t\tthis.setSetupArrow();\n\t\t}\n\t}\n\n\trenderSelector(params)\n\t{\n\t\tthis.selector = new Selector(this, params);\n\t\tthis.selector.render();\n\t}\n\n\tchangeContent(action)\n\t{\n\t\tthis.hideErrorMessage();\n\t\tthis.hideSuccessMessage();\n\n\t\tif (action.length > 0)\n\t\t{\n\t\t\tif (action === 'active-directory')\n\t\t\t{\n\t\t\t\tif (!this.activeDirectory)\n\t\t\t\t{\n\t\t\t\t\tthis.activeDirectory = new ActiveDirectory(this);\n\t\t\t\t}\n\n\t\t\t\tthis.activeDirectory.showForm();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst projectId = (\n\t\t\t\tthis.userOptions.hasOwnProperty('groupId')\n\t\t\t\t\t? parseInt(this.userOptions.groupId, 10)\n\t\t\t\t\t: 0\n\t\t\t);\n\n\t\t\tfor (let type in this.contentBlocks)\n\t\t\t{\n\t\t\t\tlet block = this.contentBlocks[type];\n\n\t\t\t\tif (type === action)\n\t\t\t\t{\n\t\t\t\t\tDom.removeClass(block, 'invite-block-hidden');\n\t\t\t\t\tDom.addClass(block, 'invite-block-shown');\n\n\t\t\t\t\tconst params = {\n\t\t\t\t\t\tcontentBlock: this.contentBlocks[action]\n\t\t\t\t\t};\n\t\t\t\t\tconst row = new Row(this, params);\n\n\t\t\t\t\tif (action === 'invite')\n\t\t\t\t\t{\n\t\t\t\t\t\trow.renderInviteInputs(5);\n\t\t\t\t\t}\n\t\t\t\t\telse if (action === 'invite-with-group-dp')\n\t\t\t\t\t{\n\t\t\t\t\t\trow.renderInviteInputs(3);\n\n\t\t\t\t\t\tconst selectorParams = {\n\t\t\t\t\t\t\tcontentBlock: this.contentBlocks[action]\n\t\t\t\t\t\t\t\t.querySelector(\"[data-role='entity-selector-container']\"),\n\t\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\t\tdepartment: true,\n\t\t\t\t\t\t\t\tproject: true,\n\t\t\t\t\t\t\t\tprojectId: projectId,\n\t\t\t\t\t\t\t\tisAdmin: this.isAdmin,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tthis.renderSelector(selectorParams);\n\t\t\t\t\t}\n\t\t\t\t\telse if (action === 'extranet')\n\t\t\t\t\t{\n\t\t\t\t\t\trow.renderInviteInputs(3);\n\n\t\t\t\t\t\tconst selectorParams = {\n\t\t\t\t\t\t\tcontentBlock: this.contentBlocks[action]\n\t\t\t\t\t\t\t\t.querySelector(\"[data-role='entity-selector-container']\"),\n\t\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\t\tdepartment: false,\n\t\t\t\t\t\t\t\tproject: \"extranet\",\n\t\t\t\t\t\t\t\tprojectId: projectId,\n\t\t\t\t\t\t\t\tisAdmin: this.isAdmin,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tthis.renderSelector(selectorParams);\n\t\t\t\t\t}\n\t\t\t\t\telse if (action === \"add\")\n\t\t\t\t\t{\n\t\t\t\t\t\trow.renderRegisterInputs();\n\n\t\t\t\t\t\tconst selectorParams = {\n\t\t\t\t\t\t\tcontentBlock: this.contentBlocks[action]\n\t\t\t\t\t\t\t\t.querySelector(\"[data-role='entity-selector-container']\"),\n\t\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\t\tdepartment: true,\n\t\t\t\t\t\t\t\tproject: true,\n\t\t\t\t\t\t\t\tprojectId: projectId,\n\t\t\t\t\t\t\t\tisAdmin: this.isAdmin,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tthis.renderSelector(selectorParams);\n\t\t\t\t\t}\n\t\t\t\t\telse if (action === \"integrator\")\n\t\t\t\t\t{\n\t\t\t\t\t\trow.renderIntegratorInput();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tDom.removeClass(block, 'invite-block-shown');\n\t\t\t\t\tDom.addClass(block, 'invite-block-hidden');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.changeButton(action);\n\t\t}\n\t}\n\n\tchangeButton(action)\n\t{\n\t\tEvent.unbindAll(this.button, 'click');\n\n\t\tif (!this.isCreatorEmailConfirmed)\n\t\t{\n\t\t\tEvent.bind(this.button, 'click', () => {\n\t\t\t\tthis.showErrorMessage(Loc.getMessage('INTRANET_INVITE_DIALOG_CONFIRM_CREATOR_EMAIL_ERROR'));\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tthis.activateButton();\n\n\t\tif (action === \"invite\")\n\t\t{\n\t\t\tthis.button.innerText = Loc.getMessage('BX24_INVITE_DIALOG_ACTION_INVITE');\n\n\t\t\tEvent.bind(this.button, 'click',() => {\n\t\t\t\tthis.submit.submitInvite();\n\t\t\t});\n\t\t}\n\t\telse if (action === \"mass-invite\")\n\t\t{\n\t\t\tthis.button.innerText = Loc.getMessage('BX24_INVITE_DIALOG_ACTION_INVITE');\n\n\t\t\tEvent.bind(this.button, 'click',() => {\n\t\t\t\tthis.submit.submitMassInvite();\n\t\t\t});\n\t\t}\n\t\telse if (action === \"invite-with-group-dp\")\n\t\t{\n\t\t\tthis.button.innerText = Loc.getMessage('BX24_INVITE_DIALOG_ACTION_INVITE');\n\n\t\t\tEvent.bind(this.button, 'click',() => {\n\t\t\t\tthis.submit.submitInviteWithGroupDp();\n\t\t\t});\n\t\t}\n\t\telse if (action === \"add\")\n\t\t{\n\t\t\tthis.button.innerText = Loc.getMessage('BX24_INVITE_DIALOG_ACTION_ADD');\n\n\t\t\tEvent.bind(this.button, 'click', () => {\n\t\t\t\tthis.submit.submitAdd();\n\t\t\t});\n\t\t}\n\t\telse if (action === \"self\")\n\t\t{\n\t\t\tthis.button.innerText = Loc.getMessage('BX24_INVITE_DIALOG_ACTION_SAVE');\n\t\t\tthis.disableButton();\n\n\t\t\tEvent.bind(this.button, 'click', () => {\n\t\t\t\tif (this.isButtonActive())\n\t\t\t\t{\n\t\t\t\t\tthis.submit.submitSelf();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\telse if (action === \"integrator\")\n\t\t{\n\t\t\tthis.button.innerText = Loc.getMessage('BX24_INVITE_DIALOG_ACTION_INVITE');\n\n\t\t\tEvent.bind(this.button, 'click', () => {\n\t\t\t\tthis.submit.submitIntegrator();\n\t\t\t});\n\t\t}\n\t\telse if (action === \"extranet\")\n\t\t{\n\t\t\tthis.button.innerText = Loc.getMessage('BX24_INVITE_DIALOG_ACTION_INVITE');\n\n\t\t\tEvent.bind(this.button, 'click', () => {\n\t\t\t\tthis.submit.submitExtranet();\n\t\t\t});\n\t\t}\n\t\telse if (action === \"success\")\n\t\t{\n\t\t\tthis.button.innerText = Loc.getMessage('BX24_INVITE_DIALOG_ACTION_INVITE_MORE');\n\n\t\t\tEvent.bind(this.button, 'click', () => {\n\t\t\t\tBX.fireEvent(this.menuItems[0], 'click');\n\t\t\t});\n\t\t}\n\t}\n\n\tdisableButton()\n\t{\n\t\tDom.addClass(this.button, \"ui-btn-disabled\");\n\t}\n\n\tactivateButton()\n\t{\n\t\tDom.removeClass(this.button, \"ui-btn-disabled\");\n\t}\n\n\tisButtonActive()\n\t{\n\t\treturn !Dom.hasClass(this.button, \"ui-btn-disabled\");\n\t}\n\n\tshowSuccessMessage(successText)\n\t{\n\t\tthis.hideErrorMessage();\n\n\t\tif (Type.isDomNode(this.successMessageBlock))\n\t\t{\n\t\t\tthis.successMessageBlock.style.display = \"block\";\n\t\t\tconst alert = this.successMessageBlock.querySelector(\".ui-alert-message\");\n\t\t\tif (Type.isDomNode(alert))\n\t\t\t{\n\t\t\t\talert.innerHTML = BX.util.htmlspecialchars(successText);\n\t\t\t}\n\t\t}\n\t}\n\n\thideSuccessMessage()\n\t{\n\t\tif (Type.isDomNode(this.successMessageBlock))\n\t\t{\n\t\t\tthis.successMessageBlock.style.display = \"none\";\n\t\t}\n\t}\n\n\tshowErrorMessage(errorText)\n\t{\n\t\tthis.hideSuccessMessage();\n\n\t\tif (Type.isDomNode(this.errorMessageBlock) && errorText)\n\t\t{\n\t\t\tthis.errorMessageBlock.style.display = \"block\";\n\t\t\tconst alert = this.errorMessageBlock.querySelector(\".ui-alert-message\");\n\t\t\tif (Type.isDomNode(alert))\n\t\t\t{\n\t\t\t\talert.innerHTML = BX.util.htmlspecialchars(errorText);\n\t\t\t}\n\t\t}\n\t}\n\n\thideErrorMessage()\n\t{\n\t\tif (Type.isDomNode(this.errorMessageBlock))\n\t\t{\n\t\t\tthis.errorMessageBlock.style.display = \"none\";\n\t\t}\n\t}\n\n\tgetSetupArrow()\n\t{\n\t\tthis.body = document.querySelector('.invite-body');\n\t\tthis.panelConfirmBtn = document.getElementById('intranet-invitation-btn');\n\t\tthis.sliderContent = document.querySelector('.ui-page-slider-workarea');\n\t\tthis.sliderHeader = document.querySelector('.ui-side-panel-wrap-title-wrap');\n\t\tthis.buttonPanel = document.querySelector('.ui-button-panel');\n\t\tthis.inviteButton = document.querySelector('.invite-form-buttons');\n\n\t\tthis.sliderHeaderHeight = this.sliderHeader.getBoundingClientRect().height;\n\t\tthis.buttonPanelRect = this.buttonPanel.getBoundingClientRect();\n\t\tthis.panelRect = this.panelConfirmBtn.getBoundingClientRect();\n\t\tthis.btnWidth = Math.ceil(this.panelRect.width);\n\t\tthis.arrowWidth = Math.ceil(this.arrowRect.width);\n\t\tthis.sliderContentRect = this.sliderContent.getBoundingClientRect();\n\n\t\tthis.bodyHeight = this.body.getBoundingClientRect().height - this.buttonPanelRect.height + this.sliderHeaderHeight;\n\t\tthis.contentHeight = this.arrowHeight + this.sliderContentRect.height + this.buttonPanelRect.height + this.sliderHeaderHeight - 65;\n\t}\n\n\tupdateArrow()\n\t{\n\t\tthis.bodyHeight = this.body.getBoundingClientRect().height - this.buttonPanelRect.height + this.sliderHeaderHeight;\n\t\tthis.contentHeight = this.arrowHeight + this.sliderContentRect.height + this.buttonPanelRect.height + this.sliderHeaderHeight - 65;\n\t\tthis.contentHeight > this.bodyHeight ? this.body.classList.add('js-intranet-invitation-arrow-hide') : this.body.classList.remove('js-intranet-invitation-arrow-hide');\n\t}\n\n\tsetSetupArrow()\n\t{\n\t\tthis.getSetupArrow();\n\t\tconst btnPadding = 40;\n\t\tthis.arrowBox.style.left = (this.panelRect.left + (this.btnWidth / 2) - (this.arrowWidth / 2) - btnPadding) + 'px';\n\t\tthis.contentHeight > this.bodyHeight ? this.body.classList.add('js-intranet-invitation-arrow-hide') : this.body.classList.remove('js-intranet-invitation-arrow-hide');\n\n\t\twindow.addEventListener('resize', function() {\n\t\t\tif (window.innerWidth <= 1100)\n\t\t\t{\n\t\t\t\tthis.arrowBox.style.left = (this.panelRect.left + (this.btnWidth / 2) - (this.arrowWidth / 2) - btnPadding) + 'px';\n\t\t\t}\n\t\t\tthis.getSetupArrow();\n\t\t\tthis.updateArrow();\n\t\t}.bind(this))\n\n\t\tthis.inviteButton.addEventListener('click', function() {\n\t\t\tthis.getSetupArrow();\n\t\t\tthis.updateArrow();\n\t\t}.bind(this))\n\t}\n}\n"],"names":["Submit","_EventEmitter","babelHelpers","inherits","parent","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","setEventNamespace","subscribe","event","createClass","key","value","parseEmailAndPhone","form","_this2","Type","isDomNode","errorInputData","items","phoneExp","rows","Array","prototype","slice","querySelectorAll","forEach","row","emailInput","querySelector","phoneInput","nameInput","lastNameInput","emailValue","trim","isInvitationBySmsAvailable","phoneValue","test","String","toLowerCase","push","phoneCountryInput","Validation","isEmail","getGroupAndDepartmentData","requestData","selector","selectorItems","getItems","length","submitInvite","inviteForm","contentBlocks","_ref","toConsumableArray","Event","BaseEvent","data","error","Loc","getMessage","join","emit","analyticsLabel","sendAction","submitInviteWithGroupDp","inviteWithGroupDpForm","_ref2","showErrorMessage","submitSelf","selfForm","obRequestData","checked","submitExtranet","extranetForm","_ref3","submitIntegrator","integratorForm","submitMassInvite","massInviteForm","submitAdd","addForm","action","_this3","disableSubmitButton","userOptions","BX","ajax","runComponentAction","componentName","signedParameters","mode","then","response","showSuccessMessage","changeContent","sendSuccessEvent","B24","licenseInfoPopup","show","message","errors","isDisable","button","isBoolean","Dom","addClass","removeClass","users","SidePanel","Instance","postMessageAll","window","EventEmitter","SelfRegister","selfBlock","bindActions","switcherNode","switcher","Switcher","inputName","id","isSelfRegisterEnabled","node","handlers","toggled","toggleSettings","bind","regenerateButton","activateButton","regenerateSecret","regenerateUrlBase","copyRegisterUrlButton","copyRegisterUrl","allowRegisterConfirm","toggleWhiteList","selfWhiteList","registerUrl","Text","getRandom","allowRegisterSecretNode","allowRegisterUrlNode","clipboard","copy","showHintPopup","runAction","analytics","send","bindNode","PopupWindow","content","zIndex","angle","offsetTop","offsetLeft","closeIcon","autoHide","darkMode","overlay","maxWidth","events","onAfterPopupShow","setTimeout","close","controlBlock","hasClass","toggleClass","settingsBlock","style","inputElement","Phone","count","index","maxCount","inputStack","renderPhoneRow","inputNode","num","getAttribute","parentNode","element","Tag","render","_templateObject","taggedTemplateLiteral","paddingLeft","append","flagNode","showCountrySelector","changeCallback","i","e","country","PhoneNumber","Input","flagSize","onChange","setInterval","_inputNode$parentNode","_inputNode$parentNode2","getValue","formatter","getCountry","clearInterval","_onFlagClick","Row","params","contentBlock","inputNum","rowsContainer","phoneObj","moreButton","unbindAll","renderInputRow","massInviteButton","massMenuNode","document","fireEvent","checkPhoneInput","bindPhoneChecker","inputNodes","bindCloseIcons","container","nextElementSibling","preventDefault","phoneBlock","newInput","replace","remove","renderInviteInputs","numRows","arguments","undefined","clean","showTitles","emailTitle","nameTitle","lastNameTitle","concat","_templateObject2","renderRegisterInputs","_templateObject3","renderIntegratorInput","_templateObject4","Selector","options","entities","prepareOptions","type","hasOwnProperty","selectMode","allowOnlyUserDepartments","allowSelectRootDepartment","optionValue","fillRecentTab","preselectedItems","projectId","tagSelector","TagSelector","dialogOptions","context","renderTo","departments","projects","tagSelectorItems","getDialog","getSelectedItems","item","parseInt","getId","getEntityId","ActiveDirectory","showForm","UI","Feedback","Form","open","defaultForm","sec","_cSection","WeakMap","_isAdmin","_getAdminAllowMode","WeakSet","_getIsAdmin","_getCSection","Analytics","cSection","isAdmin","_classPrivateMethodInitSpec","_classPrivateFieldInitSpec","writable","classPrivateFieldSet","sendData","tool","TOOLS","category","CATEGORY_INVITATION","EVENT_COPY","c_section","_classPrivateMethodGet","_getCSection2","p1","_getIsAdmin2","p2","_getAdminAllowMode2","_class","ADMIN_ALLOW_MODE_Y","ADMIN_ALLOW_MODE_N","classPrivateFieldGet","IS_ADMIN_Y","IS_ADMIN_N","source","defineProperty","formParams","isPlainObject","menuContainer","menuContainerNode","contentContainer","contentContainerNode","isExtranetInstalled","isCloud","isCreatorEmailConfirmed","firstInvitationBlock","blocks","block","blockType","errorMessageBlock","successMessageBlock","Hint","init","menuItems","submit","assertThisInitialized","selfRegister","arrowBox","arrowRect","getBoundingClientRect","arrowHeight","height","setSetupArrow","renderSelector","hideErrorMessage","hideSuccessMessage","activeDirectory","groupId","selectorParams","department","project","changeButton","innerText","disableButton","isButtonActive","successText","display","alert","innerHTML","util","htmlspecialchars","errorText","getSetupArrow","body","panelConfirmBtn","getElementById","sliderContent","sliderHeader","buttonPanel","inviteButton","sliderHeaderHeight","buttonPanelRect","panelRect","btnWidth","Math","ceil","width","arrowWidth","sliderContentRect","bodyHeight","contentHeight","updateArrow","classList","add","btnPadding","left","addEventListener","innerWidth"],"mappings":"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"}